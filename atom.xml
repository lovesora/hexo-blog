<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>lovesora&#39;s blog</title>
  <icon>https://www.gravatar.com/avatar/25d5812b9abe72093a63b491a7d33524</icon>
  <subtitle>( Â´ â–½ ` )ï¾‰`)</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="blog.lovesora.pro/"/>
  <updated>2020-03-23T23:07:27.943Z</updated>
  <id>blog.lovesora.pro/</id>
  
  <author>
    <name>Sora Liu</name>
    <email>475212506@qq.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>è¿‡å»åŠå¹´ï¼Œæˆ‘åšäº†ä»€ä¹ˆï¼Œæœªæ¥åŠå¹´çš„è®¡åˆ’</title>
    <link href="blog.lovesora.pro/2020/03/24/work/summary/2020.03/"/>
    <id>blog.lovesora.pro/2020/03/24/work/summary/2020.03/</id>
    <published>2020-03-24T06:18:19.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¦»å¼€äº†ä¸Šä¸€å®¶å…¬å¸"><a href="#ç¦»å¼€äº†ä¸Šä¸€å®¶å…¬å¸" class="headerlink" title="ç¦»å¼€äº†ä¸Šä¸€å®¶å…¬å¸"></a>ç¦»å¼€äº†ä¸Šä¸€å®¶å…¬å¸</h2><p>  19å¹´ä¸­ï¼Œæˆ‘ç¦»å¼€äº†å¾…äº†2å¹´çš„ä¸€å®¶åˆ›ä¸šå…¬å¸ï¼Œå¯¹äºè¿™å®¶å…¬å¸æˆ‘çš„æ„Ÿæƒ…å¾ˆæ·±ï¼Œæœ€å¼€å§‹æˆ‘åªæ˜¯ä¸€ä¸ªå‰ç«¯çš„ä¸šåŠ¡å¼€å‘ï¼Œé‚£ä¸ªæ—¶å€™äººå¾ˆå°‘ï¼Œåªæœ‰ä¸€ä¸ªå‰è¾ˆï¼ŒåŠ ä¸Šæˆ‘ä¸€å…±ä¹Ÿæ‰ä¸¤ä¸ªäººï¼Œåæ¥ä¸šåŠ¡å‘å±•å¾—æ¯”è¾ƒå¿«ï¼Œåˆæ‹›äº†ä¸€ä¸ªåŒäº‹ï¼Œæˆ‘ä»¬ä¸‰ä¸ªäººå°±å¼€å§‹åŠªåŠ›åœ°å†™ä¸šåŠ¡ï¼Œä¹Ÿæ²¡æœ‰leaderä»€ä¹ˆçš„ï¼Œå½“æ—¶éƒ¨é—¨çš„é¢†å¯¼æƒ³è®©æˆ‘ä»¬ä¸‰ä¸ªäººä¸­çš„æŸä¸€ä¸ªè‡ªå·±â€œå†’â€å‡ºæ¥å½“leaderğŸ˜“ï¼Œä½†ä¸šåŠ¡å®åœ¨å¤ªå¤šäº†ï¼Œæˆ‘ä»¬æ ¹æœ¬å°±æ²¡æœ‰å¤šä½™çš„æ—¶é—´æ¥è€ƒè™‘è¿™äº›ï¼ˆå½“æ—¶è‡ªå·±ä¹Ÿæ˜¯æŒºå•çº¯çš„ï¼Œæ²¡æœ‰ä»€ä¹ˆæ‚ä¸ƒæ‚å…«çš„æƒ³æ³•ï¼Œåªæ˜¯ä¸€å¿ƒæƒ³æå‡è‡ªå·±çš„æŠ€æœ¯ï¼‰ï¼Œåæ¥å…¬å¸æˆ˜ç•¥æœ‰æ‰€è°ƒæ•´ï¼Œä»Bç«¯å¾€Cç«¯å¼€å§‹å‘å±•ï¼Œå¼€å§‹åšå°ç¨‹åºï¼Œäºæ˜¯å¼€å§‹äº†åˆ†ä¸šåŠ¡çº¿ï¼ˆå¤§å‚é‡Œåº”è¯¥å«äº‹ä¸šéƒ¨ï¼‰ï¼Œåˆå¼€å§‹äº†æ–°ä¸€è½®æ‰©å¼ ï¼Œå½“æ—¶æ‹›äººå¾ˆéš¾ï¼Œä¸æ˜¯ç”±HRç­›é€‰ç®€å†ï¼Œè€Œæ˜¯è®©æˆ‘ç›´æ¥åœ¨BOSSä¸Šè‡ªå·±è”ç³»ğŸ˜‚ï¼Œæœ¬æ¥ä¸šåŠ¡å°±å¤šï¼Œå“ªæ¥é‚£ä¹ˆå¤šæ—¶é—´å‘€ï¼Œæ‹›è˜è¿™ä»¶äº‹æƒ…å°±æ¯”è¾ƒæ‹–æ²“ï¼Œä»18å¹´ä¸­åˆ°å¹´åº•ä¸€å…±ä¹Ÿæ‰æ‹›äº†6ä¸ªåŒäº‹ï¼Œè€Œæˆ‘ä¹Ÿæ¸æ¸åœ°å¼€å§‹è„±ç¦»äº†ä¸šåŠ¡ï¼Œæœ€å¼€å§‹çš„ä¸‰äººç»„ä¸­æˆ‘æˆäº†å‰ç«¯leaderï¼Œå¦å¤–ä¸¤ä¸ªåŒäº‹åˆ†åˆ«å¸¦2-4ä¸ªäººå¤„ç†ä¸šåŠ¡ï¼Œå…¶å®å¾ˆæ€€å¿µå½“æ—¶çš„æƒ…æ™¯ï¼Œå’Œåç«¯çš„åŒå­¦æ„Ÿæƒ…ä¹Ÿéå¸¸å¥½ï¼Œä¸­åˆå¤§å®¶ä¸€èµ·åƒé¥­ï¼Œæ™šä¸Šä¸€èµ·å›å®¶ï¼ˆæœ‰2ä¸ªåŒäº‹å’Œæˆ‘ä½åŒä¸€ä¸ªå°åŒºï¼‰ï¼Œå‘¨æœ«å¶å°”ä¸€èµ·å‡ºå»ç©ï¼Œæœ‰æ—¶å€™è¿˜çº¦ä¸€èµ·ç©æ¸¸æˆï¼Œæƒ³æƒ³æ„Ÿæƒ…çœŸçš„å¥½ï¼Œå°±åƒå¤§å­¦åŒå­¦ä¸€æ ·ï¼Œå¤§å®¶æœ‰å•¥å°±è¯´å•¥ï¼Œå“ˆå“ˆå“ˆï¼Œåçš„åœ°æ–¹ä¹ŸæŒ¨ç€ä¸€èµ·ï¼Œéšæ—¶æ‰¯çš®ã€‚</p><p>  19å¹´åˆï¼Œæˆ‘æ¸æ¸æœ‰äº†æ¢ä¸€ä»½å·¥ä½œçš„æƒ³æ³•ï¼Œéƒ¨åˆ†åŸå› æ˜¯ä¸ªäººå‘å±•ï¼Œæ„Ÿè§‰è‡ªå·±å‰è¿›çš„æ­¥ä¼è¿ˆå¾—æ„ˆå‘å›°éš¾ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†åŸå› æ˜¯æ„Ÿè§‰ç ”å‘<br> ã€äº§å“ã€æµ‹è¯•ä¹‹é—´çš„å…³ç³»è¶Šæ¥è¶ŠçŸ›ç›¾ï¼Œå…¬å¸ä¸å¤§ä½†å†…éƒ¨æ¶ˆè€—å´æœ‰ç‚¹ä¸¥é‡ï¼Œæ¸æ¸æ²¡æœ‰äº†é‚£ç§åšå¥½äº‹çš„æ„Ÿè§‰ï¼Œå¤§å®¶ä¸€å¿ƒæƒ³çš„æ˜¯å¦‚ä½•ä¿è¯è‡ªå·±çš„èˆ’é€‚åŒºï¼Œå¦‚ä½•æé«˜è‡ªå·±çš„è¯è¯­æƒï¼Œå°±è¿™ä¹ˆç‚¹äººæˆ‘ä¹Ÿæ˜¯é†‰äº†ï¼Œå“ªæ¥é‚£ä¹ˆå¤šå¼¯å¼¯ç»•ç»•å‘¢ã€‚å„æ–¹é¢åŸå› å§ï¼Œå¼€å§‹äº†è‡ªå·±äººç”Ÿä¸­ä¸‹ä¸€ä»½å·¥ä½œã€‚ä¸­é—´è¿˜æœ‰å¾ˆå¤šæœ‰æ„æ€çš„äº‹æƒ…ï¼Œæˆ‘å¼€ä¸ªå•ç« æ…¢æ…¢é“æ¥ã€‚</p><h2 id="å¼€å§‹æ¥è§¦Devops"><a href="#å¼€å§‹æ¥è§¦Devops" class="headerlink" title="å¼€å§‹æ¥è§¦Devops"></a>å¼€å§‹æ¥è§¦Devops</h2><p>  æ–°å…¬å¸ä¹Ÿæ˜¯ä¸€å®¶åˆ›ä¸šå…¬å¸ï¼Œåˆšå¼€å§‹æˆ‘ä¹Ÿåªæ˜¯åšä¸šåŠ¡ï¼Œè¿™é‡Œæˆ‘å¾—æ„Ÿè°¢ä¸€ä¸‹åœ¨åšä¸šåŠ¡çš„æ—¶å€™æˆ‘çš„managerï¼Œäº¦å¸ˆäº¦å‹ï¼Œå¸®æˆ‘äº‰å–äº†å¾ˆå¤šæœºä¼šï¼Œå·®ä¸å¤š1ä¸ªæœˆå·¦å³æˆ‘è¢«æ‹‰å»äº†infra teamï¼Œå¼€å§‹äº†devopsçš„æ—…ç¨‹ï¼Œæˆ‘ä»infra teamçš„managerèº«ä¸Šå­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ï¼Œä»–å¹´é•¿æˆ‘å‡ å¹´ï¼Œä½†æ˜¯ä»–çš„ç»å†éå¸¸ä¸°å¯Œï¼Œå°è±¡æœ€æ·±çš„å°±æ˜¯ä»–å¯¹å¾…æŠ€æœ¯çš„æ€åº¦ï¼Œä»ä¸æ‹–æ²“ï¼Œæƒ³åˆ°å°±åšï¼ŒåŠ¨ä¸åŠ¨å°±ç¡¬æ ¸æ”¹æºç ï¼Œå½“æ—¶æˆ‘æƒŠå‘†äº†ï¼Œæ€ä¹ˆä¼šæœ‰è¿™ä¹ˆåŠçš„äººï¼ŒçŸ¥è¯†é¢å¾ˆå¹¿ï¼Œå¹¶ä¸”éå¸¸æ•¢äºè¡¨è¾¾è‡ªå·±çš„æƒ³æ³•ï¼ˆè¿™ç‚¹æˆ‘æ„Ÿè§‰è‡ªå·±å·®å¾ˆå¤šï¼Œæ€»æœ‰ç‚¹ç•é¦–ç•å°¾ï¼‰ï¼ŒæŠ€æœ¯æ·±åº¦ä¹Ÿæœ‰ï¼Œä»¥å‰æˆ‘çš„æƒ³æ³•æ˜¯åªè¦èƒ½ç”¨å³å¯ï¼Œä½†ä¸ºä»€ä¹ˆå´æ€è€ƒæ¯”è¾ƒå°‘ï¼Œè®©æˆ‘æƒ³èµ·äº†é«˜ä¸­å­¦æ•°å­¦ï¼Œæ€»å–œæ¬¢é—®ä¸ºä»€ä¹ˆï¼Œæ‰€ä»¥æˆç»©æ‰å¥½ï¼Œæ¯•ä¸šäº†å‡ºæ¥å·¥ä½œäº†ï¼Œåè€Œç¼ºå¤±äº†<strong>è¿½å¯»äº‹ç‰©æœ¬è´¨</strong>çš„æ€åº¦ï¼Œè¿™ç‚¹éœ€è¦æˆ‘è‡ªå·±åæ€ã€‚</p><h2 id="å¼€å§‹å®Œå–„æ–¹æ³•è®º"><a href="#å¼€å§‹å®Œå–„æ–¹æ³•è®º" class="headerlink" title="å¼€å§‹å®Œå–„æ–¹æ³•è®º"></a>å¼€å§‹å®Œå–„æ–¹æ³•è®º</h2><p>  æˆ‘è§‰å¾—åšäº‹æƒ…éœ€è¦æœ‰æ–¹æ³•å’ŒæŠ€å·§ã€‚</p><ul><li>æ–¹æ³• -&gt; å¦‚ä½•é«˜æ•ˆå¹¶ä¸”æœ€å¤§åŒ–ä»·å€¼åœ°å®Œæˆä¸€ä»¶äº‹</li><li>æŠ€å·§ -&gt; å¦‚ä½•è®©è¿‡ç¨‹å˜å¾—ç®€å•ï¼Œå¯æ‰§è¡Œï¼Œå¯é¢„æœŸ</li></ul><h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><ul><li>è¡ŒåŠ¨ä¹‹å‰å…ˆæƒ³å¥½è¿‡ç¨‹ï¼ˆæ­¥éª¤ï¼‰</li><li>æ‰§è¡Œjie duan</li></ul><h2 id="æœªæ¥çš„è®¡åˆ’"><a href="#æœªæ¥çš„è®¡åˆ’" class="headerlink" title="æœªæ¥çš„è®¡åˆ’"></a>æœªæ¥çš„è®¡åˆ’</h2><h3 id="æŠŠè‡ªå·±çš„äººç”Ÿçœ‹æˆæ˜¯-ç¼–ç¨‹"><a href="#æŠŠè‡ªå·±çš„äººç”Ÿçœ‹æˆæ˜¯-ç¼–ç¨‹" class="headerlink" title="æŠŠè‡ªå·±çš„äººç”Ÿçœ‹æˆæ˜¯ ç¼–ç¨‹"></a>æŠŠè‡ªå·±çš„äººç”Ÿçœ‹æˆæ˜¯ <code>ç¼–ç¨‹</code></h3><h3 id="ç°åœ¨éœ€è¦å®Œå–„çš„çŸ¥è¯†"><a href="#ç°åœ¨éœ€è¦å®Œå–„çš„çŸ¥è¯†" class="headerlink" title="ç°åœ¨éœ€è¦å®Œå–„çš„çŸ¥è¯†"></a>ç°åœ¨éœ€è¦å®Œå–„çš„çŸ¥è¯†</h3><h2 id="äººç”Ÿç›®æ ‡"><a href="#äººç”Ÿç›®æ ‡" class="headerlink" title="äººç”Ÿç›®æ ‡"></a>äººç”Ÿç›®æ ‡</h2><h3 id="æ´»æˆè‡ªå·±ï¼Œè€Œéä»–äºº"><a href="#æ´»æˆè‡ªå·±ï¼Œè€Œéä»–äºº" class="headerlink" title="æ´»æˆè‡ªå·±ï¼Œè€Œéä»–äºº"></a>æ´»æˆè‡ªå·±ï¼Œè€Œéä»–äºº</h3><h3 id="è‡ªå¾‹"><a href="#è‡ªå¾‹" class="headerlink" title="è‡ªå¾‹"></a>è‡ªå¾‹</h3><h3 id="è®©è‡ªå·±å˜å¾—é«˜æ•ˆ"><a href="#è®©è‡ªå·±å˜å¾—é«˜æ•ˆ" class="headerlink" title="è®©è‡ªå·±å˜å¾—é«˜æ•ˆ"></a>è®©è‡ªå·±å˜å¾—é«˜æ•ˆ</h3><h3 id="æå‡è‡ªå·±çš„æ‰§è¡ŒåŠ›"><a href="#æå‡è‡ªå·±çš„æ‰§è¡ŒåŠ›" class="headerlink" title="æå‡è‡ªå·±çš„æ‰§è¡ŒåŠ›"></a>æå‡è‡ªå·±çš„æ‰§è¡ŒåŠ›</h3><!--stackedit_data:eyJoaXN0b3J5IjpbMjA4NzMzMTY2NF19-->]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ç¦»å¼€äº†ä¸Šä¸€å®¶å…¬å¸&quot;&gt;&lt;a href=&quot;#ç¦»å¼€äº†ä¸Šä¸€å®¶å…¬å¸&quot; class=&quot;headerlink&quot; title=&quot;ç¦»å¼€äº†ä¸Šä¸€å®¶å…¬å¸&quot;&gt;&lt;/a&gt;ç¦»å¼€äº†ä¸Šä¸€å®¶å…¬å¸&lt;/h2&gt;&lt;p&gt;  19å¹´ä¸­ï¼Œæˆ‘ç¦»å¼€äº†å¾…äº†2å¹´çš„ä¸€å®¶åˆ›ä¸šå…¬å¸ï¼Œå¯¹äºè¿™å®¶å…¬å¸æˆ‘çš„æ„Ÿæƒ…å¾ˆæ·±ï¼Œæœ€å¼€å§‹æˆ‘åªæ˜¯ä¸€ä¸ªå‰ç«¯
      
    
    </summary>
    
    
    
      <category term="summary" scheme="blog.lovesora.pro/tags/summary/"/>
    
  </entry>
  
  <entry>
    <title>The deps manager of go lang</title>
    <link href="blog.lovesora.pro/2019/12/27/go/dep/"/>
    <id>blog.lovesora.pro/2019/12/27/go/dep/</id>
    <published>2019-12-27T17:20:09.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="go-mod"><a href="#go-mod" class="headerlink" title="go mod"></a>go mod</h2><p><a href="https://github.com/golang/go/wiki/Modules" target="_blank" rel="noopener">Go Modules</a> have recently been released and announced as the official Go dependency management tool. A lot of Go 3rd libraries are being migrated to use Go Modules and require dependent projects to use Go Modules as well. Therefore, Go Dep is going to be deprecated soon. We will swap Dep for Go Modules in the project we previously started</p><h2 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h2><ul><li>Allow and recommend projects to be located outside of  <code>$GOPATH</code>.</li><li>Dependencies are put into a  <code>vendor</code>  directory (same as  <code>go-dep</code>), so that different projects can depend on different versions of the same packages.</li><li>Automatically detect import statements and then update dependencies graph, lock, download, and install appropriate versions of packages.</li><li>Automatically check for dependencies when  <code>build</code>,  <code>run</code>, or  <code>test</code>.</li><li>Allow specifying, downgrading, and upgrading versions of packages.</li><li>Automatically generate a dependency lock to ensure reproducible builds.</li><li>Semantic versioning mechanism.</li><li>The official recommendation for dependencies and applied in the Go ecosystem.</li></ul><!--stackedit_data:eyJoaXN0b3J5IjpbLTE1NDU0OTI3OCwtMTU3MjIzNjU2OF19-->]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;go-mod&quot;&gt;&lt;a href=&quot;#go-mod&quot; class=&quot;headerlink&quot; title=&quot;go mod&quot;&gt;&lt;/a&gt;go mod&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/golang/go/wiki/Modules&quot; ta
      
    
    </summary>
    
    
    
      <category term="go" scheme="blog.lovesora.pro/tags/go/"/>
    
      <category term="dep" scheme="blog.lovesora.pro/tags/dep/"/>
    
  </entry>
  
  <entry>
    <title>Shell Common Commands</title>
    <link href="blog.lovesora.pro/2019/12/17/shell/commands/"/>
    <id>blog.lovesora.pro/2019/12/17/shell/commands/</id>
    <published>2019-12-17T11:12:49.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Traverse"><a href="#Traverse" class="headerlink" title="Traverse"></a>Traverse</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># read lines from file</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$line</span></span><br><span class="line"><span class="keyword">done</span> &lt; /path/to/file</span><br></pre></td></tr></table></figure><h2 id="Volume"><a href="#Volume" class="headerlink" title="Volume"></a>Volume</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Show Mounted Hard Drives Partition</span></span><br><span class="line">df -aTh</span><br></pre></td></tr></table></figure><h2 id="Task"><a href="#Task" class="headerlink" title="Task"></a>Task</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># parallel run task</span></span><br><span class="line">wget url1 &amp;</span><br><span class="line">wget url2 &amp;</span><br><span class="line"><span class="built_in">wait</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># calc command time</span></span><br><span class="line">time cp a_large_file .</span><br></pre></td></tr></table></figure><h2 id="Compress"><a href="#Compress" class="headerlink" title="Compress"></a>Compress</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tar zip</span></span><br><span class="line">tar -czf /path/to/archive.zip /src/to/be/zipped</span><br><span class="line"></span><br><span class="line"><span class="comment"># tar unzip</span></span><br><span class="line"><span class="comment"># notice: This will be extracted to /src/to/be/zipped</span></span><br><span class="line"><span class="comment"># not /zipped</span></span><br><span class="line">tar -xzf /path/to/archive.zip -C /</span><br></pre></td></tr></table></figure><h2 id="Network"><a href="#Network" class="headerlink" title="Network"></a>Network</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># check whether the site is healthy</span></span><br><span class="line">curl -<span class="keyword">if</span> https://xxx.xx/health-check</span><br><span class="line"></span><br><span class="line"><span class="comment"># curl: (48) An unknown option was passed in to libcurl</span></span><br><span class="line">apk add curl-dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># how to test gateway</span></span><br><span class="line">kubectl -n istio-system port-forward svc/istio-ingressgateway 3000:80</span><br><span class="line">curl -H <span class="string">"Host: www.xxx.com"</span> http://localhost:3000</span><br></pre></td></tr></table></figure><h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># base</span></span><br><span class="line"><span class="comment"># echo $&#123;str:start-index&#125; or echo $&#123;str:start-index:length&#125;</span></span><br><span class="line">str=<span class="string">'12345'</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;str:2&#125;</span> <span class="comment"># 345</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;str:2:1&#125;</span> <span class="comment"># 3</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;str: -2&#125;</span> <span class="comment"># 45(there is a space beteew ':' and '-')</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cut</span></span><br><span class="line">  <span class="comment"># get Add and Modified files</span></span><br><span class="line">git diff-tree --no-commit-id --name-status -r HEAD | grep <span class="string">'^[AM]'</span> | cut -f 2</span><br><span class="line"></span><br><span class="line"><span class="comment"># rm last substring</span></span><br><span class="line">filename=path-to-test-dev</span><br><span class="line">str=$(<span class="built_in">echo</span> <span class="variable">$&#123;filename%-*&#125;</span>)</span><br><span class="line"><span class="comment"># path-to-test</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$str</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># regex</span></span><br><span class="line">[[ <span class="string">"1234"</span> =~ ^12 ]] &amp;&amp; <span class="built_in">echo</span> y</span><br><span class="line"></span><br><span class="line"><span class="comment"># trim</span></span><br><span class="line"><span class="function"><span class="title">trim</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> var=<span class="string">"$*"</span></span><br><span class="line">    var=<span class="string">"<span class="variable">$&#123;var#"$&#123;var%%[![:space:]]*&#125;</span>"</span>&#125;<span class="string">"</span></span><br><span class="line"><span class="string">    var="</span><span class="variable">$&#123;var%"$&#123;var##*[![:space:]]&#125;</span><span class="string">"&#125;"</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">"<span class="variable">$var</span>"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 123 1221</span></span><br><span class="line">trim <span class="string">' 123 1221  '</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># keep str format</span></span><br><span class="line">cat &lt;&lt;- EOF</span><br><span class="line">w1w1wasdfc</span><br><span class="line">...str</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get json value</span></span><br><span class="line">JSON=<span class="string">'[&#123;"a": "line\nnewline"&#125;, &#123;"a": "line1\nnewline"&#125;]'</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$line</span> | base64 --decode</span><br><span class="line"><span class="keyword">done</span> &lt; &lt;(<span class="built_in">echo</span> <span class="variable">$JSON</span> | jq -r <span class="string">".[].a | @base64"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># convert string to JSON</span></span><br><span class="line">jq -aRs . &lt;&lt;&lt; <span class="string">'line</span></span><br><span class="line"><span class="string">newline'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># use variable as JSON string</span></span><br><span class="line">JSON_STRING=<span class="string">'&#123;"bucketname":"'</span><span class="string">"<span class="variable">$BUCKET_NAME</span>"</span><span class="string">'","objectname":"'</span><span class="string">"<span class="variable">$OBJECT_NAME</span>"</span><span class="string">'","targetlocation":"'</span><span class="string">"<span class="variable">$TARGET_LOCATION</span>"</span><span class="string">'"&#125;'</span></span><br></pre></td></tr></table></figure><h2 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date -D <span class="string">"2019-12-11T07:25:34Z"</span> <span class="string">"+%Y-%m-%d %H:%M:%S"</span></span><br></pre></td></tr></table></figure><h2 id="Process-Subsititution"><a href="#Process-Subsititution" class="headerlink" title="Process Subsititution"></a>Process Subsititution</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># grammar</span></span><br><span class="line"><span class="comment"># &lt;(command) æˆ– &gt;(command)</span></span><br><span class="line">cat &lt;(ls)</span><br><span class="line">ls &gt; &gt;(cat)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> -r line; <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"<span class="variable">$line</span>"</span></span><br><span class="line"><span class="keyword">done</span> &lt; &lt;(ls)</span><br></pre></td></tr></table></figure><!--stackedit_data:eyJoaXN0b3J5IjpbLTk1OTczNjc2MSwxMDkwNzU5NDAzLC0xNzgxNDA0MTM1LDk4MjM4OTY2OSwtMTk3ODYwNDk4Nyw1NzA4NDE5OTQsLTI0NjgwNjA4MCwtMjE1NzM2MTQ1LDg2Njg1ODU1MCwxNzIxODAxOTYyLC0xMTY5OTYxMzkwLC0xMDQ2OTEzMzM5LC04MzE2MDQyNzEsMTk2Njk3MDU5NSwtMTMzODk5ODcwNSwtMTkyNjkwMzM2OCwtMzM2MDcxMiwyMTI2MjUwMzc3LDM1OTI4MzkwM119-->]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Traverse&quot;&gt;&lt;a href=&quot;#Traverse&quot; class=&quot;headerlink&quot; title=&quot;Traverse&quot;&gt;&lt;/a&gt;Traverse&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cla
      
    
    </summary>
    
    
    
      <category term="shell" scheme="blog.lovesora.pro/tags/shell/"/>
    
      <category term="command" scheme="blog.lovesora.pro/tags/command/"/>
    
  </entry>
  
  <entry>
    <title>Bazel Basic</title>
    <link href="blog.lovesora.pro/2019/12/16/bazel/basic/"/>
    <id>blog.lovesora.pro/2019/12/16/bazel/basic/</id>
    <published>2019-12-16T14:22:53.000Z</published>
    <updated>2020-03-23T23:07:27.939Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Concepts-and-Terminology"><a href="#Concepts-and-Terminology" class="headerlink" title="Concepts and Terminology"></a>Concepts and Terminology</h2><ul><li>Workspace</li><li>Repositories</li><li>Packages</li><li>Targets<ul><li>files<ul><li>source files</li><li>generated files</li></ul></li><li>rules</li></ul></li><li>Labels<ul><li>labels belones to only the first parent package(otherwise, it will throw a error â€œcrosses a package boundaryâ€</li></ul></li></ul><h2 id="Rules"><a href="#Rules" class="headerlink" title="Rules"></a>Rules</h2><h3 id="Phases"><a href="#Phases" class="headerlink" title="Phases"></a>Phases</h3><blockquote><p>It will be important to understand the three phases of a build (loading, analysis and execution)</p></blockquote><h3 id="Attributes"><a href="#Attributes" class="headerlink" title="Attributes"></a>Attributes</h3><blockquote><ul><li><em>Dependency attributes</em>, such as  <code>attr.label</code>  and  <code>attr.label_list</code>, declare a dependency from the target that owns the attribute to the target whose label appears in the attributeâ€™s value. This kind of attribute forms the basis of the target graph.</li></ul></blockquote><blockquote><p><em>Output attributes</em>, such as <code>attr.output</code> and <code>attr.output_list</code>, declare an output file that the target generates.</p></blockquote><blockquote><p>Both dependency attributes and output attributes take in label values.</p></blockquote><h4 id="Private-Attribute"><a href="#Private-Attribute" class="headerlink" title="Private Attribute"></a>Private Attribute</h4><blockquote><p>Sometimes we want to not only provide a default value, but prevent the user from overriding this default. To do this, you can make the attribute <em>private</em> by giving it a name that begins with an underscore (<code>_</code>). Private attributes must have default values. It generally only makes sense to use private attributes for implicit dependencies.</p></blockquote><h3 id="Implementation-Function"><a href="#Implementation-Function" class="headerlink" title="Implementation Function"></a>Implementation Function</h3><p>Implementation functions take exactly one parameter: a  <a href="https://docs.bazel.build/versions/1.2.0/skylark/lib/ctx.html" target="_blank" rel="noopener">rule context</a>, conventionally named  <code>ctx</code>. It can be used to:</p><ul><li><p>access attribute values and obtain handles on declared input and output files;</p></li><li><p>create actions; and</p></li><li><p>pass information to other targets that depend on this one, via  <a href="https://docs.bazel.build/versions/1.2.0/skylark/rules.html#providers" target="_blank" rel="noopener">providers</a>.</p></li></ul><!--stackedit_data:eyJoaXN0b3J5IjpbMjg2NTY4NTIwLC0xNTUyNjU0MTgyLC00NTUwMDI1NjUsMjA1ODk1OTM3NiwtMTMyNzg5MTg0MSw0MjU3NDIwLC02MjE1NDQyOTksLTIyNzczOTI1MF19-->]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Concepts-and-Terminology&quot;&gt;&lt;a href=&quot;#Concepts-and-Terminology&quot; class=&quot;headerlink&quot; title=&quot;Concepts and Terminology&quot;&gt;&lt;/a&gt;Concepts and T
      
    
    </summary>
    
    
    
      <category term="bazel" scheme="blog.lovesora.pro/tags/bazel/"/>
    
      <category term="build cache" scheme="blog.lovesora.pro/tags/build-cache/"/>
    
  </entry>
  
  <entry>
    <title>Git Shallow Clone</title>
    <link href="blog.lovesora.pro/2019/12/03/vcs/git/git-shallow-clone/"/>
    <id>blog.lovesora.pro/2019/12/03/vcs/git/git-shallow-clone/</id>
    <published>2019-12-03T17:17:39.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="How-to-clone-a-commit-from-a-heavy-repo"><a href="#How-to-clone-a-commit-from-a-heavy-repo" class="headerlink" title="How to clone a commit from a heavy repo ?"></a>How to clone a commit from a heavy repo ?</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth 1 https://github.com/xxx/yyy.git</span><br></pre></td></tr></table></figure><p>But there is no more messages about commit history. How to resolve it?</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git fetch --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">--unshallow</span><br><span class="line">    Convert a shallow repository to a complete one, removing all the limitations imposed by shallow repositories.</span><br></pre></td></tr></table></figure><!--stackedit_data:eyJoaXN0b3J5IjpbNzk4MTcyNTg4XX0=-->]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;How-to-clone-a-commit-from-a-heavy-repo&quot;&gt;&lt;a href=&quot;#How-to-clone-a-commit-from-a-heavy-repo&quot; class=&quot;headerlink&quot; title=&quot;How to clone a
      
    
    </summary>
    
    
    
      <category term="git" scheme="blog.lovesora.pro/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Differences about Docker in k8s</title>
    <link href="blog.lovesora.pro/2019/12/03/k8s/docker/"/>
    <id>blog.lovesora.pro/2019/12/03/k8s/docker/</id>
    <published>2019-12-03T15:50:36.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Difference-between-Docker-ENTRYPOINT-and-Kubernetes-container-spec-COMMAND"><a href="#Difference-between-Docker-ENTRYPOINT-and-Kubernetes-container-spec-COMMAND" class="headerlink" title="Difference between Docker ENTRYPOINT and Kubernetes container spec COMMAND"></a>Difference between Docker ENTRYPOINT and Kubernetes container spec COMMAND</h2><p>Kubernetes provides us with multiple options on how to use these commands:</p><p>When you override the default Entrypoint and Cmd in Kubernetes .yaml file, these rules apply:</p><ul><li>If you do not supply command or args for a Container, the defaults defined in the Docker image are used.</li><li>If you supply a command but no args for a Container, only the supplied command is used. The default EntryPoint and the default Cmd defined in the Docker image are ignored.</li><li>If you supply only args for a Container, the default Entrypoint defined in the Docker image is run with the args that you supplied.</li><li>If you supply a command and args, the default Entrypoint and the default Cmd defined in the Docker image are ignored. Your command is run with your args.<br>&lt;!â€“stackedit_data:<br>eyJoaXN0b3J5IjpbLTE1MTczNTI0OTFdfQ==</li><li>-&gt;</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Difference-between-Docker-ENTRYPOINT-and-Kubernetes-container-spec-COMMAND&quot;&gt;&lt;a href=&quot;#Difference-between-Docker-ENTRYPOINT-and-Kuber
      
    
    </summary>
    
    
    
      <category term="k8s" scheme="blog.lovesora.pro/tags/k8s/"/>
    
      <category term="docker" scheme="blog.lovesora.pro/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>The Cache of React Pipeline</title>
    <link href="blog.lovesora.pro/2019/12/02/k8s/cache/"/>
    <id>blog.lovesora.pro/2019/12/02/k8s/cache/</id>
    <published>2019-12-02T11:41:02.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Build-Cache"><a href="#Build-Cache" class="headerlink" title="Build Cache"></a>Build Cache</h2><p>æˆ‘ä»¬åœ¨åšpipelineç›¸å…³ä¼˜åŒ–çš„æ—¶å€™ï¼Œä¸€ä¸ªå¾ˆé‡è¦çš„æŒ‡æ ‡å°±æ˜¯æ„å»ºæ—¶é—´ï¼Œæœ€åŸºæœ¬çš„ä¼˜åŒ–å°±æ˜¯æ„å»ºç¼“å­˜ã€‚</p><p>åŸºæœ¬æ€è·¯å°±æ˜¯æ¯æ¬¡ <code>build</code> ä¹‹å‰ <code>restore</code> ä¸Šæ¬¡çš„ç¼“å­˜ï¼Œæ„å»ºå®Œæˆå <code>rebuild</code> å½“å‰ç¼“å­˜ã€‚</p><p><code>cache</code> æˆ‘ä»¬è¯•è¿‡å‡ ç§ç§:</p><ul><li>node ä¸Šçš„ <code>volume</code>ï¼š EBS(RWO), EFS(RWX)ç­‰</li><li>s3</li></ul><p>EBSåªæ”¯æŒ <code>ReadWriteOnly</code>, EFSæ”¯æŒ <code>ReadWriteMany</code>ï¼Œç”±äºæˆ‘ä»¬çš„pipelineå¾ˆå¯èƒ½ä¼šåŒæ—¶æ„å»ºå¤šæ¬¡ï¼Œæ‰€ä»¥éœ€è¦æ”¯æŒ <code>RWX</code>  çš„ <code>EFS</code>ï¼Œæœ€å¼€å§‹æˆ‘ä»¬åœ¨å°è¯•çš„æ—¶å€™å‘ç°å¦‚æœç›´æ¥ç¼“å­˜ä¸ <code>compress</code> çš„è¯ï¼Œä¼ è¾“æ€§èƒ½å­˜åœ¨ç“¶é¢ˆï¼Œæ€»ä½“æ„å»ºæ—¶é—´åè€Œé™ä½ï¼Œæ‰€ä»¥åœ¨ä¸Šä¼ ä¹‹å‰æˆ‘ä»¬å…ˆä½¿ç”¨ tar (no compress) archive ä¸€ä¸‹ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">restore-cache</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">amazonlinux-cache</span></span><br><span class="line">  <span class="attr">workingDir:</span> <span class="string">/workspace/src</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">requests:</span></span><br><span class="line">      <span class="attr">cpu:</span> <span class="string">2000m</span></span><br><span class="line">  <span class="attr">command:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/bin/sh</span></span><br><span class="line">  <span class="attr">args:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">-c</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line">    <span class="string">mkdir</span> <span class="string">-p</span> <span class="string">$&#123;CACHE_FOLDER&#125;</span></span><br><span class="line">    <span class="string">export</span> <span class="string">BUCKET_URL=s3://build-cache</span></span><br><span class="line">    <span class="string">aws</span> <span class="string">s3</span> <span class="string">cp</span> <span class="string">$&#123;BUCKET_URL&#125;/$(inputs.params.REPO_NAME)/$&#123;NODE_MODULES_TAR_NAME&#125;</span> <span class="string">$&#123;CACHE_FOLDER&#125;/$&#123;NODE_MODULES_TAR_NAME&#125;</span> <span class="string">||</span> <span class="literal">true</span></span><br><span class="line">    <span class="string">aws</span> <span class="string">s3</span> <span class="string">cp</span> <span class="string">$&#123;BUCKET_URL&#125;/$(inputs.params.REPO_NAME)/$&#123;BUILD_FILE_TAR_NAME&#125;</span> <span class="string">$&#123;CACHE_FOLDER&#125;/$&#123;BUILD_FILE_TAR_NAME&#125;</span> <span class="string">||</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="string">tar</span> <span class="string">-xf</span> <span class="string">$&#123;CACHE_FOLDER&#125;/$&#123;NODE_MODULES_TAR_NAME&#125;</span> <span class="string">-C</span> <span class="string">/</span> <span class="string">||</span> <span class="literal">true</span></span><br><span class="line">    <span class="string">tar</span> <span class="string">-xf</span> <span class="string">$&#123;CACHE_FOLDER&#125;/$&#123;BUILD_FILE_TAR_NAME&#125;</span> <span class="string">-C</span> <span class="string">/</span> <span class="string">||</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">build-from-src</span></span><br><span class="line">  <span class="attr">volumeMounts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">npmrc</span></span><br><span class="line">    <span class="attr">mountPath:</span> <span class="string">/builder/home/</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">node:12</span></span><br><span class="line">  <span class="attr">workingDir:</span> <span class="string">/workspace/src</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">requests:</span></span><br><span class="line">      <span class="attr">cpu:</span> <span class="string">4000m</span></span><br><span class="line">  <span class="attr">command:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/bin/sh</span></span><br><span class="line">  <span class="attr">args:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">-c</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line">    <span class="string">[</span> <span class="string">-d</span> <span class="string">/workspace/src/node_modules</span> <span class="string">]</span> <span class="string">&amp;&amp;</span> <span class="string">echo</span> <span class="string">"node_modules has been restored from cache"</span> <span class="string">||</span> <span class="string">echo</span> <span class="string">"node_modules cache not found"</span></span><br><span class="line">    <span class="string">[</span> <span class="string">-d</span> <span class="string">/workspace/src/$(inputs.params.pathToBuildCache)</span> <span class="string">]</span> <span class="string">&amp;&amp;</span> <span class="string">echo</span> <span class="string">"$(inputs.params.pathToBuildCache) has been restored from cache\n"</span> <span class="string">||</span> <span class="string">echo</span> <span class="string">"$(inputs.params.pathToBuildCache) cache not found\n"</span></span><br><span class="line">    <span class="string">echo</span> <span class="string">"start building..."</span></span><br><span class="line"></span><br><span class="line">    <span class="string">$(inputs.params.buildCommands)</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">rebuild-cache</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">amazonlinux-cache</span></span><br><span class="line">  <span class="attr">workingDir:</span> <span class="string">/workspace/src</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">requests:</span></span><br><span class="line">      <span class="attr">cpu:</span> <span class="string">2000m</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">AWS_DEFAULT_REGION</span></span><br><span class="line">    <span class="attr">value:</span> <span class="string">ap-northeast-1</span></span><br><span class="line">  <span class="attr">command:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/bin/sh</span></span><br><span class="line">  <span class="attr">args:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">-c</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line">    <span class="comment"># check if skip</span></span><br><span class="line">    <span class="string">if</span> <span class="string">[</span> <span class="string">"$(inputs.params.skipRebuildCache)"</span> <span class="string">==</span> <span class="string">"true"</span> <span class="string">];</span> <span class="string">then</span></span><br><span class="line">      <span class="string">echo</span> <span class="string">'rebuild cache is skipped'</span></span><br><span class="line">      <span class="string">exit</span> <span class="number">0</span></span><br><span class="line">    <span class="string">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># tar</span></span><br><span class="line">    <span class="string">export</span> <span class="string">SRC_FOLDER=/workspace/src</span></span><br><span class="line">    <span class="string">export</span> <span class="string">NODE_MODULES_FOLDER=$&#123;SRC_FOLDER&#125;/node_modules</span></span><br><span class="line">    <span class="string">export</span> <span class="string">BUILD_FOLDER=$&#123;SRC_FOLDER&#125;/$(inputs.params.pathToBuildCache)</span></span><br><span class="line"></span><br><span class="line">    <span class="string">mkdir</span> <span class="string">-p</span> <span class="string">$&#123;CACHE_FOLDER&#125;</span></span><br><span class="line">    <span class="string">tar</span> <span class="string">-cf</span> <span class="string">$&#123;CACHE_FOLDER&#125;/$&#123;NODE_MODULES_TAR_NAME&#125;</span> <span class="string">$&#123;NODE_MODULES_FOLDER&#125;</span> <span class="string">||</span> <span class="literal">true</span></span><br><span class="line">    <span class="string">tar</span> <span class="string">-cf</span> <span class="string">$&#123;CACHE_FOLDER&#125;/$&#123;BUILD_FILE_TAR_NAME&#125;</span> <span class="string">$&#123;BUILD_FOLDER&#125;</span> <span class="string">||</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># upload</span></span><br><span class="line">    <span class="string">export</span> <span class="string">BUCKET_URL=s3://build-cache</span></span><br><span class="line">    <span class="string">aws</span> <span class="string">s3</span> <span class="string">cp</span> <span class="string">$&#123;CACHE_FOLDER&#125;/$&#123;NODE_MODULES_TAR_NAME&#125;</span> <span class="string">$&#123;BUCKET_URL&#125;/$(inputs.params.REPO_NAME)/$&#123;NODE_MODULES_TAR_NAME&#125;</span></span><br><span class="line">    <span class="string">aws</span> <span class="string">s3</span> <span class="string">cp</span> <span class="string">$&#123;CACHE_FOLDER&#125;/$&#123;BUILD_FILE_TAR_NAME&#125;</span> <span class="string">$&#123;BUCKET_URL&#125;/$(inputs.params.REPO_NAME)/$&#123;BUILD_FILE_TAR_NAME&#125;</span></span><br></pre></td></tr></table></figure><h3 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h3><ul><li><a href="https://webpack.js.org/configuration/other-options/#cache" target="_blank" rel="noopener">webpack build cache</a></li><li><a href="https://github.com/tektoncd/pipeline/tree/master/docs" target="_blank" rel="noopener">tekton</a><br>&lt;!â€“stackedit_data:<br>eyJoaXN0b3J5IjpbLTc3NDQ4MzMyNiwtMTMxNjEyODAxMywtMT<br>UyMjcwMDM0Ml19</li><li>-&gt;</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Build-Cache&quot;&gt;&lt;a href=&quot;#Build-Cache&quot; class=&quot;headerlink&quot; title=&quot;Build Cache&quot;&gt;&lt;/a&gt;Build Cache&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬åœ¨åšpipelineç›¸å…³ä¼˜åŒ–çš„æ—¶å€™ï¼Œä¸€ä¸ªå¾ˆé‡è¦çš„æŒ‡æ ‡å°±æ˜¯æ„å»ºæ—¶é—´
      
    
    </summary>
    
    
    
      <category term="cache" scheme="blog.lovesora.pro/tags/cache/"/>
    
      <category term="pipeline" scheme="blog.lovesora.pro/tags/pipeline/"/>
    
  </entry>
  
  <entry>
    <title>k8s pvc subPath</title>
    <link href="blog.lovesora.pro/2019/12/01/k8s/subPath/"/>
    <id>blog.lovesora.pro/2019/12/01/k8s/subPath/</id>
    <published>2019-12-01T18:41:03.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æˆ‘ä»¬å¸Œæœ›å°†æ–‡ä»¶æŒ‚è½½åˆ°æŸä¸ªç›®å½•ï¼Œä½†å¸Œæœ›åªæ˜¯æŒ‚è½½è¯¥æ–‡ä»¶ï¼Œä¸è¦å½±å“æŒ‚è½½ç›®å½•ä¸‹çš„å…¶ä»–æ–‡ä»¶ã€‚æœ‰åŠæ³•å—ï¼Ÿ"><a href="#æˆ‘ä»¬å¸Œæœ›å°†æ–‡ä»¶æŒ‚è½½åˆ°æŸä¸ªç›®å½•ï¼Œä½†å¸Œæœ›åªæ˜¯æŒ‚è½½è¯¥æ–‡ä»¶ï¼Œä¸è¦å½±å“æŒ‚è½½ç›®å½•ä¸‹çš„å…¶ä»–æ–‡ä»¶ã€‚æœ‰åŠæ³•å—ï¼Ÿ" class="headerlink" title="æˆ‘ä»¬å¸Œæœ›å°†æ–‡ä»¶æŒ‚è½½åˆ°æŸä¸ªç›®å½•ï¼Œä½†å¸Œæœ›åªæ˜¯æŒ‚è½½è¯¥æ–‡ä»¶ï¼Œä¸è¦å½±å“æŒ‚è½½ç›®å½•ä¸‹çš„å…¶ä»–æ–‡ä»¶ã€‚æœ‰åŠæ³•å—ï¼Ÿ"></a>æˆ‘ä»¬å¸Œæœ›å°†æ–‡ä»¶æŒ‚è½½åˆ°æŸä¸ªç›®å½•ï¼Œä½†å¸Œæœ›åªæ˜¯æŒ‚è½½è¯¥æ–‡ä»¶ï¼Œä¸è¦å½±å“æŒ‚è½½ç›®å½•ä¸‹çš„å…¶ä»–æ–‡ä»¶ã€‚æœ‰åŠæ³•å—ï¼Ÿ</h3><blockquote><p>subPath çš„ç›®çš„æ˜¯ä¸ºäº†åœ¨å•ä¸€Podä¸­å¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ªvolumeè€Œè®¾è®¡çš„ã€‚</p></blockquote><p> <code>subPath</code>: <code>Path within the volume from which the container&#39;s volume should be mounted</code>ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-lamp-site</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">    <span class="attr">containers:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">mysql</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">mysql</span></span><br><span class="line">      <span class="attr">env:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">MYSQL_ROOT_PASSWORD</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">"rootpasswd"</span> </span><br><span class="line">      <span class="attr">volumeMounts:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/var/lib/mysql</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">site-data</span></span><br><span class="line">        <span class="attr">subPath:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">php</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">php:7.0-apache</span></span><br><span class="line">      <span class="attr">volumeMounts:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/var/www/html</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">site-data</span></span><br><span class="line">        <span class="attr">subPath:</span> <span class="string">html</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">site-data</span></span><br><span class="line">      <span class="attr">persistentVolumeClaim:</span></span><br><span class="line">        <span class="attr">claimName:</span> <span class="string">my-lamp-site-data</span></span><br></pre></td></tr></table></figure><!--stackedit_data:eyJoaXN0b3J5IjpbLTEyODg2OTg1MTcsLTE1NjQ5MzE3NDgsMjgzMjAwODM1LDEzNzIwODIxNTFdfQ==-->]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;æˆ‘ä»¬å¸Œæœ›å°†æ–‡ä»¶æŒ‚è½½åˆ°æŸä¸ªç›®å½•ï¼Œä½†å¸Œæœ›åªæ˜¯æŒ‚è½½è¯¥æ–‡ä»¶ï¼Œä¸è¦å½±å“æŒ‚è½½ç›®å½•ä¸‹çš„å…¶ä»–æ–‡ä»¶ã€‚æœ‰åŠæ³•å—ï¼Ÿ&quot;&gt;&lt;a href=&quot;#æˆ‘ä»¬å¸Œæœ›å°†æ–‡ä»¶æŒ‚è½½åˆ°æŸä¸ªç›®å½•ï¼Œä½†å¸Œæœ›åªæ˜¯æŒ‚è½½è¯¥æ–‡ä»¶ï¼Œä¸è¦å½±å“æŒ‚è½½ç›®å½•ä¸‹çš„å…¶ä»–æ–‡ä»¶ã€‚æœ‰åŠæ³•å—ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;
      
    
    </summary>
    
    
    
      <category term="k8s" scheme="blog.lovesora.pro/tags/k8s/"/>
    
      <category term="volume" scheme="blog.lovesora.pro/tags/volume/"/>
    
      <category term="subPath" scheme="blog.lovesora.pro/tags/subPath/"/>
    
  </entry>
  
  <entry>
    <title>React Suspense</title>
    <link href="blog.lovesora.pro/2019/11/22/fe/react/suspense/"/>
    <id>blog.lovesora.pro/2019/11/22/fe/react/suspense/</id>
    <published>2019-11-22T16:54:03.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Data-fetch-ways"><a href="#Data-fetch-ways" class="headerlink" title="Data fetch ways"></a>Data fetch ways</h2><h3 id="Approach-1-Fetch-on-Render"><a href="#Approach-1-Fetch-on-Render" class="headerlink" title="Approach 1: Fetch-on-Render"></a>Approach 1: Fetch-on-Render</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ProfilePage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = useState(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    fetchUser().then(<span class="function"><span class="params">u</span> =&gt;</span> setUser(u));</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (user === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Loading profile...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;h1&gt;&#123;user.name&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;ProfileTimeline /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">function ProfileTimeline() &#123;</span></span><br><span class="line"><span class="regexp">  const [posts, setPosts] = useState(null);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  useEffect(() =&gt; &#123;</span></span><br><span class="line"><span class="regexp">    fetchPosts().then(p =&gt; setPosts(p));</span></span><br><span class="line"><span class="regexp">  &#125;, []);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  if (posts === null) &#123;</span></span><br><span class="line"><span class="regexp">    return &lt;h2&gt;Loading posts...&lt;/</span>h2&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &#123;posts.map(<span class="function"><span class="params">post</span> =&gt;</span> (</span><br><span class="line">        &lt;li key=&#123;post.id&#125;&gt;&#123;post.text&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">      ))&#125;</span></span><br><span class="line"><span class="regexp">    &lt;/u</span>l&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Approach-2-Fetch-Then-Render-not-using-Suspense"><a href="#Approach-2-Fetch-Then-Render-not-using-Suspense" class="headerlink" title="Approach 2: Fetch-Then-Render (not using Suspense)"></a>Approach 2: Fetch-Then-Render (not using Suspense)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Kick off fetching as early as possible</span></span><br><span class="line"><span class="keyword">const</span> promise = fetchProfileData();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ProfilePage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = useState(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> [posts, setPosts] = useState(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    promise.then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      setUser(data.user);</span><br><span class="line">      setPosts(data.posts);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (user === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Loading profile...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;h1&gt;&#123;user.name&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;ProfileTimeline posts=&#123;posts&#125; /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ The child doesn't trigger fetching anymore</span></span><br><span class="line"><span class="regexp">function ProfileTimeline(&#123; posts &#125;) &#123;</span></span><br><span class="line"><span class="regexp">  if (posts === null) &#123;</span></span><br><span class="line"><span class="regexp">    return &lt;h2&gt;Loading posts...&lt;/</span>h2&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &#123;posts.map(<span class="function"><span class="params">post</span> =&gt;</span> (</span><br><span class="line">        &lt;li key=&#123;post.id&#125;&gt;&#123;post.text&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">      ))&#125;</span></span><br><span class="line"><span class="regexp">    &lt;/u</span>l&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!--stackedit_data:eyJoaXN0b3J5IjpbLTEyNTAxODI1MjJdfQ==-->]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Data-fetch-ways&quot;&gt;&lt;a href=&quot;#Data-fetch-ways&quot; class=&quot;headerlink&quot; title=&quot;Data fetch ways&quot;&gt;&lt;/a&gt;Data fetch ways&lt;/h2&gt;&lt;h3 id=&quot;Approach-1-Fe
      
    
    </summary>
    
    
    
      <category term="react" scheme="blog.lovesora.pro/tags/react/"/>
    
      <category term="data fetch" scheme="blog.lovesora.pro/tags/data-fetch/"/>
    
  </entry>
  
  <entry>
    <title>Web Spec</title>
    <link href="blog.lovesora.pro/2019/11/22/web/spec/"/>
    <id>blog.lovesora.pro/2019/11/22/web/spec/</id>
    <published>2019-11-22T13:39:24.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="be"><a href="#be" class="headerlink" title="be"></a>be</h2><ul><li><code>/api</code> ä¸ºç»Ÿä¸€å‰ç¼€</li></ul><h2 id="fe"><a href="#fe" class="headerlink" title="fe"></a>fe</h2><ul><li><code>cookie</code> æ²¡æœ‰è¦æ±‚çš„è¯ä»¥ <code>æ ¹åŸŸ</code> ä¸ºåŸºç¡€</li></ul><!--stackedit_data:eyJoaXN0b3J5IjpbMjAyODYwNjI0LC03NjYxNDk5ODJdfQ==-->]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;be&quot;&gt;&lt;a href=&quot;#be&quot; class=&quot;headerlink&quot; title=&quot;be&quot;&gt;&lt;/a&gt;be&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/api&lt;/code&gt; ä¸ºç»Ÿä¸€å‰ç¼€&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;fe&quot;&gt;&lt;a href=&quot;#fe&quot; cla
      
    
    </summary>
    
    
    
      <category term="spec" scheme="blog.lovesora.pro/tags/spec/"/>
    
      <category term="web" scheme="blog.lovesora.pro/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>Tekton Pipeline Hello World Tutorial</title>
    <link href="blog.lovesora.pro/2019/11/21/pipeline/tekton/"/>
    <id>blog.lovesora.pro/2019/11/21/pipeline/tekton/</id>
    <published>2019-11-21T00:14:47.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Hello-World-Tutorial"><a href="#Hello-World-Tutorial" class="headerlink" title="Hello World Tutorial"></a>Hello World Tutorial</h1><p>Welcome to the Tekton Pipeline tutorial!</p><p>This tutorial will walk you through creating and running some simple<br><code>Tasks</code> &amp; <code>Pipelines</code>and running them by creating<br><code>TaskRuns</code> and <code>PipelineRuns</code>.</p><ul><li><a href="#task">Creating a hello world <code>Task</code></a></li><li><a href="#pipeline">Creating a hello world <code>Pipeline</code></a></li></ul><p>Before starting this tutorial, please install the <a href="https://github.com/tektoncd/cli" target="_blank" rel="noopener">Tekton CLI</a>.</p><p><strong>Note:</strong> <a href="#local-development">This tutorial can be run on a local workstation</a></p><h2 id="Task"><a href="#Task" class="headerlink" title="Task"></a>Task</h2><p>The main objective of Tekton Pipelines is to run your Task individually or as a<br>part of a Pipeline. Every <code>Task</code> runs as a Pod on your Kubernetes cluster with<br>each step as its own container.</p><p>A <code>Task</code> defines the work that needs to be executed, for example the<br>following is a simple <code>Task</code> that will echo hello world:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">tekton.dev/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Task</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">echo-hello-world</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">echo</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">ubuntu</span></span><br><span class="line">      <span class="attr">command:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">echo</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">"hello world"</span></span><br></pre></td></tr></table></figure><p>The <code>steps</code> are a series of commands to be sequentially executed by the <code>Task</code>.</p><p>A <code>TaskRun</code> runs the <code>Task</code> you defined. Here is a simple example<br>of a <code>TaskRun</code> you can use to execute your <code>Task</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">tekton.dev/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">TaskRun</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">echo-hello-world-task-run</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">taskRef:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">echo-hello-world</span></span><br></pre></td></tr></table></figure><p>To apply the yaml files, use the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f &lt;name-of-file.yaml&gt;</span><br></pre></td></tr></table></figure><p>To see the output of the <code>TaskRun</code>, use the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tkn taskrun describe <span class="built_in">echo</span>-hello-world-task-run</span><br></pre></td></tr></table></figure><p>You will get an output similar to the following:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Name:        echo-hello-world-task-run</span><br><span class="line">Namespace:   default</span><br><span class="line">Task Ref:    echo-hello-world</span><br><span class="line"></span><br><span class="line">Status</span><br><span class="line">STARTED         DURATION    STATUS</span><br><span class="line">4 minutes ago   9 seconds   Succeeded</span><br><span class="line"></span><br><span class="line">Input Resources</span><br><span class="line">No resources</span><br><span class="line"></span><br><span class="line">Output Resources</span><br><span class="line">No resources</span><br><span class="line"></span><br><span class="line">Params</span><br><span class="line">No params</span><br><span class="line"></span><br><span class="line">Steps</span><br><span class="line">NAME</span><br><span class="line">echo</span><br></pre></td></tr></table></figure><p>The status of type <code>Succeeded</code> shows that the <code>Task</code> ran successfully.</p><p>To see the actual outcome, use the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tkn taskrun logs <span class="built_in">echo</span>-hello-world-task-run</span><br></pre></td></tr></table></figure><p>You will get an output similar to this:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[echo] hello world</span><br></pre></td></tr></table></figure><h3 id="Task-Inputs-and-Outputs"><a href="#Task-Inputs-and-Outputs" class="headerlink" title="Task Inputs and Outputs"></a>Task Inputs and Outputs</h3><p>In more common scenarios, a <code>Task</code> needs multiple steps with input and output<br>resources to process. For example a <code>Task</code> could fetch source code from a GitHub<br>repository and build a Docker image from it.</p><p><code>PipelineResources</code> are used to define the artifacts that can be<br>passed in and out of a <code>Task</code>. There are a few system defined resource types ready<br>to use, and the following are two examples of the resources commonly needed.</p><p>The <code>git</code> resource represents a git repository with<br>a specific revision:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">tekton.dev/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PipelineResource</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">skaffold-git</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">params:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">revision</span></span><br><span class="line">      <span class="attr">value:</span> <span class="string">master</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">url</span></span><br><span class="line">      <span class="attr">value:</span> <span class="string">https://github.com/GoogleContainerTools/skaffold</span> <span class="comment">#configure: change if you want to build something else, perhaps from your own local git repository.</span></span><br></pre></td></tr></table></figure><p>The <code>image</code> resource represents the image to be<br>built by the <code>Task</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">tekton.dev/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PipelineResource</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">skaffold-image-leeroy-web</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">image</span></span><br><span class="line">  <span class="attr">params:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">url</span></span><br><span class="line">      <span class="attr">value:</span> <span class="string">gcr.io/&lt;use</span> <span class="string">your</span> <span class="string">project&gt;/leeroy-web</span> <span class="comment">#configure: replace with where the image should go: perhaps your local registry or Dockerhub with a secret and configured service account</span></span><br></pre></td></tr></table></figure><p>The following is a <code>Task</code> with inputs and outputs. The input resource is a<br>GitHub repository and the output is the image produced from that source. The<br>args of the <code>Task</code> command support variable substitution so that the definition of <code>Task</code> is<br>constant and the value of parameters can change in runtime.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">tekton.dev/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Task</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">build-docker-image-from-git-source</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">inputs:</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">docker-source</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">params:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">pathToDockerFile</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">string</span></span><br><span class="line">        <span class="attr">description:</span> <span class="string">The</span> <span class="string">path</span> <span class="string">to</span> <span class="string">the</span> <span class="string">dockerfile</span> <span class="string">to</span> <span class="string">build</span></span><br><span class="line">        <span class="attr">default:</span> <span class="string">/workspace/docker-source/Dockerfile</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">pathToContext</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">string</span></span><br><span class="line">        <span class="attr">description:</span></span><br><span class="line">          <span class="string">The</span> <span class="string">build</span> <span class="string">context</span> <span class="string">used</span> <span class="string">by</span> <span class="string">Kaniko</span></span><br><span class="line">          <span class="string">(https://github.com/GoogleContainerTools/kaniko#kaniko-build-contexts)</span></span><br><span class="line">        <span class="attr">default:</span> <span class="string">/workspace/docker-source</span></span><br><span class="line">  <span class="attr">outputs:</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">builtImage</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">image</span></span><br><span class="line">  <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">build-and-push</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">gcr.io/kaniko-project/executor:v0.14.0</span></span><br><span class="line">      <span class="comment"># specifying DOCKER_CONFIG is required to allow kaniko to detect docker credential</span></span><br><span class="line">      <span class="attr">env:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">"DOCKER_CONFIG"</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">"/builder/home/.docker/"</span></span><br><span class="line">      <span class="attr">command:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">/kaniko/executor</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--dockerfile=$(inputs.params.pathToDockerFile)</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--destination=$(outputs.resources.builtImage.url)</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--context=$(inputs.params.pathToContext)</span></span><br></pre></td></tr></table></figure><p>Before you continue with the <code>TaskRun</code> you will have to<br>create a <code>secret</code> to push your image to your desired registry.</p><p>To do so, use the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubectl create secret docker-registry regcred \</span><br><span class="line">                    --docker-server=&lt;your-registry-server&gt; \</span><br><span class="line">                    --docker-username=&lt;your-name&gt; \</span><br><span class="line">                    --docker-password=&lt;your-pword&gt; \</span><br><span class="line">                    --docker-email=&lt;your-email&gt;</span><br></pre></td></tr></table></figure><p>To be able to use this <code>secret</code> the <code>TaskRun</code> needs to use a <code>ServiceAccount</code>.</p><p>The <code>ServiceAccount</code> should look similar to this:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">tutorial-service</span></span><br><span class="line"><span class="attr">secrets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">regcred</span></span><br></pre></td></tr></table></figure><p>You need to put your new <code>ServiceAccount</code> into action, to do so, use the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f &lt;name-of-file.yaml&gt;</span><br></pre></td></tr></table></figure><p>Now you are ready for your first <code>TaskRun</code>.</p><p>A <code>TaskRun</code> binds the inputs and outputs to already defined <code>PipelineResources</code>,<br>sets values to the parameters used for variable substitution in addition to executing the<br><code>Task</code> steps.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">tekton.dev/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">TaskRun</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">build-docker-image-from-git-source-task-run</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">serviceAccountName:</span> <span class="string">tutorial-service</span></span><br><span class="line">  <span class="attr">taskRef:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">build-docker-image-from-git-source</span></span><br><span class="line">  <span class="attr">inputs:</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">docker-source</span></span><br><span class="line">        <span class="attr">resourceRef:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">skaffold-git</span></span><br><span class="line">    <span class="attr">params:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">pathToDockerFile</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">Dockerfile</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">pathToContext</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">/workspace/docker-source/examples/microservices/leeroy-web</span> <span class="comment">#configure: may change according to your source</span></span><br><span class="line">  <span class="attr">outputs:</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">builtImage</span></span><br><span class="line">        <span class="attr">resourceRef:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">skaffold-image-leeroy-web</span></span><br></pre></td></tr></table></figure><p>To apply the yaml files use the following command, you need to apply the two<br><code>PipelineResources</code>, the <code>Task</code> and <code>TaskRun</code>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f &lt;name-of-file.yaml&gt;</span><br></pre></td></tr></table></figure><p>To see all the resource created so far as part of Tekton Pipelines, run the<br>command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get tekton-pipelines</span><br></pre></td></tr></table></figure><p>You will get an output similar to the following:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">NAME                                                   AGE</span><br><span class="line">taskruns&#x2F;build-docker-image-from-git-source-task-run   30s</span><br><span class="line"></span><br><span class="line">NAME                                          AGE</span><br><span class="line">pipelineresources&#x2F;skaffold-git                6m</span><br><span class="line">pipelineresources&#x2F;skaffold-image-leeroy-web   7m</span><br><span class="line"></span><br><span class="line">NAME                                       AGE</span><br><span class="line">tasks&#x2F;build-docker-image-from-git-source   7m</span><br></pre></td></tr></table></figure><p>To see the output of the TaskRun, use the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tkn taskrun describe build-docker-image-from-git-source-task-run</span><br></pre></td></tr></table></figure><p>You will get an output similar to the following:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Name:        build-docker-image-from-git-source-task-run</span><br><span class="line">Namespace:   default</span><br><span class="line">Task Ref:    build-docker-image-from-git-source</span><br><span class="line"></span><br><span class="line">Status</span><br><span class="line">STARTED       DURATION     STATUS</span><br><span class="line">2 hours ago   56 seconds   Succeeded</span><br><span class="line"></span><br><span class="line">Input Resources</span><br><span class="line">NAME            RESOURCE REF</span><br><span class="line">docker-source   skaffold-git</span><br><span class="line"></span><br><span class="line">Output Resources</span><br><span class="line">NAME         RESOURCE REF</span><br><span class="line">builtImage   skaffold-image-leeroy-web</span><br><span class="line"></span><br><span class="line">Params</span><br><span class="line">NAME               VALUE</span><br><span class="line">pathToDockerFile   Dockerfile</span><br><span class="line">pathToContext      &#x2F;workspace&#x2F;docker-source&#x2F;examples&#x2F;microservices&#x2F;leeroy-web</span><br><span class="line"></span><br><span class="line">Steps</span><br><span class="line">NAME</span><br><span class="line">build-and-push</span><br><span class="line">create-dir-builtimage-wtjh9</span><br><span class="line">git-source-skaffold-git-tck6k</span><br><span class="line">image-digest-exporter-hlbsq</span><br></pre></td></tr></table></figure><p>The status of type <code>Succeeded</code> shows the Task ran successfully and you<br>can also validate the Docker image is created in the location specified in the<br>resource definition.</p><p>If you run into issues, use the following command to receive the logs:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tkn taskrun logs build-docker-image-from-git-source-task-run</span><br></pre></td></tr></table></figure><h2 id="Pipeline"><a href="#Pipeline" class="headerlink" title="Pipeline"></a>Pipeline</h2><p>A <code>Pipeline</code> defines a list of <code>Tasks</code> to execute in order, while<br>also indicating if any outputs should be used as inputs of a following <code>Task</code> by<br>using the <code>from</code> field and also indicating<br>the order of executing (using the <code>runAfter</code> and <code>from</code> fields).<br>The same variable substitution you used in <code>Tasks</code> is also available in a <code>Pipeline</code>.</p><p>For example:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">tekton.dev/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pipeline</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">tutorial-pipeline</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">source-repo</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">web-image</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">image</span></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">build-skaffold-web</span></span><br><span class="line">      <span class="attr">taskRef:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">build-docker-image-from-git-source</span></span><br><span class="line">      <span class="attr">params:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">pathToDockerFile</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">Dockerfile</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">pathToContext</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">/workspace/docker-source/examples/microservices/leeroy-web</span> <span class="comment">#configure: may change according to your source</span></span><br><span class="line">      <span class="attr">resources:</span></span><br><span class="line">        <span class="attr">inputs:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">docker-source</span></span><br><span class="line">            <span class="attr">resource:</span> <span class="string">source-repo</span></span><br><span class="line">        <span class="attr">outputs:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">builtImage</span></span><br><span class="line">            <span class="attr">resource:</span> <span class="string">web-image</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">deploy-web</span></span><br><span class="line">      <span class="attr">taskRef:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">deploy-using-kubectl</span></span><br><span class="line">      <span class="attr">resources:</span></span><br><span class="line">        <span class="attr">inputs:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">source</span></span><br><span class="line">            <span class="attr">resource:</span> <span class="string">source-repo</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">image</span></span><br><span class="line">            <span class="attr">resource:</span> <span class="string">web-image</span></span><br><span class="line">            <span class="attr">from:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">build-skaffold-web</span></span><br><span class="line">      <span class="attr">params:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">path</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">/workspace/source/examples/microservices/leeroy-web/kubernetes/deployment.yaml</span> <span class="comment">#configure: may change according to your source</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">yamlPathToImage</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">"spec.template.spec.containers[0].image"</span></span><br></pre></td></tr></table></figure><p>The above <code>Pipeline</code> is referencing a <code>Task</code> called <code>deploy-using-kubectl</code> which<br>can be found here:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">tekton.dev/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Task</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">deploy-using-kubectl</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">inputs:</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">source</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">image</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">image</span></span><br><span class="line">    <span class="attr">params:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">path</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">string</span></span><br><span class="line">        <span class="attr">description:</span> <span class="string">Path</span> <span class="string">to</span> <span class="string">the</span> <span class="string">manifest</span> <span class="string">to</span> <span class="string">apply</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">yamlPathToImage</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">string</span></span><br><span class="line">        <span class="attr">description:</span></span><br><span class="line">          <span class="string">The</span> <span class="string">path</span> <span class="string">to</span> <span class="string">the</span> <span class="string">image</span> <span class="string">to</span> <span class="string">replace</span> <span class="string">in</span> <span class="string">the</span> <span class="string">yaml</span> <span class="string">manifest</span> <span class="string">(arg</span> <span class="string">to</span> <span class="string">yq)</span></span><br><span class="line">  <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">replace-image</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">mikefarah/yq</span></span><br><span class="line">      <span class="attr">command:</span> <span class="string">["yq"]</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">"w"</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">"-i"</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">"$(inputs.params.path)"</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">"$(inputs.params.yamlPathToImage)"</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">"$(inputs.resources.image.url)"</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">run-kubectl</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">lachlanevenson/k8s-kubectl</span></span><br><span class="line">      <span class="attr">command:</span> <span class="string">["kubectl"]</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">"apply"</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">"-f"</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">"$(inputs.params.path)"</span></span><br></pre></td></tr></table></figure><p>With the new <code>Task</code> inside of your <code>Pipeline</code>,<br>you need to give your <code>ServiceAccount</code> additional permissions to be able to execute the <code>run-kubectl</code> step.</p><p>First you have to create a new role, which you have to assign to your <code>ServiceAccount</code>,<br>to do so, use the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl create clusterrole tutorial-role \</span><br><span class="line">               --verb=get,list,watch,create,update,patch,delete \</span><br><span class="line">               --resource=deployments</span><br></pre></td></tr></table></figure><p>Now you need to assign this new role <code>tutorial-role</code> to your <code>ServiceAccount</code>,<br>to do so, use the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl create clusterrolebinding tutorial-binding \</span><br><span class="line">             --clusterrole=tutorial-role \</span><br><span class="line">             --serviceaccount=default:tutorial-service</span><br></pre></td></tr></table></figure><p>To run the <code>Pipeline</code>, create a <code>PipelineRun</code>as follows:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">tekton.dev/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PipelineRun</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">tutorial-pipeline-run-1</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">serviceAccountName:</span> <span class="string">tutorial-service</span></span><br><span class="line">  <span class="attr">pipelineRef:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">tutorial-pipeline</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">source-repo</span></span><br><span class="line">      <span class="attr">resourceRef:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">skaffold-git</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">web-image</span></span><br><span class="line">      <span class="attr">resourceRef:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">skaffold-image-leeroy-web</span></span><br></pre></td></tr></table></figure><p>The <code>PipelineRun</code> will create the <code>TaskRuns</code> corresponding to each <code>Task</code> and<br>collect the results.</p><p>To apply the yaml files use the following command, you will need to apply the<br><code>deploy-task</code> if you want to run the Pipeline.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f &lt;name-of-file.yaml&gt;</span><br></pre></td></tr></table></figure><p>While the <code>Pipeline</code> is running, you can see what exactly is happening, just use the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tkn pipelinerun logs tutorial-pipeline-run-1 -f</span><br></pre></td></tr></table></figure><p>To see the output of the <code>PipelineRun</code>, use the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tkn pipelinerun describe tutorial-pipeline-run-1</span><br></pre></td></tr></table></figure><p>You will get an output similar to the following:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Name:           tutorial-pipeline-run-1</span><br><span class="line">Namespace:      default</span><br><span class="line">Pipeline Ref:   tutorial-pipeline</span><br><span class="line"></span><br><span class="line">Status</span><br><span class="line">STARTED       DURATION   STATUS</span><br><span class="line">4 hours ago   1 minute   Succeeded</span><br><span class="line"></span><br><span class="line">Resources</span><br><span class="line">NAME          RESOURCE REF</span><br><span class="line"><span class="built_in">source</span>-repo   skaffold-git</span><br><span class="line">web-image     skaffold-image-leeroy-web</span><br><span class="line"></span><br><span class="line">Params</span><br><span class="line">No params</span><br><span class="line"></span><br><span class="line">Taskruns</span><br><span class="line">NAME                                               TASK NAME            STARTED       DURATION     STATUS</span><br><span class="line">tutorial-pipeline-run-1-deploy-web-jjf2l           deploy-web           4 hours ago   14 seconds   Succeeded</span><br><span class="line">tutorial-pipeline-run-1-build-skaffold-web-7jgjh   build-skaffold-web   4 hours ago   1 minute     Succeeded</span><br></pre></td></tr></table></figure><p>The status of type <code>Succeeded</code> shows the <code>Pipeline</code> ran successfully, also<br>the status of individual Task runs are shown.</p><h2 id="Local-development"><a href="#Local-development" class="headerlink" title="Local development"></a>Local development</h2><h3 id="Known-good-configuration"><a href="#Known-good-configuration" class="headerlink" title="Known good configuration"></a>Known good configuration</h3><p>Tekton Pipelines is known to work with:</p><ul><li><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">Docker for Desktop</a>. A known good<br>configuration specifies six CPUs, 10 GB of memory and 2 GB of swap space. </li><li>These <a href="https://github.com/tektoncd/pipeline/blob/master/DEVELOPMENT.md#requirements" target="_blank" rel="noopener">prerequisites</a>.</li><li>Setting <code>host.docker.local:5000</code> as an insecure registry with Docker for<br>Desktop (set via preferences or configuration, see the<br><a href="https://docs.docker.com/registry/insecure/" target="_blank" rel="noopener">Docker insecure registry documentation</a>.<br>for details)</li><li>Passing <code>--insecure</code> as an argument to Kaniko tasks lets us push to an<br>insecure registry.</li><li>Running a local (insecure) Docker registry: this can be run with</li></ul><p><code>docker run -d -p 5000:5000 --name registry-srv -e REGISTRY_STORAGE_DELETE_ENABLED=true registry:2</code></p><ul><li>Optionally, a Docker registry viewer so we can check our pushed images are<br>present:</li></ul><p><code>docker run -it -p 8080:8080 --name registry-web --link registry-srv -e REGISTRY_URL=http://registry-srv:5000/v2 -e REGISTRY_NAME=localhost:5000 hyper/docker-registry-web</code></p><h3 id="Images"><a href="#Images" class="headerlink" title="Images"></a>Images</h3><ul><li>Any PipelineResource definitions of image type should be updated to use the<br>local registry by setting the url to<br><code>host.docker.internal:5000/myregistry/&lt;image name&gt;</code> equivalents</li><li>The <code>KO_DOCKER_REPO</code> variable should be set to <code>localhost:5000/myregistry</code><br>before using <code>ko</code></li><li>You are able to push to <code>host.docker.internal:5000/myregistry/&lt;image name&gt;</code><br>but your applications (e.g any deployment definitions) should reference<br><code>localhost:5000/myregistry/&lt;image name&gt;</code></li></ul><h3 id="Logging"><a href="#Logging" class="headerlink" title="Logging"></a>Logging</h3><ul><li>Logs can remain in-memory only as opposed to sent to a service such as<br><a href="https://cloud.google.com/logging/" target="_blank" rel="noopener">Stackdriver</a>.</li><li>See docs on getting logs from Runs</li></ul><p>Elasticsearch, Beats and Kibana can be deployed locally as a means to view logs:<br>an example is provided at<br><a href="https://github.com/mgreau/tekton-pipelines-elastic-tutorials" target="_blank" rel="noopener">https://github.com/mgreau/tekton-pipelines-elastic-tutorials</a>.</p><h2 id="Experimentation"><a href="#Experimentation" class="headerlink" title="Experimentation"></a>Experimentation</h2><p>Lines of code you may want to configure have the #configure annotation. This<br>annotation applies to subjects such as Docker registries, log output locations<br>and other nuances that may be specific to particular cloud providers or<br>services.</p><p>The <code>TaskRuns</code> have been created in the following<br>order:</p><ol><li><code>tutorial-pipeline-run-1-build-skaffold-web</code> - This runs the<br>Pipeline Task <code>build-skaffold-web</code> first,<br>because it has no <code>from</code> or <code>runAfter</code> clauses</li><li><code>tutorial-pipeline-run-1-deploy-web</code> - This runs <code>deploy-web</code> second, because<br>its input <code>web-image</code> comes <code>from</code><br><code>build-skaffold-web</code> (therefore <code>build-skaffold-web</code> must run before<br><code>deploy-web</code>).</li></ol><!--stackedit_data:eyJoaXN0b3J5IjpbMjE2Mjk5OTE3LC0xMzY1MDA5MDJdfQ==-->]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Hello-World-Tutorial&quot;&gt;&lt;a href=&quot;#Hello-World-Tutorial&quot; class=&quot;headerlink&quot; title=&quot;Hello World Tutorial&quot;&gt;&lt;/a&gt;Hello World Tutorial&lt;/h1&gt;&lt;
      
    
    </summary>
    
    
    
      <category term="pipeline" scheme="blog.lovesora.pro/tags/pipeline/"/>
    
      <category term="github" scheme="blog.lovesora.pro/tags/github/"/>
    
      <category term="tekton" scheme="blog.lovesora.pro/tags/tekton/"/>
    
  </entry>
  
  <entry>
    <title>Mac åˆå§‹åŒ–</title>
    <link href="blog.lovesora.pro/2019/11/19/mac/new-os/"/>
    <id>blog.lovesora.pro/2019/11/19/mac/new-os/</id>
    <published>2019-11-19T14:07:02.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h3 id="xcode"><a href="#xcode" class="headerlink" title="xcode"></a>xcode</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcode-select --install</span><br></pre></td></tr></table></figure><h3 id="homebrew"><a href="#homebrew" class="headerlink" title="homebrew"></a>homebrew</h3><blockquote><p><a href="https://brew.sh/" target="_blank" rel="noopener">https://brew.sh/</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ruby -e <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br></pre></td></tr></table></figure><p>Install software</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># IDE</span></span><br><span class="line">brew install zsh</span><br><span class="line">brew install tmux</span><br><span class="line">brew install python</span><br><span class="line">brew install vim</span><br><span class="line">brew install nodejs</span><br><span class="line"></span><br><span class="line"><span class="comment"># Shell</span></span><br><span class="line">brew install hub</span><br><span class="line"></span><br><span class="line"><span class="comment"># CI/CD</span></span><br><span class="line">brew install go</span><br><span class="line">brew install kubernetes-cli</span><br><span class="line">brew install kubernetes-helm</span><br><span class="line">brew install kubectx</span><br></pre></td></tr></table></figure><h3 id="Google-Drive"><a href="#Google-Drive" class="headerlink" title="Google Drive"></a>Google Drive</h3><blockquote><p><a href="https://www.google.com/drive/download/" target="_blank" rel="noopener">https://www.google.com/drive/download/</a></p></blockquote><ul><li>alfred</li><li>spectacle</li><li>shadowsocks-ng</li><li>karabiner</li><li>mailspring</li></ul><h3 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.vimrc</span><br></pre></td></tr></table></figure><!--stackedit_data:eyJoaXN0b3J5IjpbMTQ5MTczMDczOV19-->]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;xcode&quot;&gt;&lt;a href=&quot;#xcode&quot; class=&quot;headerlink&quot; title=&quot;xcode&quot;&gt;&lt;/a&gt;xcode&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;
      
    
    </summary>
    
    
    
      <category term="mac" scheme="blog.lovesora.pro/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>JS åŠ¨æ€åŠ è½½å­—ä½“</title>
    <link href="blog.lovesora.pro/2019/05/21/javascript/dynamic/font/"/>
    <id>blog.lovesora.pro/2019/05/21/javascript/dynamic/font/</id>
    <published>2019-05-21T10:09:21.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Axios-FileReader"><a href="#Axios-FileReader" class="headerlink" title="Axios + FileReader"></a>Axios + FileReader</h1><blockquote><p>FileReader å¯¹è±¡å…è®¸Webåº”ç”¨ç¨‹åºå¼‚æ­¥è¯»å–å­˜å‚¨åœ¨ç”¨æˆ·è®¡ç®—æœºä¸Šçš„æ–‡ä»¶ï¼ˆæˆ–åŸå§‹æ•°æ®ç¼“å†²åŒºï¼‰çš„å†…å®¹ï¼Œä½¿ç”¨ File æˆ– Blob å¯¹è±¡æŒ‡å®šè¦è¯»å–çš„æ–‡ä»¶æˆ–æ•°æ®ã€‚</p></blockquote><blockquote><p>File å¯¹è±¡æ˜¯æ¥è‡ªç”¨æˆ·åœ¨ä¸€ä¸ª input å…ƒç´ ä¸Šé€‰æ‹©æ–‡ä»¶åè¿”å›çš„ FileList å¯¹è±¡,ä¹Ÿå¯ä»¥æ˜¯æ¥è‡ªç”±æ‹–æ”¾æ“ä½œç”Ÿæˆçš„ DataTransfer å¯¹è±¡ï¼Œæˆ–è€…æ¥è‡ª HTMLCanvasElement ä¸Šçš„ mozGetAsFile() APIã€‚</p></blockquote><blockquote><p>Blob å¯¹è±¡è¡¨ç¤ºä¸€ä¸ªä¸å¯å˜ã€åŸå§‹æ•°æ®çš„ç±»æ–‡ä»¶å¯¹è±¡ã€‚Blob è¡¨ç¤ºçš„ä¸ä¸€å®šæ˜¯JavaScriptåŸç”Ÿæ ¼å¼çš„æ•°æ®ã€‚File æ¥å£åŸºäºBlobï¼Œç»§æ‰¿äº† blob çš„åŠŸèƒ½å¹¶å°†å…¶æ‰©å±•ä½¿å…¶æ”¯æŒç”¨æˆ·ç³»ç»Ÿä¸Šçš„æ–‡ä»¶</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> woffUrl = chrome.extension.getURL(<span class="string">'/libs/fonts/element-icons.woff'</span>);</span><br><span class="line"></span><br><span class="line">axios.get(woffUrl, &#123;</span><br><span class="line">  responseType: <span class="string">'blob'</span>,</span><br><span class="line">&#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line">  reader.readAsDataURL(data.data);</span><br><span class="line">  reader.onloadend = <span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> woffData = reader.result;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> newStyle = <span class="built_in">document</span>.createElement(<span class="string">'style'</span>);</span><br><span class="line">    newStyle.appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">`</span></span><br><span class="line"><span class="string">      @font-face &#123;</span></span><br><span class="line"><span class="string">          font-family: element-icons;</span></span><br><span class="line"><span class="string">          src: url(<span class="subst">$&#123;woffData&#125;</span>) format("woff");</span></span><br><span class="line"><span class="string">      &#125;\</span></span><br><span class="line"><span class="string">    `</span>));</span><br><span class="line">    <span class="built_in">document</span>.head.appendChild(newStyle);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Axios-FileReader&quot;&gt;&lt;a href=&quot;#Axios-FileReader&quot; class=&quot;headerlink&quot; title=&quot;Axios + FileReader&quot;&gt;&lt;/a&gt;Axios + FileReader&lt;/h1&gt;&lt;blockquote&gt;

      
    
    </summary>
    
    
    
      <category term="js" scheme="blog.lovesora.pro/tags/js/"/>
    
      <category term="font" scheme="blog.lovesora.pro/tags/font/"/>
    
  </entry>
  
  <entry>
    <title>è®°ä¸€æ¬¡æ•°ç»„èµ‹å€¼å¯¼è‡´çš„é¡µé¢å¡æ­»</title>
    <link href="blog.lovesora.pro/2019/04/29/fe/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/array/"/>
    <id>blog.lovesora.pro/2019/04/29/fe/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/array/</id>
    <published>2019-04-29T16:58:03.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸€ä¸ªå¾ˆç®€å•çš„åŠŸèƒ½ç›´æ¥å¯¼è‡´é¡µé¢å¡æ­»</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [];</span><br><span class="line">arr[<span class="number">4294967294</span>] = <span class="string">'arr'</span>;</span><br><span class="line">arr.map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">console</span>.log(item));</span><br></pre></td></tr></table></figure><p>å°è¯•åœ¨æ§åˆ¶å°è¿è¡Œä»¥ä¸Šä»£ç â€¦</p><h2 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h2><blockquote><p>JavaScript ä½¿ç”¨ä¸€ä¸ª32ä½æ•´æ•°ï¼Œä¿å­˜æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ã€‚è¿™æ„å‘³ç€ï¼Œæ•°ç»„æˆå‘˜æœ€å¤šåªæœ‰ 4294967295 ä¸ªï¼ˆ232 - 1ï¼‰ä¸ªï¼Œä¹Ÿå°±æ˜¯è¯´lengthå±æ€§çš„æœ€å¤§å€¼å°±æ˜¯ 4294967295ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>];</span><br><span class="line">arr.length <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">arr[<span class="number">2</span>] = <span class="string">'c'</span>;</span><br><span class="line">arr.length <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line">arr[<span class="number">9</span>] = <span class="string">'d'</span>;</span><br><span class="line">arr.length <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line">arr[<span class="number">1000</span>] = <span class="string">'e'</span>;</span><br><span class="line">arr.length <span class="comment">// 1001</span></span><br></pre></td></tr></table></figure><p>æ•°ç»„çš„éå†ä¼šä»ç´¢å¼• <code>0</code> å¼€å§‹ä¸€ç›´åˆ° <code>length-1</code></p><p>æ‰€ä»¥ï¼Œä»¥ä¸‹ä»£ç å¾€å¾€ä¸å¯æ§</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> key: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [];</span><br><span class="line">arr[key] = ...</span><br><span class="line">arr.map(<span class="function"><span class="params">item</span> =&gt;</span> ...);</span><br></pre></td></tr></table></figure><p>å¯¹æ•°ç»„ä»¥ä¸€ä¸ª <code>number</code> ç±»å‹çš„å˜é‡ä½œä¸º <code>key</code> èµ‹å€¼åï¼Œå†ä½¿ç”¨ <code>map, forEach, for...</code> ç­‰æ¥éå†æ•°ç»„æ—¶ï¼Œç”±äº <code>key</code> çš„å€¼ä¸å¯æ§ï¼Œå¦‚æœæ˜¯æ•°æ®åº“ä¸­çš„ <code>ä¸»é”®id</code>ï¼Œé‚£ä¹ˆåœ¨æ•°æ®é‡å°çš„æ—¶å€™å‘ç°ä¸äº†ä»€ä¹ˆå¼‚å¸¸ï¼Œä¸€æ—¦æ•°æ®é‡è¿‡å¤§ï¼Œæµè§ˆå™¨ç›´æ¥å°±ä¼šå¡æ­»!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;ä¸€ä¸ªå¾ˆç®€å•çš„åŠŸèƒ½ç›´æ¥å¯¼è‡´é¡µé¢å¡æ­»&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class
      
    
    </summary>
    
    
    
      <category term="æ€§èƒ½ä¼˜åŒ–" scheme="blog.lovesora.pro/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
      <category term="array" scheme="blog.lovesora.pro/tags/array/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu å†…æ ¸å‡çº§</title>
    <link href="blog.lovesora.pro/2019/04/18/linux/ubuntu/upgrade-core/"/>
    <id>blog.lovesora.pro/2019/04/18/linux/ubuntu/upgrade-core/</id>
    <published>2019-04-18T20:31:59.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æŸ¥çœ‹å‘å¸ƒç‰ˆæœ¬å·"><a href="#æŸ¥çœ‹å‘å¸ƒç‰ˆæœ¬å·" class="headerlink" title="æŸ¥çœ‹å‘å¸ƒç‰ˆæœ¬å·"></a>æŸ¥çœ‹å‘å¸ƒç‰ˆæœ¬å·</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/issue</span><br><span class="line"></span><br><span class="line">lsb_release -a</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬å·"><a href="#æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬å·" class="headerlink" title="æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬å·"></a>æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬å·</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†…æ ¸ä¿¡æ¯</span></span><br><span class="line">uname -sr</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰€æœ‰ä¿¡æ¯</span></span><br><span class="line">uname -a</span><br></pre></td></tr></table></figure><h2 id="å‡çº§æ–¹å¼ä¸€"><a href="#å‡çº§æ–¹å¼ä¸€" class="headerlink" title="å‡çº§æ–¹å¼ä¸€"></a>å‡çº§æ–¹å¼ä¸€</h2><blockquote><p>åˆ°å®˜ç½‘<a href="https://kernel.ubuntu.com/~kernel-ppa/mainline/" target="_blank" rel="noopener">kernel.ubuntu.com</a>ä¸‹è½½å¯¹åº”debæ–‡ä»¶</p></blockquote><p><img src="/assets/images/linux/ubuntu-kernel.png" alt="åˆ—è¡¨"></p><p><img src="/assets/images/linux/ubuntu-kernel-download.png" alt="æ–‡ä»¶"></p><p>ä¸‹è½½ <code>*all.deb</code> å’Œæ‰€æœ‰ <code>*generic*.deb</code> æ–‡ä»¶åï¼Œåˆ°å¯¹åº”æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i *.deb</span><br></pre></td></tr></table></figure><blockquote><p>æˆ‘æ˜¯64ä½æ“ä½œç³»ç»Ÿæ‰€ä»¥é€‰æ‹©çš„ <code>amd64</code>ï¼Œ32ä½çš„å°ä¼™ä¼´é€‰ <code>i386</code>å³å¯</p></blockquote><h2 id="å‡çº§æ–¹å¼äºŒï¼ˆæ¨èï¼‰"><a href="#å‡çº§æ–¹å¼äºŒï¼ˆæ¨èï¼‰" class="headerlink" title="å‡çº§æ–¹å¼äºŒï¼ˆæ¨èï¼‰"></a>å‡çº§æ–¹å¼äºŒï¼ˆæ¨èï¼‰</h2><h3 id="æŸ¥çœ‹éœ€è¦æ›´æ–°çš„å†…æ ¸å‘½ä»¤"><a href="#æŸ¥çœ‹éœ€è¦æ›´æ–°çš„å†…æ ¸å‘½ä»¤" class="headerlink" title="æŸ¥çœ‹éœ€è¦æ›´æ–°çš„å†…æ ¸å‘½ä»¤"></a>æŸ¥çœ‹éœ€è¦æ›´æ–°çš„å†…æ ¸å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache search linux</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…å¯¹åº”ç‰ˆæœ¬å†…æ ¸"><a href="#å®‰è£…å¯¹åº”ç‰ˆæœ¬å†…æ ¸" class="headerlink" title="å®‰è£…å¯¹åº”ç‰ˆæœ¬å†…æ ¸"></a>å®‰è£…å¯¹åº”ç‰ˆæœ¬å†…æ ¸</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install linux-headers-5.0.8-050008-generic</span><br></pre></td></tr></table></figure><p><img src="/assets/images/linux/ubuntu-kernel-install.png" alt="install"></p><blockquote><p>å®‰è£…å®Œæˆåé»˜è®¤å¯åŠ¨æœ€æ–°å†…æ ¸</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å†…æ ¸å¯åŠ¨é¡ºåº</span></span><br><span class="line">grep menuentry /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure><h2 id="å¸è½½å¤šä½™å†…æ ¸"><a href="#å¸è½½å¤šä½™å†…æ ¸" class="headerlink" title="å¸è½½å¤šä½™å†…æ ¸"></a>å¸è½½å¤šä½™å†…æ ¸</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoremove</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æŸ¥çœ‹å‘å¸ƒç‰ˆæœ¬å·&quot;&gt;&lt;a href=&quot;#æŸ¥çœ‹å‘å¸ƒç‰ˆæœ¬å·&quot; class=&quot;headerlink&quot; title=&quot;æŸ¥çœ‹å‘å¸ƒç‰ˆæœ¬å·&quot;&gt;&lt;/a&gt;æŸ¥çœ‹å‘å¸ƒç‰ˆæœ¬å·&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;
      
    
    </summary>
    
    
    
      <category term="ubuntu" scheme="blog.lovesora.pro/tags/ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>Angular Router Reuse</title>
    <link href="blog.lovesora.pro/2019/04/11/fe/angular/router/reuse/"/>
    <id>blog.lovesora.pro/2019/04/11/fe/angular/router/reuse/</id>
    <published>2019-04-11T22:56:52.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åºè¨€"><a href="#åºè¨€" class="headerlink" title="åºè¨€"></a>åºè¨€</h2><p>è·¯ç”±åœ¨åˆ‡æ¢æ—¶éœ€è¦é”€æ¯å½“å‰ç»„ä»¶ï¼Œè¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯ç¬¦åˆé¢„æœŸçš„ã€‚ä½†æ˜¯æœ‰äº›æ—¶å€™åœ¨ä¸€äº›åˆ—è¡¨ + è¯¦æƒ…çš„ç»“æ„ä¸‹ï¼Œè¿›å…¥è¯¦æƒ…åå†è¿”å›åˆ—è¡¨éœ€è¦ä¿ç•™ä¹‹å‰çš„åˆ—è¡¨çŠ¶æ€ï¼Œæ­¤æ—¶å°±éœ€è¦ç¼“å­˜åˆ—è¡¨è·¯ç”±ã€‚</p><h3 id="ç°æœ‰æ–¹æ¡ˆ"><a href="#ç°æœ‰æ–¹æ¡ˆ" class="headerlink" title="ç°æœ‰æ–¹æ¡ˆ"></a>ç°æœ‰æ–¹æ¡ˆ</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// route-reuse.strategy.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  RouteReuseStrategy,</span><br><span class="line">  DefaultUrlSerializer,</span><br><span class="line">  ActivatedRouteSnapshot,</span><br><span class="line">  DetachedRouteHandle</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'@angular/router'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> SimpleReuseStrategy <span class="keyword">implements</span> RouteReuseStrategy &#123;</span><br><span class="line"></span><br><span class="line">  _cacheRouters: &#123; [key: <span class="built_in">string</span>]: <span class="built_in">any</span> &#125; = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  shouldDetach(route: ActivatedRouteSnapshot): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> !!route.data.keep;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  store(route: ActivatedRouteSnapshot, handle: DetachedRouteHandle): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>._cacheRouters[<span class="keyword">this</span>._getCacheKey(route)] = &#123;</span><br><span class="line">      snapshot: route,</span><br><span class="line">      handle: handle</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  shouldAttach(route: ActivatedRouteSnapshot): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> route.data.keep &amp;&amp; !!<span class="keyword">this</span>._cacheRouters[<span class="keyword">this</span>._getCacheKey(route)];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle &#123;</span><br><span class="line">    <span class="keyword">if</span> (!route.data.keep || !<span class="keyword">this</span>._cacheRouters[<span class="keyword">this</span>._getCacheKey(route)]) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._cacheRouters[<span class="keyword">this</span>._getCacheKey(route)].handle;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._getCacheKey(future) === <span class="keyword">this</span>._getCacheKey(curr);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _getCacheKey(route: ActivatedRouteSnapshot): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> route[<span class="string">'_routerState'</span>].url;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app-routing.module.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  RouteReuseStrategy,</span><br><span class="line">  RouterModule,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'@angular/router'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">  imports: [</span><br><span class="line">    RouterModule.forRoot(routes),</span><br><span class="line">  ],</span><br><span class="line">  providers: [&#123;</span><br><span class="line">    provide: RouteReuseStrategy,</span><br><span class="line">    useClass: SimpleReuseStrategy,</span><br><span class="line">  &#125;],</span><br><span class="line">  exports: [RouterModule]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AppRoutingModule &#123; &#125;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»»æ„ä¸€ä¸ªé¡µé¢ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  NavigationEnd,</span><br><span class="line">  Router,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'@angular/router'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">  <span class="keyword">private</span> router: Router</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">this</span>.router.events</span><br><span class="line">    .filter(<span class="function">(<span class="params">event</span>) =&gt;</span> event <span class="keyword">instanceof</span> NavigationEnd)</span><br><span class="line">    .subscribe(<span class="function">(<span class="params">event: NavigationEnd</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// è¿™é‡Œéœ€è¦åˆ¤æ–­ä¸€ä¸‹å½“å‰è·¯ç”±ï¼Œå¦‚æœä¸åŠ çš„è¯ï¼Œæ¯æ¬¡è·¯ç”±ç»“æŸçš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œè¿™é‡Œçš„æ–¹æ³•</span></span><br><span class="line">      <span class="keyword">if</span> (event.url.indexOf(<span class="string">'currentRoute'</span>) &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="comment">// è¿›å…¥å½“å‰è·¯ç”±éœ€è¦é‡æ–°æ‰§è¡Œçš„æ“ä½œ</span></span><br><span class="line">        ...</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p><strong>åŒä¸€çˆ¶è·¯ç”±</strong> ä¸‹çš„å­è·¯ç”±ä¹‹é—´çš„è·³è½¬ä¼šé‡æ–°åˆå§‹åŒ– parent componentã€‚ç¿»äº†ç¿»æºä»£ç è¿™æ‰æ‰¾åˆ°äº†ç­”æ¡ˆã€‚</p><h2 id="RouteReuseStrategy-æŠ½è±¡ç±»"><a href="#RouteReuseStrategy-æŠ½è±¡ç±»" class="headerlink" title="RouteReuseStrategy æŠ½è±¡ç±»"></a>RouteReuseStrategy æŠ½è±¡ç±»</h2><blockquote><p>Provides a way to customize when activated routes get reused. <a href="https://github.com/angular/angular/blob/master/packages/router/src/route_reuse_strategy.ts" target="_blank" rel="noopener">code</a></p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">abstract</span> <span class="keyword">class</span> RouteReuseStrategy &#123;</span><br><span class="line">  <span class="comment">/** Determines if this route (and its subtree) should be detached to be reused later */</span></span><br><span class="line">  <span class="keyword">abstract</span> shouldDetach(route: ActivatedRouteSnapshot): <span class="built_in">boolean</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Stores the detached route.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * Storing a `null` value should erase the previously stored value.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">abstract</span> store(route: ActivatedRouteSnapshot, handle: DetachedRouteHandle|<span class="literal">null</span>): <span class="built_in">void</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Determines if this route (and its subtree) should be reattached */</span></span><br><span class="line">  <span class="keyword">abstract</span> shouldAttach(route: ActivatedRouteSnapshot): <span class="built_in">boolean</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Retrieves the previously stored route */</span></span><br><span class="line">  <span class="keyword">abstract</span> retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle|<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Determines if a route should be reused */</span></span><br><span class="line">  <span class="keyword">abstract</span> shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®˜æ–¹é»˜è®¤çš„ <code>ReuseStrategy</code> å¦‚ä¸‹</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Does not detach any subtrees. Reuses routes as long as their route config is the same.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> DefaultRouteReuseStrategy <span class="keyword">implements</span> RouteReuseStrategy &#123;</span><br><span class="line">  shouldDetach(route: ActivatedRouteSnapshot): <span class="built_in">boolean</span> &#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</span><br><span class="line">  store(route: ActivatedRouteSnapshot, detachedTree: DetachedRouteHandle): <span class="built_in">void</span> &#123;&#125;</span><br><span class="line">  shouldAttach(route: ActivatedRouteSnapshot): <span class="built_in">boolean</span> &#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</span><br><span class="line">  retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle|<span class="literal">null</span> &#123; <span class="keyword">return</span> <span class="literal">null</span>; &#125;</span><br><span class="line">  shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> future.routeConfig === curr.routeConfig;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹æ¯”å‘ç° <code>shouldReuseRoute</code> ä¸­çš„åˆ¤æ–­æ¡ä»¶ä¸ä¸€æ ·ã€‚äºæ˜¯å°†åŸæœ‰ä»£ç åšäº†ä¸€äº›è°ƒæ•´</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): <span class="built_in">boolean</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> future.routeConfig === curr.routeConfig || <span class="keyword">this</span>._getCacheKey(future) === <span class="keyword">this</span>._getCacheKey(curr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶åŒä¸€çˆ¶è·¯ç”±ä¸‹çš„å­è·¯ç”±ä¹‹é—´çš„è·³è½¬ä¸ä¼šå†åˆå§‹åŒ–çˆ¶ç»„ä»¶äº†ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;åºè¨€&quot;&gt;&lt;a href=&quot;#åºè¨€&quot; class=&quot;headerlink&quot; title=&quot;åºè¨€&quot;&gt;&lt;/a&gt;åºè¨€&lt;/h2&gt;&lt;p&gt;è·¯ç”±åœ¨åˆ‡æ¢æ—¶éœ€è¦é”€æ¯å½“å‰ç»„ä»¶ï¼Œè¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯ç¬¦åˆé¢„æœŸçš„ã€‚ä½†æ˜¯æœ‰äº›æ—¶å€™åœ¨ä¸€äº›åˆ—è¡¨ + è¯¦æƒ…çš„ç»“æ„ä¸‹ï¼Œè¿›å…¥è¯¦æƒ…åå†è¿”å›åˆ—è¡¨éœ€è¦ä¿ç•™ä¹‹å‰çš„åˆ—è¡¨
      
    
    </summary>
    
    
    
      <category term="angular" scheme="blog.lovesora.pro/tags/angular/"/>
    
      <category term="router" scheme="blog.lovesora.pro/tags/router/"/>
    
  </entry>
  
  <entry>
    <title>Hexo æ’ä»¶ Gitmentå®‰è£…</title>
    <link href="blog.lovesora.pro/2019/04/10/blog/hexo/hexo-gitment/"/>
    <id>blog.lovesora.pro/2019/04/10/blog/hexo/hexo-gitment/</id>
    <published>2019-04-10T22:37:12.000Z</published>
    <updated>2020-03-23T23:07:27.939Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Get-Started"><a href="#Get-Started" class="headerlink" title="Get Started"></a>Get Started</h2><h3 id="1-Install"><a href="#1-Install" class="headerlink" title="1. Install"></a>1. Install</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://imsun.github.io/gitment/style/default.css"</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://imsun.github.io/gitment/dist/gitment.browser.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>or via npm:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i --save gitment</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'gitment/style/default.css'</span></span><br><span class="line"><span class="keyword">import</span> Gitment <span class="keyword">from</span> <span class="string">'gitment'</span></span><br></pre></td></tr></table></figure><h3 id="2-Register-An-OAuth-Application"><a href="#2-Register-An-OAuth-Application" class="headerlink" title="2. Register An OAuth Application"></a>2. Register An OAuth Application</h3><blockquote><p><a href="https://github.com/settings/applications/new" target="_blank" rel="noopener">Click here</a></p></blockquote><p>æ³¨æ„ http å’Œ https</p><p><img src="/assets/images/blog/hexo/OAuth.png" alt="oauth"></p><h3 id="3-Render-Gitment"><a href="#3-Render-Gitment" class="headerlink" title="3. Render Gitment"></a>3. Render Gitment</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> gitment = <span class="keyword">new</span> Gitment(&#123;</span><br><span class="line">  id: <span class="string">'Your page ID'</span>, <span class="comment">// optional</span></span><br><span class="line">  owner: <span class="string">'Your GitHub ID'</span>,</span><br><span class="line">  repo: <span class="string">'The repo to store comments'</span>,</span><br><span class="line">  oauth: &#123;</span><br><span class="line">    client_id: <span class="string">'Your client ID'</span>,</span><br><span class="line">    client_secret: <span class="string">'Your client secret'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="comment">// For more available options, check out the documentation below</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">gitment.render(<span class="string">'comments'</span>)</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="comment">// gitment.render(document.getElementById('comments'))</span></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="comment">// document.body.appendChild(gitment.render())</span></span><br></pre></td></tr></table></figure><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><h3 id="Error-Comments-Not-Initialized"><a href="#Error-Comments-Not-Initialized" class="headerlink" title="Error: Comments Not Initialized"></a>Error: Comments Not Initialized</h3><p>å‡ºç°è¿™ä¸ªé”™è¯¯ä¸€èˆ¬æœ‰ä¸¤ä¸ªåŸå› </p><ol><li>æ²¡æœ‰ç™»å½•</li><li>OAuthé…ç½®æœ‰é—®é¢˜ï¼Œæ£€æŸ¥ä¸€ä¸‹å›è°ƒæ˜¯å¦æ­£ç¡®</li></ol><h3 id="ç™»å½•æ—¶æµè§ˆå™¨å¼¹å‡º-Object-ProgressEvent"><a href="#ç™»å½•æ—¶æµè§ˆå™¨å¼¹å‡º-Object-ProgressEvent" class="headerlink" title="ç™»å½•æ—¶æµè§ˆå™¨å¼¹å‡º[Object ProgressEvent]"></a>ç™»å½•æ—¶æµè§ˆå™¨å¼¹å‡º[Object ProgressEvent]</h3><p>è¿™ä¸ªé—®é¢˜ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œç®€å•ä¸€ç‚¹çš„æ–¹æ¡ˆæ˜¯ç›´æ¥æ›¿æ¢ <code>gitment.browser.js</code>çš„è·¯å¾„</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"//lovesora.github.io/gitment/style/default.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//lovesora.github.io/gitment/dist/gitment.browser.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦è‡ªå·±æŠ˜è…¾çš„è¯ç•¥å¾®æœ‰äº›éº»çƒ¦ï¼Œå¤§è‡´æ­¥éª¤å¦‚ä¸‹</p><h4 id="1-clone-server"><a href="#1-clone-server" class="headerlink" title="1. clone server"></a>1. clone server</h4><p>åœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šclone <a href="https://github.com/imsun/gh-oauth-server" target="_blank" rel="noopener">gh-oauth-server</a>, æ‰§è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ç«¯å£å·é»˜è®¤æ˜¯3000</span></span><br><span class="line">npm start</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ <code>gitment server</code></p><h4 id="2-clone-gitment"><a href="#2-clone-gitment" class="headerlink" title="2. clone gitment"></a>2. clone gitment</h4><p><code>fork</code> <a href="https://github.com/imsun/gitment" target="_blank" rel="noopener">gitment</a>, <code>clone</code> forkçš„ä»£ç åˆ°æœ¬åœ°ï¼Œåˆ‡åˆ° <code>gh-pages</code> åˆ†æ”¯</p><h4 id="3-ä¿®æ”¹url"><a href="#3-ä¿®æ”¹url" class="headerlink" title="3. ä¿®æ”¹url"></a>3. ä¿®æ”¹url</h4><p>å°† <code>https://gh-oauth.imsun.net</code> æ”¹ä¸ºè‡ªå·±æœåŠ¡å™¨çš„ <code>http(s)</code> + <code>domain or ip</code> + <code>port</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">_utils.http.post(<span class="string">'https://gh-oauth.imsun.net'</span>, &#123;</span><br><span class="line">  code: code,</span><br><span class="line">  client_id: client_id,</span><br><span class="line">  client_secret: client_secret</span><br><span class="line">&#125;, <span class="string">''</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  _this.accessToken = data.access_token;</span><br><span class="line">  _this.update();</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  _this.state.user.isLoggingIn = <span class="literal">false</span>;</span><br><span class="line">  alert(e);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">_utils.http.post(<span class="string">'https://gitment.lovesora.pro'</span>, &#123;</span><br><span class="line">  code: code,</span><br><span class="line">  client_id: client_id,</span><br><span class="line">  client_secret: client_secret</span><br><span class="line">&#125;, <span class="string">''</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  _this.accessToken = data.access_token;</span><br><span class="line">  _this.update();</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  _this.state.user.isLoggingIn = <span class="literal">false</span>;</span><br><span class="line">  alert(e);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="4-pushä»£ç -amp-ä¿®æ”¹æ–‡ä»¶è·¯å¾„"><a href="#4-pushä»£ç -amp-ä¿®æ”¹æ–‡ä»¶è·¯å¾„" class="headerlink" title="4. pushä»£ç  &amp; ä¿®æ”¹æ–‡ä»¶è·¯å¾„"></a>4. pushä»£ç  &amp; ä¿®æ”¹æ–‡ä»¶è·¯å¾„</h4><p>å°†åˆšæ‰çš„æ”¹åŠ¨ <code>push</code> è‡³ <code>github</code>ï¼Œå†ä¿®æ”¹ <code>gitment.browser.js</code> çš„url å³å¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"//[username].github.io/gitment/style/default.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//[username].github.io/gitment/dist/gitment.browser.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Get-Started&quot;&gt;&lt;a href=&quot;#Get-Started&quot; class=&quot;headerlink&quot; title=&quot;Get Started&quot;&gt;&lt;/a&gt;Get Started&lt;/h2&gt;&lt;h3 id=&quot;1-Install&quot;&gt;&lt;a href=&quot;#1-Instal
      
    
    </summary>
    
    
    
      <category term="hexo" scheme="blog.lovesora.pro/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hexo Plugin åˆé›†</title>
    <link href="blog.lovesora.pro/2019/04/09/blog/hexo/plugin/"/>
    <id>blog.lovesora.pro/2019/04/09/blog/hexo/plugin/</id>
    <published>2019-04-09T22:44:42.000Z</published>
    <updated>2020-03-23T23:07:27.939Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Hexo-Mermaid-æ’ä»¶"><a href="#Hexo-Mermaid-æ’ä»¶" class="headerlink" title="Hexo Mermaid æ’ä»¶"></a>Hexo Mermaid æ’ä»¶</h2><blockquote><p><a href="https://www.npmjs.com/package/hexo-filter-mermaid-diagrams" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p></blockquote><h3 id="Step1-Install-Package"><a href="#Step1-Install-Package" class="headerlink" title="Step1 Install Package"></a>Step1 Install Package</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add hexo-filter-mermaid-diagrams</span><br></pre></td></tr></table></figure><blockquote><p>In your blog floder, not hexo floder</p></blockquote><h3 id="Step2-Edit-Config"><a href="#Step2-Edit-Config" class="headerlink" title="Step2 Edit Config"></a>Step2 Edit Config</h3><p>After installed, you should edit hexo config file: <code>_config.yml</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mermaid chart</span></span><br><span class="line"><span class="attr">mermaid:</span> <span class="comment">## mermaid url https://github.com/knsv/mermaid</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>  <span class="comment"># default true</span></span><br><span class="line">  <span class="attr">version:</span> <span class="string">"7.1.2"</span> <span class="comment"># default v7.1.2</span></span><br><span class="line">  <span class="attr">options:</span>  <span class="comment"># find more api options from https://github.com/knsv/mermaid/blob/master/src/mermaidAPI.js</span></span><br><span class="line">    <span class="comment">#startOnload: true  // default true</span></span><br></pre></td></tr></table></figure><blockquote><p>â—ï¸â—ï¸â—ï¸Notice: if you want to use â€˜Class diagramâ€™, please edit your â€˜_config.ymlâ€™ file, set <code>external_link: false</code>. - hexo bug.</p></blockquote><h3 id="Step3-include-mermaid-js-in-pug-or-ejs"><a href="#Step3-include-mermaid-js-in-pug-or-ejs" class="headerlink" title="Step3 include mermaid.js in pug or ejs"></a>Step3 include mermaid.js in pug or ejs</h3><p>After edited <code>_config.yml</code>, you shou edit your blog page component like <code>after_footer.pug</code> , <code>after-footer.ejs</code> or <code>swig</code>.</p><p>Where is it?</p><p>Open your theme folder, you can see the <code>layout</code> folder, open it and then you could see it.</p><p>Okey! if your blog is used pug, you can copy the below codes in <code>after_footer.pug</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if theme.mermaid.enable &#x3D;&#x3D; true</span><br><span class="line">  script(type&#x3D;&#39;text&#x2F;javascript&#39;, id&#x3D;&#39;maid-script&#39; mermaidoptioins&#x3D;theme.mermaid.options src&#x3D;&#39;https:&#x2F;&#x2F;unpkg.com&#x2F;mermaid@&#39;+ theme.mermaid.version + &#39;&#x2F;dist&#x2F;mermaid.min.js&#39; + &#39;?v&#x3D;&#39; + theme.version)</span><br><span class="line">  script.</span><br><span class="line">    if (window.mermaid) &#123;</span><br><span class="line">      var options &#x3D; JSON.parse(document.getElementById(&#39;maid-script&#39;).getAttribute(&#39;mermaidoptioins&#39;));</span><br><span class="line">      mermaid.initialize(options);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><code>after-footer.ejs</code> should copy below codes:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (theme.mermaid.enable) &#123; %&gt;</span><br><span class="line">  &lt;script src&#x3D;&#39;https:&#x2F;&#x2F;unpkg.com&#x2F;mermaid@&lt;%&#x3D; theme.mermaid.version %&gt;&#x2F;dist&#x2F;mermaid.min.js&#39;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    if (window.mermaid) &#123;</span><br><span class="line">      mermaid.initialize(&#123;theme: &#39;forest&#39;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;&#x2F;script&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>swig template engine:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.mermaid.enable %&#125;</span><br><span class="line">  &lt;script src&#x3D;&#39;https:&#x2F;&#x2F;unpkg.com&#x2F;mermaid@&#123;&#123; theme.mermaid.version &#125;&#125;&#x2F;dist&#x2F;mermaid.min.js&#39;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    if (window.mermaid) &#123;</span><br><span class="line">      mermaid.initialize(&#123;&#123; JSON.stringify(theme.mermaid.options) &#125;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;&#x2F;script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Hexo-Mermaid-æ’ä»¶&quot;&gt;&lt;a href=&quot;#Hexo-Mermaid-æ’ä»¶&quot; class=&quot;headerlink&quot; title=&quot;Hexo Mermaid æ’ä»¶&quot;&gt;&lt;/a&gt;Hexo Mermaid æ’ä»¶&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;a hr
      
    
    </summary>
    
    
    
      <category term="hexo" scheme="blog.lovesora.pro/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>ç»„ä»¶&amp;åº“ æ¶æ„æ–¹æ¡ˆ</title>
    <link href="blog.lovesora.pro/2018/12/28/fe/%E6%9E%B6%E6%9E%84/angular%20%E6%9E%B6%E6%9E%84%E6%BC%94%E8%BF%9B/"/>
    <id>blog.lovesora.pro/2018/12/28/fe/%E6%9E%B6%E6%9E%84/angular%20%E6%9E%B6%E6%9E%84%E6%BC%94%E8%BF%9B/</id>
    <published>2018-12-28T16:22:22.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æœ€åŸå§‹æ–¹æ¡ˆ"><a href="#æœ€åŸå§‹æ–¹æ¡ˆ" class="headerlink" title="æœ€åŸå§‹æ–¹æ¡ˆ"></a>æœ€åŸå§‹æ–¹æ¡ˆ</h2><p>æ‰€æœ‰ç»„ä»¶åº“å„è‡ªç‹¬ç«‹ç»´æŠ¤ï¼Œç‹¬ç«‹æ¼”è¿›ã€‚<br>æ­å»ºç§æœ‰<code>npm</code>ï¼Œä¸šåŠ¡é¡¹ç›®ç‹¬ç«‹å¼•ç”¨ç»„ä»¶åº“å¯¹åº”ç‰ˆæœ¬ã€‚</p><ul><li>ä¼˜åŠ¿</li></ul><p>ç»„ä»¶ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå„è‡ªäº’è¡¥ç›¸å¹²ã€‚</p><ul><li>åŠ£åŠ¿</li></ul><p>ç»„ä»¶åº“çš„ç ”å‘æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦å†™ç‹¬ç«‹demoã€‚<br>å¦‚æœåœ¨ä¸šåŠ¡é¡¹ç›®ä¸­å‘ç°ç»„ä»¶åº“å‡ºç°é—®é¢˜ï¼Œè°ƒè¯•æå…¶éº»çƒ¦ã€‚</p><ul><li><p>é€‚ç”¨<br>å¤§å‹å›¢é˜Ÿï¼Œç»„ä»¶ä¸ä¸šåŠ¡å½»åº•åˆ†ç¦»ï¼Œå„è‡ªç‹¬ç«‹æ¼”è¿›ã€‚</p></li><li><p>ä¸é€‚ç”¨<br>å°å‹å›¢é˜Ÿä½¿ç”¨æˆæœ¬æå¤§ï¼Œä¸šåŠ¡äº§å‡ºä½ã€‚</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æœ€åŸå§‹æ–¹æ¡ˆ&quot;&gt;&lt;a href=&quot;#æœ€åŸå§‹æ–¹æ¡ˆ&quot; class=&quot;headerlink&quot; title=&quot;æœ€åŸå§‹æ–¹æ¡ˆ&quot;&gt;&lt;/a&gt;æœ€åŸå§‹æ–¹æ¡ˆ&lt;/h2&gt;&lt;p&gt;æ‰€æœ‰ç»„ä»¶åº“å„è‡ªç‹¬ç«‹ç»´æŠ¤ï¼Œç‹¬ç«‹æ¼”è¿›ã€‚&lt;br&gt;æ­å»ºç§æœ‰&lt;code&gt;npm&lt;/code&gt;ï¼Œä¸šåŠ¡é¡¹ç›®ç‹¬ç«‹å¼•ç”¨ç»„ä»¶åº“å¯¹åº”ç‰ˆæœ¬ã€‚
      
    
    </summary>
    
    
    
      <category term="æ¶æ„" scheme="blog.lovesora.pro/tags/%E6%9E%B6%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>è®° `*ngIf` ç”Ÿå‘½å‘¨æœŸå¯¼è‡´çš„ä¸€ä¸ªå‘</title>
    <link href="blog.lovesora.pro/2018/09/19/fe/angular/%E6%9D%82%E6%96%87/lifecycle-ngif/"/>
    <id>blog.lovesora.pro/2018/09/19/fe/angular/%E6%9D%82%E6%96%87/lifecycle-ngif/</id>
    <published>2018-09-19T16:07:03.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æƒ…æ™¯"><a href="#æƒ…æ™¯" class="headerlink" title="æƒ…æ™¯"></a>æƒ…æ™¯</h2><p><code>*ngIf</code> ä¸­çš„ <code>ViewChild</code> è¦åœ¨ <code>ngAfterViewInit</code> ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­æ‰èƒ½æ‹¿åˆ°ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  condition = <span class="literal">true</span>;</span><br><span class="line">  <span class="meta">@ViewChild</span>(<span class="string">'div'</span>) div: ElementRef;</span><br><span class="line"></span><br><span class="line">  ngOnInit() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.div); <span class="comment">// undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ngAfterContentInit() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.div); <span class="comment">// undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ngAfterViewInit() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.div); <span class="comment">// ElementRef</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ng-container</span> *<span class="attr">ngIf</span>=<span class="string">"condition"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> #<span class="attr">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ng-container</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æƒ…æ™¯&quot;&gt;&lt;a href=&quot;#æƒ…æ™¯&quot; class=&quot;headerlink&quot; title=&quot;æƒ…æ™¯&quot;&gt;&lt;/a&gt;æƒ…æ™¯&lt;/h2&gt;&lt;p&gt;&lt;code&gt;*ngIf&lt;/code&gt; ä¸­çš„ &lt;code&gt;ViewChild&lt;/code&gt; è¦åœ¨ &lt;code&gt;ngAfterViewInit&lt;
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Angualr å¼€æºç»„ä»¶è®¾è®¡</title>
    <link href="blog.lovesora.pro/2018/09/10/fe/angular/%E7%BB%84%E4%BB%B6/ngx-os%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/"/>
    <id>blog.lovesora.pro/2018/09/10/fe/angular/%E7%BB%84%E4%BB%B6/ngx-os%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/</id>
    <published>2018-09-10T18:06:25.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åº"><a href="#åº" class="headerlink" title="åº"></a>åº</h2><p>å…¬å¸çš„æŠ€æœ¯å±•é€‰æ‹©çš„æ˜¯ <code>Angular</code> ï¼Œè®¾è®¡é£æ ¼ä¹Ÿæ˜¯Googleçš„ <code>Mateiral Design</code>ã€‚Goolgeå®˜æ–¹å›¢é˜Ÿæœ‰æä¾›ä¸€å¥—Material Angularç‰ˆæœ¬çš„ç»„ä»¶åº“ <a href="https://material.angular.io" target="_blank" rel="noopener">material.angular.io</a>ã€‚ä½†æ˜¯å›½äººçš„æ“ä½œä¹ æƒ¯ä¸å›½å¤–è¿˜æ˜¯æœ‰ä¸€äº›åŒºåˆ«ï¼Œé’ˆå¯¹è¿™éƒ¨åˆ†ä¸šåŠ¡ï¼Œå…¬å¸æ‰“ç®—åŸºäºå®˜æ–¹ç»„ä»¶ï¼Œå°è£…ä¸€äº›è‡ªå®šä¹‰çš„ç»„ä»¶ï¼Œå¹¶ä¸”å¼€æºå‡ºæ¥ã€‚è¿™ä¸€è¿‡ç¨‹å½“ä¸­ï¼Œä¸»è¦å¯¹ä»¥ä¸‹å‡ ä¸ªæ–¹é¢åšäº†ä¸€äº›è€ƒè™‘ã€‚å¸Œæœ›èƒ½å¯¹å¤§å®¶çš„å¼€æºé¡¹ç›®æœ‰æ‰€å¸®åŠ©ã€‚ä¸è¶³ä¹‹å¤„è¿˜æœ›å¤šå¤šåŒ…å«( Â´ â–½ ` )ã€‚</p><blockquote><p><a href="https://github.com/petkit-io/ngx-os" target="_blank" rel="noopener">Github</a> æ¬¢è¿å¤§å®¶Star</p></blockquote><ul><li>Debug</li><li>Demo åŠ Demoæºä»£ç </li><li>Build</li><li>Githubå¼€æº</li><li>npmå‘å¸ƒ</li></ul><h2 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h2><p><img src="/assets/images/angular/os/ngx-os-directory.png" alt="directory"></p><h2 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h2><p>Debugé˜¶æ®µä¸»è¦è€ƒè™‘åˆ°çš„æ˜¯è·¯å¾„å¼•å…¥é—®é¢˜ï¼Œä¸ºäº†è®© <code>Demoæºä»£ç </code> èƒ½å¤Ÿå’Œç”Ÿäº§ç¯å¢ƒä¸‹çš„ä½¿ç”¨ä¿æŒä¸€è‡´ï¼Œåœ¨ <code>PROJECT_ROOT/tsconfig.json</code> (PROJECT_ROOTæŒ‡é¡¹ç›®æ ¹ç›®å½•)ä¸­åšäº†ä¸€äº›é…ç½®</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  "compilerOptions": &#123;</span><br><span class="line">    "baseUrl": ".",</span><br><span class="line">    "paths": &#123;</span><br><span class="line">      "@petkit/*": [</span><br><span class="line">        <span class="string">"./src/lib/*"</span></span><br><span class="line">      ],</span><br><span class="line">      "demo/*": [</span><br><span class="line">        <span class="string">"./src/demo/*"</span></span><br><span class="line">      ],</span><br><span class="line">      "util/*": [</span><br><span class="line">        <span class="string">"./src/util/*"</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†æ‰€æœ‰ <code>@petkit/</code> å¼€å¤´çš„è·¯å¾„å¼•å…¥è½¬æ¢è‡³ <code>src/lib/</code> ä¸‹ </p><blockquote><p><a href="http://json.schemastore.org/tsconfig" target="_blank" rel="noopener">schema</a></p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; NgxHighlightModule &#125; <span class="keyword">from</span> <span class="string">'@petkit/ngx-highlight'</span>;</span><br></pre></td></tr></table></figure><p>å°†è¢«è½¬æ¢ä¸º</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; NgxHighlightModule &#125; <span class="keyword">from</span> <span class="string">'PROJECT_ROOT/src/lib/ngx-highlight'</span>;</span><br></pre></td></tr></table></figure><h2 id="Demo-åŠ-Demoæºä»£ç "><a href="#Demo-åŠ-Demoæºä»£ç " class="headerlink" title="Demo åŠ Demoæºä»£ç "></a>Demo åŠ Demoæºä»£ç </h2><p>è¿™é‡Œå‚è€ƒäº†Angualar Materialå®˜æ–¹å›¢é˜Ÿçš„è®¾è®¡ï¼ˆæ­¤å¤„Demoå’ŒExampleæ¦‚å¿µä¸å®˜æ–¹æœ‰å‡ºå…¥ï¼Œå®˜æ–¹çš„ç¤ºä¾‹ä»£ç æ˜¯æ”¾åœ¨exampleç›®å½•ä¸‹çš„ï¼Œä¸ªäººè§‰å¾—éƒ½å¯ä»¥ï¼Œåªæ˜¯é¡¹ç›®å·²ç»é…å¥½äº†ï¼Œå°±ä¸æƒ³å†å»è°ƒæ•´å¾—ä¸å®˜æ–¹ä¿æŒä¸€è‡´äº†ï¼‰ã€‚</p><blockquote><p><a href="https://github.com/angular/material2/tree/master/src/material-examples" target="_blank" rel="noopener">material 2</a></p></blockquote><p>å°†æ‰€æœ‰demoç›®å½•ä¸‹çš„æ–‡ä»¶ä½œä¸ºé™æ€èµ„æºï¼Œé€šè¿‡httpè¯·æ±‚æºä»£ç ï¼Œä½¿ç”¨ <code>ngx-highlight</code> é«˜äº®è¯­æ³•ã€‚ <code>angular.json</code> é…ç½®å¦‚ä¸‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"projects"</span>: &#123;</span><br><span class="line">    <span class="attr">"example"</span>: &#123;</span><br><span class="line">      <span class="attr">"root"</span>: <span class="string">"."</span>,</span><br><span class="line">      <span class="attr">"sourceRoot"</span>: <span class="string">"src/example"</span>,</span><br><span class="line">      <span class="attr">"architect"</span>: &#123;</span><br><span class="line">        <span class="attr">"build"</span>: &#123;</span><br><span class="line">          <span class="attr">"options"</span>: &#123;</span><br><span class="line">            <span class="attr">"assets"</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">"glob"</span>: <span class="string">"**/*"</span>,</span><br><span class="line">                <span class="attr">"input"</span>: <span class="string">"src/demo"</span>,</span><br><span class="line">                <span class="attr">"output"</span>: <span class="string">"assets/demo"</span></span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="string">"src/example/assets"</span></span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š<code>sourceRoot</code> æ˜¯ <code>ng g *</code> çš„ç›¸å¯¹è·¯å¾„</p></blockquote><p><code>demo</code> ä¸ <code>example</code> åŒçº§ï¼Œç›´æ¥å¼•å…¥ä¼šæŠ¥é”™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  &quot;assets&quot;: [</span><br><span class="line">    &#x2F;&#x2F; Error: The src&#x2F;demo asset path must start with the project source root.</span><br><span class="line">    &quot;src&#x2F;demo&quot;,</span><br><span class="line">    &quot;src&#x2F;example&#x2F;assets&quot;</span><br><span class="line">  ]</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>demoä¼šè¢«å½“ä½œé™æ€èµ„æºè¾“å‡ºè‡³ <code>dist/example/assets/demo</code>ï¼Œæ­¤æ—¶ä½¿ç”¨httpè¯·æ±‚å¯¹åº”è·¯å¾„æ–‡ä»¶å³å¯ã€‚</p><h2 id="Build"><a href="#Build" class="headerlink" title="Build"></a>Build</h2><p>è¿™éƒ¨åˆ†å·²ç»æœ‰ç°æˆçš„åº“ <code>ng packagr</code> å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç›´æ¥æ‰“åŒ…äº†</p><blockquote><p><a href="https://github.com/ng-packagr/ng-packagr" target="_blank" rel="noopener">ng-packagr</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng-packagr -p ./src/**/package.json</span><br></pre></td></tr></table></figure><h2 id="Github-å¼€æº"><a href="#Github-å¼€æº" class="headerlink" title="Github å¼€æº"></a>Github å¼€æº</h2><p>é’ˆå¯¹ <code>lib</code> ä¸‹çš„æºä»£ç ï¼Œé‡‡ç”¨ <code>git submodule</code> çš„æ–¹å¼å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç»´æŠ¤å¼€æºç»„ä»¶ã€‚</p><blockquote><p>å…³äº <code>git submodule</code> segmentfault ä¸Šæœ‰ç¯‡æ–‡ç« å†™å¾—è›®ä¸é”™çš„ <a href="https://segmentfault.com/a/1190000003076028" target="_blank" rel="noopener">git submodule</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule add git@github.com:petkit-io/ngx-highlight.git src/lib/ngx-highlight</span><br></pre></td></tr></table></figure><h2 id="npmå‘å¸ƒ"><a href="#npmå‘å¸ƒ" class="headerlink" title="npmå‘å¸ƒ"></a>npmå‘å¸ƒ</h2><p><code>ng-packagr</code> æ‰“åŒ…å‡ºæ¥çš„ä»£ç ä¾¿å¯ä»¥ç›´æ¥å‘å¸ƒã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish path --access public;</span><br></pre></td></tr></table></figure><p>npm ä¸Šçš„ organization éœ€è¦åŠ ä¸Š <code>--access public</code> æ‰èƒ½å‘å¸ƒã€‚æ¯æ¬¡å‘å¸ƒå®Œæˆåè‡ªåŠ¨ç”Ÿæˆ <code>CHANGELOG</code>ï¼Œæ‰“ä¸Šæ–°çš„ç‰ˆæœ¬å·ã€‚</p><blockquote><p><a href="https://github.com/conventional-changelog/conventional-changelog" target="_blank" rel="noopener">conventional-changelog</a> å¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨ç”ŸæˆChange Log<br><a href="https://github.com/marionebl/commitlint" target="_blank" rel="noopener">commitlint</a>å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§„èŒƒcommit message</p></blockquote><h2 id="è‡ªåŠ¨åŒ–"><a href="#è‡ªåŠ¨åŒ–" class="headerlink" title="è‡ªåŠ¨åŒ–"></a>è‡ªåŠ¨åŒ–</h2><p><code>build</code> <code>github</code> <code>npm</code> ä¸‰ä¸ªé˜¶æ®µå¯ä»¥é€šè¿‡è„šæœ¬è‡ªåŠ¨æ‰§è¡Œã€‚<code>PROJECT_ROOT/bin/pub.sh</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line">libRoot=src/lib;</span><br><span class="line">distRoot=dist;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">buildLib</span></span>() &#123;</span><br><span class="line">  packagePath=<span class="variable">$1</span>;</span><br><span class="line"></span><br><span class="line">  npx ng-packagr -p <span class="variable">$packagePath</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">publishLib</span></span>() &#123;</span><br><span class="line">  libName=<span class="variable">$1</span>;</span><br><span class="line">  libPath=<span class="variable">$libRoot</span>/<span class="variable">$libName</span>;</span><br><span class="line"></span><br><span class="line">  buildLib <span class="variable">$libPath</span>/package.json;</span><br><span class="line">  npm publish <span class="variable">$distRoot</span>/<span class="variable">$libName</span> --access public;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">cd</span> <span class="variable">$libPath</span>;</span><br><span class="line">  git add .;</span><br><span class="line">  git commit -m <span class="string">"chore(version): publish npmjs"</span> 1&gt;/dev/null 2&gt;&amp;1;</span><br><span class="line">  npm version patch;</span><br><span class="line">  git push;</span><br><span class="line">  git push --tags;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">publishLib <span class="variable">$1</span></span><br></pre></td></tr></table></figure><p><code>maidfile.md</code>ï¼š</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## pub</span></span><br><span class="line"></span><br><span class="line">å‘å¸ƒç±»åº“</span><br><span class="line">å‘½ä»¤æ ¼å¼ <span class="code">`npx maid pub [lib-name]`</span></span><br><span class="line"></span><br><span class="line">e.g.</span><br><span class="line"><span class="bullet">- </span><span class="code">`npx maid pub ts-lib`</span></span><br><span class="line"><span class="bullet">- </span><span class="code">`npx maid pub ngx-material`</span></span><br><span class="line"></span><br><span class="line"><span class="code">```bash</span></span><br><span class="line"><span class="code">libName=$1</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">command="./bin/pub.sh $libName"</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">echo $command</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">$command</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx maid pub ngx-highlight</span><br></pre></td></tr></table></figure><h2 id="End"><a href="#End" class="headerlink" title="End"></a>End</h2><p>æ•´ä½“ç»“æ„è¿˜æœ‰ä¸€äº›ä¸å®Œå–„çš„åœ°æ–¹ï¼Œå¸Œæœ›å¤§å®¶å¤šå¤šæäº›å»ºè®®ï¼Œæˆ‘ä»¬ä¹Ÿä¼šé€æ­¥æ”¹å–„ã€‚</p><blockquote><p><a href="https://github.com/petkit-io/ngx-os" target="_blank" rel="noopener">Github</a> Star Star Star é‡è¦çš„äº‹æƒ…è¯´ä¸‰éo(â‰§vâ‰¦)o</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;åº&quot;&gt;&lt;a href=&quot;#åº&quot; class=&quot;headerlink&quot; title=&quot;åº&quot;&gt;&lt;/a&gt;åº&lt;/h2&gt;&lt;p&gt;å…¬å¸çš„æŠ€æœ¯å±•é€‰æ‹©çš„æ˜¯ &lt;code&gt;Angular&lt;/code&gt; ï¼Œè®¾è®¡é£æ ¼ä¹Ÿæ˜¯Googleçš„ &lt;code&gt;Mateiral Design&lt;/code
      
    
    </summary>
    
    
    
      <category term="angular" scheme="blog.lovesora.pro/tags/angular/"/>
    
      <category term="os" scheme="blog.lovesora.pro/tags/os/"/>
    
  </entry>
  
  <entry>
    <title>Angular Route Reuse Strategy</title>
    <link href="blog.lovesora.pro/2018/09/06/fe/angular/%E6%9D%82%E6%96%87/route-reuse/"/>
    <id>blog.lovesora.pro/2018/09/06/fe/angular/%E6%9D%82%E6%96%87/route-reuse/</id>
    <published>2018-09-06T13:59:48.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p>è·¯ç”±è·³è½¬çš„è¿‡ç¨‹ç›¸å½“äºæ˜¯å¯¹ç»„ä»¶çš„å®ä¾‹åŒ–ï¼Œé”€æ¯è¿‡ç¨‹ã€‚<br>è¿™ç§æœºåˆ¶èƒ½å¤Ÿåº”ä»˜ç»å¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ï¼Œä½†æ˜¯åœ¨å¤§éƒ¨åˆ†ç®¡ç†ç³»ç»Ÿå½“ä¸­ï¼Œä» <code>åˆ—è¡¨ -&gt; ç¼–è¾‘ -&gt; ä¿å­˜ -&gt; è¿”å›åˆ—è¡¨</code> è¯¥åœºæ™¯éœ€è¦ä¿å­˜ç±»ä¼¼æœç´¢ï¼Œåˆ†é¡µç­‰çŠ¶æ€æ•°æ®ï¼Œæ­¤æ—¶åˆ™éœ€è¦ä½¿ç”¨ Angular çš„ <code>RouteReuseStrategy</code> è´¯ç©¿è·¯ç”±çŠ¶æ€å¹¶å†³å®šæ„å»ºç»„ä»¶çš„æ–¹å¼ã€‚</p><h2 id="RouteReuseStrategy"><a href="#RouteReuseStrategy" class="headerlink" title="RouteReuseStrategy"></a>RouteReuseStrategy</h2><ul><li><code>shouldDetach</code> Determines if this route (and its subtree) should be detached to be reused later.</li><li><code>store</code> Stores the detached route.</li><li><code>shouldAttach</code> Determines if this route (and its subtree) should be reattached.</li><li><code>retrieve</code> Retrieves the previously stored route.</li><li><code>shouldReuseRoute</code> Determines if a route should be reused.</li></ul><p>æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š</p><h2 id="SimpleReuseStrategy"><a href="#SimpleReuseStrategy" class="headerlink" title="SimpleReuseStrategy"></a>SimpleReuseStrategy</h2><p>ç½‘ä¸Šå¾ˆå¤šä¾‹å­åœ¨è¿™é‡Œéƒ½æ˜¯ç”¨çš„ <code>route.routeConfig.path</code> ä½œä¸º <code>key</code>ã€‚<br>å¦‚æœä¸æ¶‰åŠåˆ°lazy loadæ˜¯ä¸ä¼šæœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯å¦‚æœå­˜åœ¨ <code>loadChildren</code>ï¼Œé‚£ä¹ˆ<code>route.routeConfig.path</code>å°±æœ‰å¯èƒ½ä¼šé‡å¤ã€‚<br>äºæ˜¯æˆ‘å°† <code>key</code> æ”¹ä¸ºäº† <code>route[&#39;_routerState&#39;].url</code> å–çš„ç»å¯¹è·¯å¾„ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  RouteReuseStrategy,</span><br><span class="line">  DefaultUrlSerializer,</span><br><span class="line">  ActivatedRouteSnapshot,</span><br><span class="line">  DetachedRouteHandle</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'@angular/router'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> SimpleReuseStrategy <span class="keyword">implements</span> RouteReuseStrategy &#123;</span><br><span class="line"></span><br><span class="line">  _cacheRouters: &#123; [key: <span class="built_in">string</span>]: <span class="built_in">any</span> &#125; = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  shouldDetach(route: ActivatedRouteSnapshot): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> !route.data.reuse;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  store(route: ActivatedRouteSnapshot, handle: DetachedRouteHandle): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>._cacheRouters[route[<span class="string">'_routerState'</span>].url] = &#123;</span><br><span class="line">      snapshot: route,</span><br><span class="line">      handle: handle</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  shouldAttach(route: ActivatedRouteSnapshot): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> !!<span class="keyword">this</span>._cacheRouters[route[<span class="string">'_routerState'</span>].url];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle &#123;</span><br><span class="line">    <span class="keyword">if</span> (!route.routeConfig || route.routeConfig.loadChildren || !<span class="keyword">this</span>._cacheRouters[route[<span class="string">'_routerState'</span>].url]) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._cacheRouters[route[<span class="string">'_routerState'</span>].url].handle;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="comment">// åŒä¸€è·¯ç”±æ—¶å¤ç”¨è·¯ç”±</span></span><br><span class="line">    <span class="keyword">return</span> future[<span class="string">'_routerState'</span>].url === curr[<span class="string">'_routerState'</span>].url;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ³¨å†Œç­–ç•¥åˆ°-forRoot-æ¨¡å—ã€‚"><a href="#æ³¨å†Œç­–ç•¥åˆ°-forRoot-æ¨¡å—ã€‚" class="headerlink" title="æ³¨å†Œç­–ç•¥åˆ° forRoot æ¨¡å—ã€‚"></a>æ³¨å†Œç­–ç•¥åˆ° <code>forRoot</code> æ¨¡å—ã€‚</h2><blockquote><p>lazy laod çš„ <code>forChild</code> æ¨¡å—æ˜¯æ— æ³•æ³¨å†Œçš„</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">  imports: [</span><br><span class="line">    RouterModule.forRoot(routes),</span><br><span class="line">  ],</span><br><span class="line">  providers: [&#123;</span><br><span class="line">    provide: RouteReuseStrategy,</span><br><span class="line">    useClass: SimpleReuseStrategy,</span><br><span class="line">  &#125;],</span><br><span class="line">  exports: [RouterModule]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="å…·ä½“æ¨¡å—ä½¿ç”¨"><a href="#å…·ä½“æ¨¡å—ä½¿ç”¨" class="headerlink" title="å…·ä½“æ¨¡å—ä½¿ç”¨"></a>å…·ä½“æ¨¡å—ä½¿ç”¨</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes: Routes = [&#123;</span><br><span class="line">  path: <span class="string">''</span>,</span><br><span class="line">  children: [&#123;</span><br><span class="line">    path: <span class="string">''</span>,</span><br><span class="line">    redirectTo: <span class="string">'list'</span>,</span><br><span class="line">  &#125;,  &#123;</span><br><span class="line">    path: <span class="string">'list'</span>,</span><br><span class="line">    component: ListComponent,</span><br><span class="line">    data: &#123;</span><br><span class="line">      reuse: <span class="literal">true</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    path: <span class="string">'detail/:id'</span>,</span><br><span class="line">    component: DetailComponent,</span><br><span class="line">  &#125;],</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h2><ul><li><a href="https://angular.cn/api/router/RouteReuseStrategy" target="_blank" rel="noopener">angular.cn</a></li><li><a href="https://segmentfault.com/a/1190000011430157#articleHeader1" target="_blank" rel="noopener">Angularè·¯ç”±å¤ç”¨ç­–ç•¥</a></li><li><a href="https://segmentfault.com/a/1190000014944087" target="_blank" rel="noopener">Angular 5.0 å­¦ä¹ 8ï¼šAngularè·¯ç”±å¤ç”¨ç­–ç•¥ (åˆ‡æ¢é¡µé¢å†…å®¹ä¸ä¸¢å¤±ï¼Œä¿æŒåŸæ¥çŠ¶æ€)</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;åœºæ™¯&quot;&gt;&lt;a href=&quot;#åœºæ™¯&quot; class=&quot;headerlink&quot; title=&quot;åœºæ™¯&quot;&gt;&lt;/a&gt;åœºæ™¯&lt;/h2&gt;&lt;p&gt;è·¯ç”±è·³è½¬çš„è¿‡ç¨‹ç›¸å½“äºæ˜¯å¯¹ç»„ä»¶çš„å®ä¾‹åŒ–ï¼Œé”€æ¯è¿‡ç¨‹ã€‚&lt;br&gt;è¿™ç§æœºåˆ¶èƒ½å¤Ÿåº”ä»˜ç»å¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ï¼Œä½†æ˜¯åœ¨å¤§éƒ¨åˆ†ç®¡ç†ç³»ç»Ÿå½“ä¸­ï¼Œä» &lt;code&gt;åˆ—è¡¨ -
      
    
    </summary>
    
    
    
      <category term="angular" scheme="blog.lovesora.pro/tags/angular/"/>
    
      <category term="route" scheme="blog.lovesora.pro/tags/route/"/>
    
  </entry>
  
  <entry>
    <title>tsconfig æµ…æ</title>
    <link href="blog.lovesora.pro/2018/08/09/fe/typescript/tsconfig/"/>
    <id>blog.lovesora.pro/2018/08/09/fe/typescript/tsconfig/</id>
    <published>2018-08-09T11:24:58.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç›¸å¯¹-vs-éç›¸å¯¹æ¨¡å—å¯¼å…¥"><a href="#ç›¸å¯¹-vs-éç›¸å¯¹æ¨¡å—å¯¼å…¥" class="headerlink" title="ç›¸å¯¹ vs. éç›¸å¯¹æ¨¡å—å¯¼å…¥"></a>ç›¸å¯¹ vs. éç›¸å¯¹æ¨¡å—å¯¼å…¥</h3><p>æ ¹æ®æ¨¡å—å¼•ç”¨æ˜¯ç›¸å¯¹çš„è¿˜æ˜¯éç›¸å¯¹çš„ï¼Œæ¨¡å—å¯¼å…¥ä¼šä»¥ä¸åŒçš„æ–¹å¼è§£æã€‚</p><p>ç›¸å¯¹å¯¼å…¥æ˜¯ä»¥/ï¼Œ./æˆ–../å¼€å¤´çš„ã€‚ ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Entry <span class="keyword">from</span> <span class="string">"./components/Entry"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; DefaultHeaders &#125; <span class="keyword">from</span> <span class="string">"../constants/http"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"/mod"</span>;</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰å…¶å®ƒå½¢å¼çš„å¯¼å…¥è¢«å½“ä½œéç›¸å¯¹çš„ã€‚ ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> $ <span class="keyword">from</span> <span class="string">"jQuery"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">"@angular/core"</span>;</span><br></pre></td></tr></table></figure><p>ç›¸å¯¹å¯¼å…¥åœ¨è§£ææ—¶æ˜¯ç›¸å¯¹äºå¯¼å…¥å®ƒçš„æ–‡ä»¶ï¼Œå¹¶ä¸”ä¸èƒ½è§£æä¸ºä¸€ä¸ªå¤–éƒ¨æ¨¡å—å£°æ˜ã€‚ ä½ åº”è¯¥ä¸ºä½ è‡ªå·±å†™çš„æ¨¡å—ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ï¼Œè¿™æ ·èƒ½ç¡®ä¿å®ƒä»¬åœ¨è¿è¡Œæ—¶çš„ç›¸å¯¹ä½ç½®ã€‚</p><p>éç›¸å¯¹æ¨¡å—çš„å¯¼å…¥å¯ä»¥ç›¸å¯¹äº <code>baseUrl</code> æˆ–é€šè¿‡ä¸‹æ–‡ä¼šè®²åˆ°çš„è·¯å¾„æ˜ å°„æ¥è¿›è¡Œè§£æã€‚ å®ƒä»¬è¿˜å¯ä»¥è¢«è§£ææˆ <a href="https://www.tslang.cn/docs/handbook/modules.html#ambient-modules" target="_blank" rel="noopener">å¤–éƒ¨æ¨¡å—å£°æ˜</a>ã€‚ ä½¿ç”¨éç›¸å¯¹è·¯å¾„æ¥å¯¼å…¥ä½ çš„å¤–éƒ¨ä¾èµ–</p><h3 id="è·¯å¾„æ˜ å°„"><a href="#è·¯å¾„æ˜ å°„" class="headerlink" title="è·¯å¾„æ˜ å°„"></a>è·¯å¾„æ˜ å°„</h3><p>æœ‰æ—¶æ¨¡å—ä¸æ˜¯ç›´æ¥æ”¾åœ¨<code>baseUrl</code>ä¸‹é¢ã€‚ æ¯”å¦‚ï¼Œå……åˆ† <code>&quot;jquery&quot;</code>æ¨¡å—åœ°å¯¼å…¥ï¼Œåœ¨è¿è¡Œæ—¶å¯èƒ½è¢«è§£é‡Šä¸º <code>&quot;node_modules/jquery/dist/jquery.slim.min.js&quot;</code>ã€‚åŠ è½½å™¨ä½¿ç”¨æ˜ å°„é…ç½®æ¥å°†æ¨¡å—åæ˜ å°„åˆ°è¿è¡Œæ—¶çš„æ–‡ä»¶ã€‚</p><p>TypeScriptç¼–è¯‘å™¨é€šè¿‡ä½¿ç”¨tsconfig.jsonæ–‡ä»¶é‡Œçš„â€pathsâ€æ¥æ”¯æŒè¿™æ ·çš„å£°æ˜æ˜ å°„ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå¦‚ä½•æŒ‡å®š jqueryçš„â€pathsâ€çš„ä¾‹å­ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="string">"baseUrl"</span>: <span class="string">"."</span>, <span class="comment">// This must be specified if "paths" is.</span></span><br><span class="line">    <span class="string">"paths"</span>: &#123;</span><br><span class="line">      <span class="string">"jquery"</span>: [<span class="string">"node_modules/jquery/dist/jquery"</span>] <span class="comment">// æ­¤å¤„æ˜ å°„æ˜¯ç›¸å¯¹äº"baseUrl"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„<code>&quot;paths&quot;</code>æ˜¯ç›¸å¯¹äº<code>&quot;baseUrl&quot;</code>è¿›è¡Œè§£æã€‚ å¦‚æœ <code>&quot;baseUrl&quot;</code>è¢«è®¾ç½®æˆäº†é™¤<code>&quot;.&quot;</code>å¤–çš„å…¶å®ƒå€¼ï¼Œæ¯”å¦‚<code>tsconfig.json</code>æ‰€åœ¨çš„ç›®å½•ï¼Œé‚£ä¹ˆæ˜ å°„å¿…é¡»è¦åšç›¸åº”çš„æ”¹å˜ã€‚<br>å¦‚æœä½ åœ¨ä¸Šä¾‹ä¸­è®¾ç½®äº† <code>&quot;baseUrl&quot;: &quot;./src&quot;</code>ï¼Œé‚£ä¹ˆ<code>jquery</code>åº”è¯¥æ˜ å°„åˆ°<code>&quot;../node_modules/jquery/dist/jquery&quot;</code>ã€‚</p><h3 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h3><ul><li><a href="https://www.tslang.cn/docs/handbook/module-resolution.html" target="_blank" rel="noopener">tslang.cn</a></li><li><a href="https://zhuanlan.zhihu.com/p/21629069" target="_blank" rel="noopener">zhihu</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;ç›¸å¯¹-vs-éç›¸å¯¹æ¨¡å—å¯¼å…¥&quot;&gt;&lt;a href=&quot;#ç›¸å¯¹-vs-éç›¸å¯¹æ¨¡å—å¯¼å…¥&quot; class=&quot;headerlink&quot; title=&quot;ç›¸å¯¹ vs. éç›¸å¯¹æ¨¡å—å¯¼å…¥&quot;&gt;&lt;/a&gt;ç›¸å¯¹ vs. éç›¸å¯¹æ¨¡å—å¯¼å…¥&lt;/h3&gt;&lt;p&gt;æ ¹æ®æ¨¡å—å¼•ç”¨æ˜¯ç›¸å¯¹çš„è¿˜æ˜¯éç›¸å¯¹çš„ï¼Œæ¨¡å—å¯¼å…¥ä¼šä»¥ä¸
      
    
    </summary>
    
    
    
      <category term="ts" scheme="blog.lovesora.pro/tags/ts/"/>
    
  </entry>
  
  <entry>
    <title>Angular ç»„ä»¶å¼€æºæ¶æ„</title>
    <link href="blog.lovesora.pro/2018/08/07/fe/angular/%E7%BB%84%E4%BB%B6/%E5%BC%80%E6%BA%90%E6%9E%B6%E6%9E%84/"/>
    <id>blog.lovesora.pro/2018/08/07/fe/angular/%E7%BB%84%E4%BB%B6/%E5%BC%80%E6%BA%90%E6%9E%B6%E6%9E%84/</id>
    <published>2018-08-07T11:18:27.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Common"><a href="#Common" class="headerlink" title="Common"></a>Common</h2><p><code>Common</code> çš„å®šä¹‰æ˜¯ <code>å…¬å…±</code>ï¼Œå‚è€ƒçš„ <code>angular</code>ï¼Œæ‰€æœ‰å¼€æºç»„ä»¶å…¬å…±çš„ä»£ç éƒ½æ”¾åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼ŒåŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼š</p><ul><li>ts</li><li>sass</li></ul><p>è¿™éƒ¨åˆ†å®šä¹‰äº†åŸºäº <code>typescript</code> çš„æ‰€æœ‰å…¬å…±åº“ï¼Œç±»ä¼¼<code>lodash</code>ï¼ŒåŒ…å«ç»„ä»¶éœ€è¦ä½¿ç”¨çš„å…¬å…±çš„åŠŸèƒ½ã€‚ç›®å‰åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š</p><ul><li>util</li><li>net</li><li>error</li><li>global</li></ul><p>ä»£ç æœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆ <code>js</code>ï¼Œå¹¶ä¸”åŒ…å« <code>*.d.ts</code>ï¼Œæ— è®ºæ˜¯ <code>js</code> è¿˜æ˜¯ <code>ts</code> é¡¹ç›®éƒ½å¯å¼•ç”¨ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  SearchArray,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'@petkit/common'</span>;</span><br></pre></td></tr></table></figure><h2 id="Style"><a href="#Style" class="headerlink" title="Style"></a>Style</h2><p>è¿™éƒ¨åˆ†å®šä¹‰äº†åŸºäº <code>sass</code> çš„å…¬å…±æ ·å¼ã€‚ç›®å‰åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š</p><ul><li>animation</li><li>icon</li><li>support</li><li>wechat</li><li>mp</li></ul><p>è¯¥éƒ¨åˆ†æ ·å¼é’ˆå¯¹ä¸åŒå¹³å°ï¼ˆWeb, PC,å…¬ä¼—å·,å°ç¨‹åºç­‰ï¼‰åšäº†å…¼å®¹å¤„ç†ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œé»˜è®¤ <code>750</code> å æ»¡å±å¹•å®½åº¦ï¼ˆç±»ä¼¼å¾®ä¿¡å°ç¨‹åºï¼‰ã€‚</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// _theming.config.scss</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">'~@petkit/style/theming'</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$app-primary</span>: mat-palette(<span class="variable">$mat-cyan</span>);</span><br><span class="line"><span class="variable">$app-accent</span>: mat-palette(<span class="variable">$mat-orange</span>);</span><br><span class="line"><span class="variable">$app-warn</span>: mat-palette(<span class="variable">$mat-yellow</span>, <span class="number">700</span>, <span class="number">300</span>, <span class="number">900</span>);</span><br><span class="line"><span class="variable">$app-theme</span>: mat-light-theme(<span class="variable">$app-primary</span>, <span class="variable">$app-accent</span>, <span class="variable">$app-warn</span>);</span><br><span class="line"><span class="variable">$app-size</span>: size(wp);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Common&quot;&gt;&lt;a href=&quot;#Common&quot; class=&quot;headerlink&quot; title=&quot;Common&quot;&gt;&lt;/a&gt;Common&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Common&lt;/code&gt; çš„å®šä¹‰æ˜¯ &lt;code&gt;å…¬å…±&lt;/code&gt;ï¼Œå‚è€ƒçš„ &lt;code&gt;ang
      
    
    </summary>
    
    
    
      <category term="angular" scheme="blog.lovesora.pro/tags/angular/"/>
    
      <category term="open source" scheme="blog.lovesora.pro/tags/open-source/"/>
    
  </entry>
  
  <entry>
    <title>Angular ç»„ä»¶å¼€æºæµç¨‹</title>
    <link href="blog.lovesora.pro/2018/08/07/fe/angular/%E7%BB%84%E4%BB%B6/%E5%BC%80%E6%BA%90/"/>
    <id>blog.lovesora.pro/2018/08/07/fe/angular/%E7%BB%84%E4%BB%B6/%E5%BC%80%E6%BA%90/</id>
    <published>2018-08-07T10:47:22.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Step-1-Github-åˆ›å»ºç»„ç»‡å’Œä»“åº“"><a href="#Step-1-Github-åˆ›å»ºç»„ç»‡å’Œä»“åº“" class="headerlink" title="Step 1. Github åˆ›å»ºç»„ç»‡å’Œä»“åº“"></a>Step 1. <code>Github</code> åˆ›å»º<a href="https://github.com/account/organizations/new" target="_blank" rel="noopener">ç»„ç»‡</a>å’Œ<a href="https://github.com/new" target="_blank" rel="noopener">ä»“åº“</a></h2><h2 id="Step-2-npmjs-åˆ›å»ºç»„ç»‡"><a href="#Step-2-npmjs-åˆ›å»ºç»„ç»‡" class="headerlink" title="Step 2. npmjs åˆ›å»ºç»„ç»‡"></a>Step 2. <code>npmjs</code> åˆ›å»ºç»„ç»‡</h2><h2 id="Step-3-clone-boilerplate"><a href="#Step-3-clone-boilerplate" class="headerlink" title="Step 3. clone boilerplate"></a>Step 3. clone <code>boilerplate</code></h2><h2 id="Step-4-æ‰§è¡Œpub"><a href="#Step-4-æ‰§è¡Œpub" class="headerlink" title="Step 4. æ‰§è¡Œpub"></a>Step 4. æ‰§è¡Œpub</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Step-1-Github-åˆ›å»ºç»„ç»‡å’Œä»“åº“&quot;&gt;&lt;a href=&quot;#Step-1-Github-åˆ›å»ºç»„ç»‡å’Œä»“åº“&quot; class=&quot;headerlink&quot; title=&quot;Step 1. Github åˆ›å»ºç»„ç»‡å’Œä»“åº“&quot;&gt;&lt;/a&gt;Step 1. &lt;code&gt;Github&lt;/
      
    
    </summary>
    
    
    
      <category term="angular" scheme="blog.lovesora.pro/tags/angular/"/>
    
      <category term="component" scheme="blog.lovesora.pro/tags/component/"/>
    
      <category term="open source" scheme="blog.lovesora.pro/tags/open-source/"/>
    
  </entry>
  
  <entry>
    <title>Sketch Useful Shortcut</title>
    <link href="blog.lovesora.pro/2018/08/03/design/sketch/shortcut/"/>
    <id>blog.lovesora.pro/2018/08/03/design/sketch/shortcut/</id>
    <published>2018-08-03T15:24:29.000Z</published>
    <updated>2020-03-23T23:07:27.939Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Duplicate"><a href="#Duplicate" class="headerlink" title="Duplicate"></a>Duplicate</h2><table><thead><tr><th align="left">usage</th><th align="left">command</th></tr></thead><tbody><tr><td align="left">å¤åˆ¶æ ·å¼</td><td align="left">Option + Command + C</td></tr><tr><td align="left">ç²˜è´´æ ·å¼</td><td align="left">Option + Command + V</td></tr><tr><td align="left">å¤åˆ¶</td><td align="left">Ctrl + Command + arrow</td></tr><tr><td align="left">è‡ªå®šä¹‰å¤åˆ¶</td><td align="left">Ctrl + Shift + Command + arrow</td></tr></tbody></table><h2 id="Groups"><a href="#Groups" class="headerlink" title="Groups"></a>Groups</h2><table><thead><tr><th align="left">usage</th><th align="left">command</th></tr></thead><tbody><tr><td align="left">Bring Forward</td><td align="left">Alt + Cmd + â†‘</td></tr><tr><td align="left">Bring to Front</td><td align="left">Control + Alt + Cmd + â†‘</td></tr><tr><td align="left">Send Backward</td><td align="left">Alt + Cmd + â†“</td></tr><tr><td align="left">Sent to Back</td><td align="left">Control + Alt + Cmd + â†“</td></tr><tr><td align="left">Select Parent Artboard</td><td align="left">Esc</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Duplicate&quot;&gt;&lt;a href=&quot;#Duplicate&quot; class=&quot;headerlink&quot; title=&quot;Duplicate&quot;&gt;&lt;/a&gt;Duplicate&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;usage&lt;/
      
    
    </summary>
    
    
    
      <category term="sketch" scheme="blog.lovesora.pro/tags/sketch/"/>
    
      <category term="shortcut" scheme="blog.lovesora.pro/tags/shortcut/"/>
    
  </entry>
  
  <entry>
    <title>Centos 7 å®‰è£…SSL</title>
    <link href="blog.lovesora.pro/2018/07/27/linux/centos/ssl/"/>
    <id>blog.lovesora.pro/2018/07/27/linux/centos/ssl/</id>
    <published>2018-07-27T10:07:02.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…epel-release"><a href="#å®‰è£…epel-release" class="headerlink" title="å®‰è£…epel-release"></a>å®‰è£…epel-release</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum install -y epel-release</span><br><span class="line"></span><br><span class="line">yum search python2-certbot-nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœæ²¡æœ‰å¯¹åº”çš„package</span></span><br><span class="line">yum reinstall -y epel-release</span><br><span class="line">yum update -y</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…certbot"><a href="#å®‰è£…certbot" class="headerlink" title="å®‰è£…certbot"></a>å®‰è£…certbot</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install certbot python2-certbot-nginx</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿæˆssl"><a href="#ç”Ÿæˆssl" class="headerlink" title="ç”Ÿæˆssl"></a>ç”Ÿæˆssl</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¹æ®æç¤ºé€‰æ‹©å³å¯</span></span><br><span class="line">sudo certbot --nginx</span><br></pre></td></tr></table></figure><h2 id="Issues"><a href="#Issues" class="headerlink" title="Issues"></a>Issues</h2><ol><li><p>æ‰¾ä¸åˆ° <code>nginx</code> å‘½ä»¤<br>è§£å†³æ–¹æ¡ˆï¼šå°†nginxå‘½ä»¤æ‰€åœ¨ç›®å½•æ·»åŠ è‡³ç¯å¢ƒå˜é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">PATH=<span class="variable">$PATH</span>:/usr/sbin;</span><br></pre></td></tr></table></figure></li><li><p>æµè§ˆå™¨æ— æ³•è®¿é—® <code>https://xxxx</code><br>è§£å†³æ–¹æ¡ˆï¼šå°†443ç«¯å£æ·»åŠ è‡³é˜²ç«å¢™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/firewalld/services/ssh.xml</span><br><span class="line"></span><br><span class="line"><span class="comment"># add rule</span></span><br><span class="line">&lt;port protocol=<span class="string">"tcp"</span> port=<span class="string">"443"</span>/&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h2><ul><li><a href="https://certbot.eff.org/lets-encrypt/centosrhel7-nginx" target="_blank" rel="noopener">certbot</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å®‰è£…epel-release&quot;&gt;&lt;a href=&quot;#å®‰è£…epel-release&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…epel-release&quot;&gt;&lt;/a&gt;å®‰è£…epel-release&lt;/h2&gt;&lt;figure class=&quot;highlight 
      
    
    </summary>
    
    
    
      <category term="nginx" scheme="blog.lovesora.pro/tags/nginx/"/>
    
      <category term="centos" scheme="blog.lovesora.pro/tags/centos/"/>
    
      <category term="ssl" scheme="blog.lovesora.pro/tags/ssl/"/>
    
  </entry>
  
  <entry>
    <title>Gitlab Dockerå®‰è£…</title>
    <link href="blog.lovesora.pro/2018/07/19/vcs/gitlab/install/"/>
    <id>blog.lovesora.pro/2018/07/19/vcs/gitlab/install/</id>
    <published>2018-07-19T15:01:57.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…-GitLab"><a href="#å®‰è£…-GitLab" class="headerlink" title="å®‰è£… GitLab"></a>å®‰è£… <code>GitLab</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull gitlab</span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œå®¹å™¨"><a href="#è¿è¡Œå®¹å™¨" class="headerlink" title="è¿è¡Œå®¹å™¨"></a>è¿è¡Œå®¹å™¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run --detach \</span><br><span class="line">  --hostname gitlab.example.com \</span><br><span class="line">  --env GITLAB_OMNIBUS_CONFIG=<span class="string">"external_url 'http://gitlab.example.com';"</span> \</span><br><span class="line">  --publish 443:443 --publish 8000:80 --publish 22:22 \</span><br><span class="line">  --name gitlab \</span><br><span class="line">  --restart always \</span><br><span class="line">  --volume /srv/gitlab/config:/etc/gitlab \</span><br><span class="line">  --volume /srv/gitlab/logs:/var/<span class="built_in">log</span>/gitlab \</span><br><span class="line">  --volume /srv/gitlab/data:/var/opt/gitlab \</span><br><span class="line">  gitlab/gitlab-ce:latest</span><br></pre></td></tr></table></figure><h2 id="é…ç½®-Nginx-åå‘ä»£ç†"><a href="#é…ç½®-Nginx-åå‘ä»£ç†" class="headerlink" title="é…ç½® Nginx åå‘ä»£ç†"></a>é…ç½® <code>Nginx</code> åå‘ä»£ç†</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /etc/nginx/conf.d/gitlab.conf</span></span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">server_name</span> gitlab.example.com;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">access_log</span>  /var/log/nginx/gitlab.access.log  main;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">location</span> / &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://localhost:8000;</span><br><span class="line">    <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®å¯†ç "><a href="#è®¾ç½®å¯†ç " class="headerlink" title="è®¾ç½®å¯†ç "></a>è®¾ç½®å¯†ç </h2><p>ç¬¬ä¸€æ¬¡è®¿é—® <code>gitlab.example.com</code> ä¼šæç¤ºè¾“å…¥å¯†ç ï¼Œç”¨æˆ·åé»˜è®¤æ˜¯ <code>root</code>ã€‚</p><h2 id="å‘"><a href="#å‘" class="headerlink" title="å‘"></a>å‘</h2><h3 id="docker0-iptables-No-chain-target-match-by-that-name"><a href="#docker0-iptables-No-chain-target-match-by-that-name" class="headerlink" title="docker0: iptables: No chain/target/match by that name"></a><code>docker0: iptables: No chain/target/match by that name</code></h3><p>é‡å¯dockerå³å¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker.service</span><br></pre></td></tr></table></figure><h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h2><ul><li><a href="https://docs.gitlab.com/omnibus/docker/" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å®‰è£…-GitLab&quot;&gt;&lt;a href=&quot;#å®‰è£…-GitLab&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£… GitLab&quot;&gt;&lt;/a&gt;å®‰è£… &lt;code&gt;GitLab&lt;/code&gt;&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;
      
    
    </summary>
    
    
    
      <category term="gitlab" scheme="blog.lovesora.pro/tags/gitlab/"/>
    
  </entry>
  
  <entry>
    <title>GitLab CI/CD Runner å…¥é—¨</title>
    <link href="blog.lovesora.pro/2018/07/19/vcs/gitlab/runner/"/>
    <id>blog.lovesora.pro/2018/07/19/vcs/gitlab/runner/</id>
    <published>2018-07-19T14:05:56.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘è‡ªå·±ç”¨çš„ <code>Centos 7 x64</code> ï¼Œä¸€ä¸‹æµç¨‹éƒ½æ˜¯ä»¥ <code>Centos 7 x64</code> <code>roor</code>æƒé™ä¸ºåŸºç¡€çš„</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><blockquote><p><a href="https://docs.gitlab.com/runner/install/linux-manually.html" target="_blank" rel="noopener">Linuxæ‰‹åŠ¨å®‰è£…</a><br><a href="https://docs.gitlab.com/runner/install/docker.html" target="_blank" rel="noopener">ä½¿ç”¨Docker</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.rpm.sh | sudo bash</span><br><span class="line">yum install gitlab-runner</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><blockquote><p><a href="https://docs.gitlab.com/runner/commands/README.html#gitlab-runner-install" target="_blank" rel="noopener">å®˜æ–¹Runnerå‘½ä»¤æ‰‹å†Œ</a></p></blockquote><h3 id="1-æ³¨å†Œrunner"><a href="#1-æ³¨å†Œrunner" class="headerlink" title="1. æ³¨å†Œrunner"></a>1. æ³¨å†Œrunner</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># register</span></span><br><span class="line">gitlab-runner register</span><br><span class="line"></span><br><span class="line"><span class="comment"># register</span></span><br><span class="line">gitlab-runner register \</span><br><span class="line">  --name runner-name \</span><br><span class="line">  --url http://gitlab.example.com \</span><br><span class="line">  --registration-token my-registration-token \</span><br><span class="line">  --executor shell</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹runneråˆ—è¡¨</span></span><br><span class="line">gitlab-runner list</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œé‡åˆ°äº†ä¸ªå‘ï¼Œä¸æ·»åŠ  <code>--executor</code> ä¼šæŠ¥é”™<br><code>running register from command line,</code>â€“executor X<code>results in:</code>ERROR: Invalid executor specified``<br>ä½†æ˜¯å®˜æ–¹æ–‡æ¡£é‡Œå´æ²¡æœ‰è¯´å¿…é¡»è¦åŠ </p></blockquote><h3 id="2-å¯åŠ¨æœåŠ¡"><a href="#2-å¯åŠ¨æœåŠ¡" class="headerlink" title="2. å¯åŠ¨æœåŠ¡"></a>2. å¯åŠ¨æœåŠ¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…æœåŠ¡</span></span><br><span class="line">gitlab-runner install runner-name --user root</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨</span></span><br><span class="line">gitlab-runner start runner-name</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æœåŠ¡å¯åŠ¨çŠ¶æ€</span></span><br><span class="line">gitlab-runner status runner-name</span><br></pre></td></tr></table></figure><h3 id="3-é…ç½®runner-tag"><a href="#3-é…ç½®runner-tag" class="headerlink" title="3. é…ç½®runner tag"></a>3. é…ç½®runner tag</h3><p>å…ˆè¯´ä¸€ä¸‹ <code>Specific Runners</code> ã€‚</p><p>è¿™ä¸ªtagé…ç½®æ˜¯ç”¨æ¥ <code>æ ‡è¯†</code> è¯¥ <code>runner</code> çš„ã€‚</p><p>è¿›å…¥<code>[Settings -&gt; CI/CD -&gt; Specific Runners]</code> ï¼Œç‚¹å‡»ç¼–è¾‘æŒ‰é’®(è¿™ä¸ªæŒ‰é’®æˆ‘æ˜¯æ‰¾äº†å¥½ä¹…æ‰æ‰¾åˆ°)ï¼Œæ·»åŠ ä¸€ä¸ªtagï¼Œåœ¨jobä¸­å¯ä»¥é€šè¿‡æŒ‡å®štagsæ¥å®šä½åˆ°å¯¹åº”çš„ <code>Runner</code></p><p><img src="/assets/images/gitlab/runners.jpg" alt="runners"></p><p><img src="/assets/images/gitlab/runners-tag.jpg" alt="runners tag"></p><p>å…³äº <code>jobs</code> è¿™é‡Œæœ‰å‡ ç¯‡å¾ˆä¸é”™çš„æ–‡ç« ï¼Œæˆ‘å°±ä¸å¤šèµ˜è¿°äº†ã€‚</p><blockquote><p><a href="https://docs.gitlab.com/ce/ci/yaml/README.html#stages" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a><br><a href="https://segmentfault.com/a/1190000011890710" target="_blank" rel="noopener">gitlab-cié…ç½®è¯¦è§£(äºŒ)</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æˆ‘è‡ªå·±ç”¨çš„ &lt;code&gt;Centos 7 x64&lt;/code&gt; ï¼Œä¸€ä¸‹æµç¨‹éƒ½æ˜¯ä»¥ &lt;code&gt;Centos 7 x64&lt;/code&gt; &lt;code&gt;roor&lt;/code&gt;æƒé™ä¸ºåŸºç¡€çš„&lt;/p&gt;
&lt;h2 id=&quot;å®‰è£…&quot;&gt;&lt;a href=&quot;#å®‰è£…&quot; class=&quot;headerlin
      
    
    </summary>
    
    
    
      <category term="gitlab" scheme="blog.lovesora.pro/tags/gitlab/"/>
    
      <category term="ci" scheme="blog.lovesora.pro/tags/ci/"/>
    
  </entry>
  
  <entry>
    <title>å‡½æ•°å¼ç¼–ç¨‹æµ…æ</title>
    <link href="blog.lovesora.pro/2018/07/05/fe/rxjs/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/"/>
    <id>blog.lovesora.pro/2018/07/05/fe/rxjs/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/</id>
    <published>2018-07-05T17:03:45.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‘½ä»¤å¼-å’Œ-å£°æ˜å¼"><a href="#å‘½ä»¤å¼-å’Œ-å£°æ˜å¼" class="headerlink" title="å‘½ä»¤å¼ å’Œ å£°æ˜å¼"></a><code>å‘½ä»¤å¼</code> å’Œ <code>å£°æ˜å¼</code></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘½ä»¤å¼</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addOne</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> results = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++)&#123;</span><br><span class="line">    results.push(arr[i] + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> results</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(addOne([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">double</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> results = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++)&#123;</span><br><span class="line">    results.push(arr[i] * <span class="number">2</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> results</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(double([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]));</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜å¼</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addOne</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.map(<span class="function"><span class="params">item</span> =&gt;</span> item + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(addOne([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]));</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">double</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.map(<span class="function"><span class="params">item</span> =&gt;</span> item * <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> oneArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> anotherArray = double(oneArray);</span><br><span class="line"><span class="comment">// anotherArrayçš„å†…å®¹ä¸º[2, 4, 6]</span></span><br><span class="line"><span class="comment">// oneArrayçš„å†…å®¹ä¾ç„¶æ˜¯[1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(oneArray);</span><br><span class="line"><span class="built_in">console</span>.log(anotherArray);</span><br></pre></td></tr></table></figure><h2 id="çº¯å‡½æ•°-å¼•ç”¨é€æ˜åº¦Referential-Transparency"><a href="#çº¯å‡½æ•°-å¼•ç”¨é€æ˜åº¦Referential-Transparency" class="headerlink" title="çº¯å‡½æ•°(å¼•ç”¨é€æ˜åº¦Referential Transparency)"></a>çº¯å‡½æ•°(å¼•ç”¨é€æ˜åº¦Referential Transparency)</h2><p><strong>çº¯å‡½æ•°</strong></p><ul><li>å‡½æ•°çš„æ‰§â¾è¿‡ç¨‹å®Œå…¨ç”±è¾“â¼Šå‚æ•°å†³å®šï¼Œä¸ä¼šå—é™¤å‚æ•°ä¹‹å¤–çš„ä»»ä½•æ•°æ®å½±å“</li><li>å‡½æ•°ä¸ä¼šä¿®æ”¹ä»»ä½•å¤–éƒ¨çŠ¶æ€ï¼Œâ½å¦‚ä¿®æ”¹å…¨å±€å˜é‡æˆ–ä¼ â¼Šçš„å‚æ•°å¯¹è±¡</li></ul><p><strong>éçº¯å‡½æ•°</strong></p><ul><li>æ”¹å˜äº†å‚æ•°</li><li>æ”¹å˜äº†å…¨å±€å˜é‡</li><li>DOMæˆ–è€…AJAXæ“ä½œ</li><li>è¯»å–ç”¨æˆ·è¾“å…¥ï¼ŒæŠ›å‡ºå¼‚å¸¸</li></ul><h2 id="æ•°æ®ä¸å¯å˜-Immutable"><a href="#æ•°æ®ä¸å¯å˜-Immutable" class="headerlink" title="æ•°æ®ä¸å¯å˜(Immutable)"></a>æ•°æ®ä¸å¯å˜(Immutable)</h2><ul><li>æ•°æ®ä¸€æ—¦äº§ç”Ÿï¼Œå°±ä¸å¯ä»¥å‘ç”Ÿå˜åŒ–ï¼ˆImmutableï¼‰ã€‚</li></ul><p>es6ä¸­çš„<code>const</code>åªæ˜¯è§„å®šäº†å˜é‡ä¸å¯å‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯å˜é‡å¼•ç”¨çš„å¯¹è±¡è‡ªèº«å¯ä»¥æ”¹å˜ã€‚</p><h2 id="å‘å±•å†å²"><a href="#å‘å±•å†å²" class="headerlink" title="å‘å±•å†å²"></a>å‘å±•å†å²</h2><ul><li>å‡½æ•°å¼ç¼–ç¨‹æƒ³è¦å®ç°éœ€è¦æœ‰ä¸€å±‚è½¯ä»¶æ¨¡æ‹Ÿæ¥å®ç°æ•°å­¦å®¶ä»¬è®¾æƒ³çš„æ¨¡å‹ï¼Œä½†æ˜¯åœ¨å½“æ—¶çš„ç¡¬ä»¶æ¡ä»¶ä¸‹æ˜¯ä¸è¢«å…è®¸çš„ã€‚</li><li>ç¡¬ä»¶çš„é£é€Ÿå‘å±•ï¼Œæ€§èƒ½çš„å¤§å¹…æå‡ï¼Œè®©å¼€å‘è€…ä»¬å¼€å§‹å…³æ³¨è½¯ä»¶çš„å¯ç»´æŠ¤æ€§ï¼Œå¯æµ‹è¯•æ€§ã€‚</li><li>å‡½æ•°å¼ç¼–ç¨‹å´èƒ½å¤Ÿè®©â¼¤éƒ¨ åˆ†å¼€å‘è€…ä¸éœ€è¦æ“â¼¼ä»»åŠ¡å¤„ç†ï¼Œæ‰€ä»¥â¾®å¸¸é€‚åˆåˆ†å¸ƒå¼è®¡ç®—çš„åœºæ™¯</li></ul><h2 id="é¢å‘å¯¹è±¡-å’Œ-å‡½æ•°å¼"><a href="#é¢å‘å¯¹è±¡-å’Œ-å‡½æ•°å¼" class="headerlink" title="é¢å‘å¯¹è±¡ å’Œ å‡½æ•°å¼"></a><code>é¢å‘å¯¹è±¡</code> å’Œ <code>å‡½æ•°å¼</code></h2><p>é¢å‘å¯¹è±¡</p><p>ä¼˜ç‚¹</p><ul><li>å› ä¸ºé€šè¿‡å®šä¹‰ç±»çš„â½…æ³•ï¼Œå¯ä»¥æ§ åˆ¶å¯¹æ•°æ®çš„æ“ä½œã€‚</li></ul><p>ç¼ºé™·</p><ul><li>â¾¯å‘å¯¹è±¡ç¼–ç¨‹æä¾›äº†â¼€ç§æŒç»­ç¼–å†™çƒ‚ ä»£ç çš„â½…å¼ï¼Œå®ƒè®©ä½ é€šè¿‡â¼€ç³»åˆ—è¡¥ä¸æ¥æ‹¼å‡‘ç¨‹åºã€‚</li><li>ä¸çŸ¥é“å¯¹è±¡æ˜¯å¦‚ä½•å˜ä¸ºå½“å‰çŠ¶æ€çš„ï¼Œå› ä¸ºæ¯ä¸€ä¸ªæ–¹æ³•éƒ½æœ‰å¯èƒ½ä¿®æ”¹çŠ¶æ€ã€‚æ— æ³•é¢„çŸ¥å¦‚æœä¿®æ”¹äº†å½“å‰çŠ¶æ€ä¼šå¯¼è‡´å“ªäº›åœ°æ–¹å‘ç”Ÿå˜åŒ–ã€‚</li></ul><p>å‡½æ•°å¼</p><p>ä¼˜ç‚¹</p><ul><li>å£°æ˜å¼ï¼Œçº¯å‡½æ•°ï¼Œæ•°æ®ä¸å¯å˜ã€‚</li></ul><p>ç¼ºç‚¹</p><ul><li>éš¾åº¦ï¼Œæ€§èƒ½</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‘½ä»¤å¼-å’Œ-å£°æ˜å¼&quot;&gt;&lt;a href=&quot;#å‘½ä»¤å¼-å’Œ-å£°æ˜å¼&quot; class=&quot;headerlink&quot; title=&quot;å‘½ä»¤å¼ å’Œ å£°æ˜å¼&quot;&gt;&lt;/a&gt;&lt;code&gt;å‘½ä»¤å¼&lt;/code&gt; å’Œ &lt;code&gt;å£°æ˜å¼&lt;/code&gt;&lt;/h2&gt;&lt;figure class=&quot;high
      
    
    </summary>
    
    
    
      <category term="å‡½æ•°å¼ç¼–ç¨‹" scheme="blog.lovesora.pro/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot Mysql Guide</title>
    <link href="blog.lovesora.pro/2018/07/05/be/spring-boot/mysql/"/>
    <id>blog.lovesora.pro/2018/07/05/be/spring-boot/mysql/</id>
    <published>2018-07-05T15:57:03.000Z</published>
    <updated>2020-03-23T23:07:27.939Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h2><p>ä¸»è¦æ˜¯ <code>spring-boot-starter-data-jpa</code> å’Œ <code>mysql-connector-java</code> ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gs-mysql-data<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- JPA Data (We are going to use Repositories, Entities, Hibernate, etc...) --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Use MySQL Connector-J --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ é…ç½®"><a href="#æ·»åŠ é…ç½®" class="headerlink" title="æ·»åŠ é…ç½®"></a>æ·»åŠ é…ç½®</h2><p>æ‰“å¼€æ–‡ä»¶<code>application.properties</code>ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;db_example</span><br><span class="line">spring.datasource.username&#x3D;springuser</span><br><span class="line">spring.datasource.password&#x3D;ThePassword</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ å®ä½“-Entity-æ˜ å°„"><a href="#æ·»åŠ å®ä½“-Entity-æ˜ å°„" class="headerlink" title="æ·»åŠ å®ä½“(@Entity)æ˜ å°„"></a>æ·»åŠ å®ä½“(<code>@Entity</code>)æ˜ å°„</h2><p><code>src/main/java/hello/User.java</code></p><p><strong>æ³¨æ„ï¼š</strong>å¦‚æœidæ˜¯ä¸»é”®åˆ™å°†<code>@GeneratedValue(strategy=GenerationType.AUTO)</code>æ”¹ä¸º<code>@GeneratedValue(strategy=GenerationType.IDENTITY)</code>ã€‚</p><blockquote><p><a href="https://blog.csdn.net/danchaofan0534/article/details/53608832" target="_blank" rel="noopener">hibernateåœ¨æ•°æ®åº“ç”Ÿæˆhibernate_sequenceè¡¨é—®é¢˜</a></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hello;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GenerationType;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> <span class="comment">// This tells Hibernate to make a table out of this class</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Id</span></span><br><span class="line">  <span class="meta">@GeneratedValue</span>(strategy=GenerationType.AUTO)</span><br><span class="line">  <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> email;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.email = email;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºä»“åº“ï¼Œç”¨æ¥æ“ä½œæ•°æ®åº“"><a href="#åˆ›å»ºä»“åº“ï¼Œç”¨æ¥æ“ä½œæ•°æ®åº“" class="headerlink" title="åˆ›å»ºä»“åº“ï¼Œç”¨æ¥æ“ä½œæ•°æ®åº“"></a>åˆ›å»ºä»“åº“ï¼Œç”¨æ¥æ“ä½œæ•°æ®åº“</h2><p><code>src/main/java/hello/UserRepository.java</code></p><p><code>CrudRepository</code>é€šè¿‡<code>@Autowired</code>å¼•ç”¨ä¼šè‡ªåŠ¨å®ç°crudæ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hello;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.data.repository.CrudRepository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> hello.User;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This will be AUTO IMPLEMENTED by Spring into a Bean called userRepository</span></span><br><span class="line"><span class="comment">// CRUD refers Create, Read, Update, Delete</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserRepository</span> <span class="keyword">extends</span> <span class="title">CrudRepository</span>&lt;<span class="title">User</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºController"><a href="#åˆ›å»ºController" class="headerlink" title="åˆ›å»ºController"></a>åˆ›å»ºController</h2><p><code>src/main/java/hello/MainController.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hello;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> hello.User;</span><br><span class="line"><span class="keyword">import</span> hello.UserRepository;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>    <span class="comment">// This means that this class is a Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(path=<span class="string">"/demo"</span>) <span class="comment">// This means URL's start with /demo (after Application path)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainController</span> </span>&#123;</span><br><span class="line"><span class="meta">@Autowired</span> <span class="comment">// This means to get the bean called userRepository</span></span><br><span class="line">           <span class="comment">// Which is auto-generated by Spring, we will use it to handle the data</span></span><br><span class="line"><span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping</span>(path=<span class="string">"/add"</span>) <span class="comment">// Map ONLY GET Requests</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@ResponseBody</span> <span class="function">String <span class="title">addNewUser</span> <span class="params">(@RequestParam String name</span></span></span><br><span class="line"><span class="function"><span class="params">, @RequestParam String email)</span> </span>&#123;</span><br><span class="line"><span class="comment">// @ResponseBody means the returned String is the response, not a view name</span></span><br><span class="line"><span class="comment">// @RequestParam means it is a parameter from the GET or POST request</span></span><br><span class="line"></span><br><span class="line">User n = <span class="keyword">new</span> User();</span><br><span class="line">n.setName(name);</span><br><span class="line">n.setEmail(email);</span><br><span class="line">userRepository.save(n);</span><br><span class="line"><span class="keyword">return</span> <span class="string">"Saved"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping</span>(path=<span class="string">"/all"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@ResponseBody</span> <span class="function">Iterable&lt;User&gt; <span class="title">getAllUsers</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">// This returns a JSON or XML with the users</span></span><br><span class="line"><span class="keyword">return</span> userRepository.findAll();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Summery"><a href="#Summery" class="headerlink" title="Summery"></a>Summery</h2><ol><li>åˆ›å»ºæ“ä½œæ•°æ®åº“çš„Repository</li></ol><ul><li>ç±»åå°±æ˜¯è¡¨å</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserRepository</span> <span class="keyword">extends</span> <span class="title">CrudRepository</span>&lt;<span class="title">User</span>, <span class="title">Long</span>&gt; </span>&#123; &#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºEntity</li></ol><ul><li>ä¸éœ€è¦ç”Ÿæˆæ„é€ å‡½æ•°</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨è§£å®ä½“</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="comment">// æ³¨è§£ä¸»é”®</span></span><br><span class="line"><span class="meta">@Id</span></span><br><span class="line"><span class="comment">// æ³¨è§£ä¸»é”®çš„åˆ›å»ºæ–¹å¼</span></span><br><span class="line"><span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)</span><br></pre></td></tr></table></figure><h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h2><ul><li><a href="https://spring.io/guides/gs/accessing-data-mysql/" target="_blank" rel="noopener">Accessing data with MySQL</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æ·»åŠ ä¾èµ–&quot;&gt;&lt;a href=&quot;#æ·»åŠ ä¾èµ–&quot; class=&quot;headerlink&quot; title=&quot;æ·»åŠ ä¾èµ–&quot;&gt;&lt;/a&gt;æ·»åŠ ä¾èµ–&lt;/h2&gt;&lt;p&gt;ä¸»è¦æ˜¯ &lt;code&gt;spring-boot-starter-data-jpa&lt;/code&gt; å’Œ &lt;code&gt;mysql-co
      
    
    </summary>
    
    
    
      <category term="spring boot" scheme="blog.lovesora.pro/tags/spring-boot/"/>
    
      <category term="mysql" scheme="blog.lovesora.pro/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot Building a RESTful Web Service</title>
    <link href="blog.lovesora.pro/2018/07/05/be/spring-boot/beginner/"/>
    <id>blog.lovesora.pro/2018/07/05/be/spring-boot/beginner/</id>
    <published>2018-07-05T10:14:42.000Z</published>
    <updated>2020-03-23T23:07:27.939Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><p><code>idea -&gt; new project -&gt; Spring Initializr -&gt; check web/web dependency -&gt; finish</code></p><h2 id="åˆ›å»ºVO"><a href="#åˆ›å»ºVO" class="headerlink" title="åˆ›å»ºVO"></a>åˆ›å»ºVO</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sora.rest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Greeting</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String content;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Greeting</span><span class="params">(<span class="keyword">long</span> id, String content)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.content = content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºController"><a href="#åˆ›å»ºController" class="headerlink" title="åˆ›å»ºController"></a>åˆ›å»ºController</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sora.rest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicLong;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GreetingController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String template = <span class="string">"Hello, %s! Your id is %s"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> AtomicLong counter = <span class="keyword">new</span> AtomicLong();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Greeting <span class="title">greeting</span><span class="params">(@RequestParam(value = <span class="string">"/greeting"</span>, defaultValue = <span class="string">"world"</span>)</span> String name) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Greeting(counter.incrementAndGet(), String.format(template, name, counter.get()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h2><p>Press <code>Option + Control + D</code> ï¼Œç¼–è¾‘é…ç½®ï¼Œå¦‚å›¾æ‰€ç¤º</p><p><img src="/assets/images/spring/debug-configuration.jpg" alt="configuration"></p><p>å†æ¬¡æŒ‰ä¸‹ <code>Option + Control + D</code> ï¼Œé€‰æ‹©åˆšæ‰é…ç½®çš„spring bootï¼Œå¯åŠ¨ã€‚</p><h2 id="æ„å»º"><a href="#æ„å»º" class="headerlink" title="æ„å»º"></a>æ„å»º</h2><p>æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥é¡¹ç›®ç›®å½•ï¼Œæ‰§è¡Œ <code>./mvnw clean package</code></p><h2 id="éƒ¨ç½²æ‰§è¡Œ"><a href="#éƒ¨ç½²æ‰§è¡Œ" class="headerlink" title="éƒ¨ç½²æ‰§è¡Œ"></a>éƒ¨ç½²æ‰§è¡Œ</h2><ol><li>å®‰è£…jre</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install java-1.8.0-openjdk</span><br></pre></td></tr></table></figure><ol start="2"><li>å°† <code>target</code> ç›®å½•ä¸‹çš„ <code>jar</code> æ–‡ä»¶copyè‡³æœåŠ¡å™¨ï¼Œæ‰§è¡Œ <code>java -jar xxxx.jar</code>å³å¯ã€‚</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp target/xxx.jar user@ip:xxx.jar</span><br><span class="line">java -jar xxx.jar</span><br></pre></td></tr></table></figure><h2 id="Summery"><a href="#Summery" class="headerlink" title="Summery"></a>Summery</h2><ol><li>åˆ›å»ºRESTé¡¹ç›®éœ€è¦æ·»åŠ  <code>spring-boot-starter-web</code> ä¾èµ–</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>é€šè¿‡æ³¨è§£çš„æ–¹å¼å…³è”APIè¯·æ±‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜ å°„è·¯å¾„ï¼Œæ–¹æ³•ï¼Œé»˜è®¤å€¼ç­‰</span></span><br><span class="line"><span class="meta">@RequestMapping</span></span><br><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line"><span class="meta">@PostMapping</span></span><br><span class="line"><span class="meta">@PutMapping</span></span><br><span class="line"><span class="meta">@DeleteMapping</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜ å°„å‚æ•°</span></span><br><span class="line"><span class="meta">@RequestParam</span></span><br><span class="line"><span class="meta">@RequestBody</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜ å°„è¿”å›å€¼</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br></pre></td></tr></table></figure><h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h2><p>-<a href="https://linuxize.com/post/install-java-on-centos-7/" target="_blank" rel="noopener">How to install Java on CentOS 7</a><br>-<a href="http://spring.io/guides/gs/rest-service/#initial" target="_blank" rel="noopener">Building a RESTful Web Service</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;åˆ›å»ºé¡¹ç›®&quot;&gt;&lt;a href=&quot;#åˆ›å»ºé¡¹ç›®&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºé¡¹ç›®&quot;&gt;&lt;/a&gt;åˆ›å»ºé¡¹ç›®&lt;/h2&gt;&lt;p&gt;&lt;code&gt;idea -&amp;gt; new project -&amp;gt; Spring Initializr -&amp;gt; che
      
    
    </summary>
    
    
    
      <category term="spring boot" scheme="blog.lovesora.pro/tags/spring-boot/"/>
    
  </entry>
  
  <entry>
    <title>IOSç§»åŠ¨ç«¯å…¼å®¹æ€§</title>
    <link href="blog.lovesora.pro/2018/07/03/fe/mobile/ios%E5%85%BC%E5%AE%B9/"/>
    <id>blog.lovesora.pro/2018/07/03/fe/mobile/ios%E5%85%BC%E5%AE%B9/</id>
    <published>2018-07-03T20:40:43.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Safariå¦‚ä½•é˜»æ­¢â€œæ©¡çš®ç­‹æ•ˆæœâ€ï¼Ÿ"><a href="#Safariå¦‚ä½•é˜»æ­¢â€œæ©¡çš®ç­‹æ•ˆæœâ€ï¼Ÿ" class="headerlink" title="Safariå¦‚ä½•é˜»æ­¢â€œæ©¡çš®ç­‹æ•ˆæœâ€ï¼Ÿ"></a>Safariå¦‚ä½•é˜»æ­¢â€œæ©¡çš®ç­‹æ•ˆæœâ€ï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'touchmove'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//é˜»æ­¢é»˜è®¤çš„å¤„ç†æ–¹å¼(é˜»æ­¢ä¸‹æ‹‰æ»‘åŠ¨çš„æ•ˆæœ)</span></span><br><span class="line">  e.preventDefault();</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="comment">//passive å‚æ•°ä¸èƒ½çœç•¥ï¼Œç”¨æ¥å…¼å®¹ioså’Œandroid</span></span><br><span class="line">  passive: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>Refs</strong></p><ul><li><a href="https://link.zhihu.com/?target=https%3A//segmentfault.com/a/1190000014134234">é˜»æ­¢å¾®ä¿¡æµè§ˆå™¨ä¸‹æ‹‰æ»‘åŠ¨æ•ˆæœï¼ˆios11.3 æ©¡çš®ç­‹æ•ˆæœï¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Safariå¦‚ä½•é˜»æ­¢â€œæ©¡çš®ç­‹æ•ˆæœâ€ï¼Ÿ&quot;&gt;&lt;a href=&quot;#Safariå¦‚ä½•é˜»æ­¢â€œæ©¡çš®ç­‹æ•ˆæœâ€ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;Safariå¦‚ä½•é˜»æ­¢â€œæ©¡çš®ç­‹æ•ˆæœâ€ï¼Ÿ&quot;&gt;&lt;/a&gt;Safariå¦‚ä½•é˜»æ­¢â€œæ©¡çš®ç­‹æ•ˆæœâ€ï¼Ÿ&lt;/h2&gt;&lt;figure c
      
    
    </summary>
    
    
    
      <category term="mobile" scheme="blog.lovesora.pro/tags/mobile/"/>
    
      <category term="compat" scheme="blog.lovesora.pro/tags/compat/"/>
    
  </entry>
  
  <entry>
    <title>2018 å¹´ä¸­æ€»ç»“</title>
    <link href="blog.lovesora.pro/2018/06/29/work/summary/2018%E5%B9%B4%E4%B8%AD%E6%80%BB%E7%BB%93/"/>
    <id>blog.lovesora.pro/2018/06/29/work/summary/2018%E5%B9%B4%E4%B8%AD%E6%80%BB%E7%BB%93/</id>
    <published>2018-06-29T14:51:40.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è½¬çœ¼18å¹´å·²ç»è¿‡åŠï¼Œåˆ°å…¬å¸å·²ç»å¿«ä¸€å¹´äº†ã€‚ä»å¹´åˆåˆ°ç°åœ¨çš„è¿™åŠå¹´é—´åˆ‡å®ä½“ä¼šåˆ°äº†ä»€ä¹ˆå«åšç—›å¹¶å¿«ä¹ç€ã€‚ä»åšå¯„å…»å¼€å§‹ï¼Œå‹åŠ›å°±ä¸€ç›´ä¼´éšåœ¨èº«è¾¹ã€‚ç”¨æ–°æŠ€æœ¯å¤„ç†æ–°ä¸šåŠ¡è¿™ä¸€é€‰æ‹©ï¼Œç›´æ¥å¯¼è‡´æˆ‘ä»¬å‰ç«¯å¼€å‘äººå‘˜ä¸€åº¦å´©åã€‚ä½†æ˜¯ï¼Œè‡ªå·±åšå‡ºçš„é€‰æ‹©ï¼Œå«ç€æ³ªä¹Ÿè¦æŠŠå®ƒæå®šï¼ä¸è¿‡ï¼Œç°åœ¨å›æƒ³èµ·æ¥ï¼Œé‚£çœŸçš„æ˜¯ä¸€æ®µå¼¥è¶³çè´µçš„ä½“éªŒï¼ŒåŒäº‹çš„é¼“åŠ±å’Œé¢†å¯¼çš„å®½å®¹ï¼Œè®©æˆ‘åšæŒäº†ä¸‹å»ã€‚å¦‚æœä¸ä¸€é¼“ä½œæ°”å¾€å‰èµ°ï¼Œé‚£ä¹ˆè‡ªå·±æ°¸è¿œè¿ˆä¸å‡ºé‚£ä¸€æ­¥ã€‚è¿™è‚¡é­„åŠ›æˆä¸ºäº†æˆ‘äººç”Ÿä¸­å®è´µçš„ä¸€ç¬”è´¢å¯Œã€‚</p><h2 id="ä¸»è¦å·¥ä½œ"><a href="#ä¸»è¦å·¥ä½œ" class="headerlink" title="ä¸»è¦å·¥ä½œ"></a>ä¸»è¦å·¥ä½œ</h2><p>è¿™åŠå¹´æ¥ä¸»è¦å·¥ä½œéƒ½é›†ä¸­åœ¨äº†angularçš„åº”ç”¨ä¸Šï¼Œä»åšçŒ«çªå¼€å§‹æ—¶çš„åŸºç¡€è¯•è¿è¡Œï¼Œåˆ°åæ¥åšå¯„å…»å¼€å§‹çš„æ­£å¼æŠ€æœ¯è¿ç§»ï¼Œå¤§ä½“æˆæœå¦‚ä¸‹ï¼š</p><h3 id="æ¶æ„"><a href="#æ¶æ„" class="headerlink" title="æ¶æ„"></a>æ¶æ„</h3><p>æ ¸å¿ƒæ€æƒ³æ˜¯åˆ†å±‚æ¶æ„ï¼Œå±‚å†…ç‹¬ç«‹ï¼Œå±‚é—´é€šè¿‡æ¥å£é€šä¿¡ã€‚</p><ul><li><code>lib</code> å…¬å…±tsåº“ï¼Œæ‰€æœ‰é¡¹ç›®é€šç”¨<ul><li>net</li><li>util</li><li>error</li><li>pipe</li></ul></li><li><code>style</code> å…¬å…±æ ·å¼åº“ï¼Œæ‰€æœ‰é¡¹ç›®é€šç”¨<ul><li>material-theming</li><li>icon</li><li>animation</li><li>support</li><li>plugin</li><li>mobile</li><li>wechat</li><li>mini-program</li><li>pc</li></ul></li><li><code>matrial</code> angular materialåº“<ul><li>amap</li><li>calendar</li><li>card<ul><li>check</li><li>delete</li><li>loading</li></ul></li><li>date-range-picker</li><li>dialog<ul><li>confirm</li><li>success</li><li>table</li></ul></li><li>layout</li><li>loading</li><li>nav</li><li>table</li><li>tree</li><li>upload</li></ul></li><li><code>flux</code> pcç«¯æ•°æ®å±‚</li><li><code>redux</code> ç§»åŠ¨ç«¯æ•°æ®å±‚</li><li><code>common</code> åŸå­ä¸šåŠ¡å±‚ï¼Œå¾®æœåŠ¡åŸºç¡€</li><li><code>saas</code> èšåˆä¸šåŠ¡å±‚</li></ul><h3 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h3><blockquote><p>AMD -&gt; ESM</p></blockquote><p>åœ¨angularjsæ—¶æœŸï¼Œæˆ‘ä»¬æ˜¯ç”¨çš„AMD(requirejs)æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œè§£å†³äº†<code>æŒ‰éœ€åŠ è½½</code>é—®é¢˜ï¼Œä½†æ˜¯éšç€æ„å»ºå·¥å…·ï¼ˆgulpï¼Œwebpackï¼Œrollupç­‰ï¼‰çš„ä¸æ–­å‘å±•ï¼ŒESMé€æ¸æˆä¸ºä¸»æµã€‚Angular æ¡†æ¶æœ¬èº«ä½¿ç”¨çš„TSï¼Œå…¶æ¨¡å—åŒ–æ–¹æ¡ˆæ˜¯ESMçš„è¶…é›†ã€‚</p><h3 id="ç»„ä»¶åŒ–"><a href="#ç»„ä»¶åŒ–" class="headerlink" title="ç»„ä»¶åŒ–"></a>ç»„ä»¶åŒ–</h3><blockquote><p>directive -&gt; Component</p></blockquote><p>angularjsä¸­ä½¿ç”¨çš„<code>directive</code>ä½œä¸ºç»„ä»¶åŒ–çš„åŸºç¡€ï¼Œè€Œåœ¨angularä¸­åˆ™æ˜¯ä½¿ç”¨ <code>Module</code>ï¼Œ<code>Component</code>, <code>Directive</code> æ¥é€‚ç”¨ä¸ç”¨çš„ç»„ä»¶åŒ–åœºæ™¯ã€‚</p><h3 id="è§„èŒƒåŒ–"><a href="#è§„èŒƒåŒ–" class="headerlink" title="è§„èŒƒåŒ–"></a>è§„èŒƒåŒ–</h3><blockquote><p>htmlhint, stylelint, eslint, tslint</p></blockquote><p>ä½¿ç”¨è¯­è¨€å¯¹åº”çš„lintæ’ä»¶æ¥è§„èŒƒä»£ç é£æ ¼ï¼Œä¿è¯ä»£ç çš„å¯è¯»æ€§å’Œä¸€è‡´æ€§ã€‚</p><blockquote><p>git flow</p></blockquote><p>ä½¿ç”¨git flowåˆ†æ”¯ç®¡ç†æ¨¡å‹ï¼Œè®©å¤šäººåä½œï¼Œåˆ†æ”¯ç®¡ç†å˜å¾—æ¸…æ™°æœ‰åºã€‚</p><h3 id="è·¨å¹³å°"><a href="#è·¨å¹³å°" class="headerlink" title="è·¨å¹³å°"></a>è·¨å¹³å°</h3><p>PCç«¯ï¼Œç§»åŠ¨ç«¯ï¼Œå°ç¨‹åºä½¿ç”¨åŒä¸€å¥—æ¶æ„è®¾è®¡ã€‚</p><ul><li><code>bin</code>ä¸­å­˜æ”¾äº†é¡¹ç›®ç›¸å…³shellè„šæœ¬</li><li><code>dist</code>ç¼–è¯‘åæ–‡ä»¶æ‰€åœ¨ç›®å½•</li><li><code>projects</code>ç›®å½•å­˜æ”¾äº†æ‰€æœ‰åº“é¡¹ç›®ï¼Œè´Ÿè´£ç‹¬ç«‹çš„ä¸šåŠ¡ã€‚</li><li><code>src</code>é¡¹ç›®æºä»£ç </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">â–¾ bin&#x2F;</span><br><span class="line">â–¸ dist&#x2F;</span><br><span class="line">â–¸ node_modules&#x2F;</span><br><span class="line">â–¾ projects&#x2F;</span><br><span class="line">  â–¸ common&#x2F;</span><br><span class="line">  â–¸ flux&#x2F;</span><br><span class="line">  â–¸ lib&#x2F;</span><br><span class="line">  â–¸ material&#x2F;</span><br><span class="line">â–¾ src&#x2F;</span><br><span class="line">  â–¸ app&#x2F;</span><br><span class="line">  â–¸ assets&#x2F;</span><br><span class="line">  â–¸ environments&#x2F;</span><br><span class="line">  â–¸ style&#x2F;</span><br></pre></td></tr></table></figure><h2 id="ç»éªŒæ•™è®­"><a href="#ç»éªŒæ•™è®­" class="headerlink" title="ç»éªŒæ•™è®­"></a>ç»éªŒæ•™è®­</h2><h3 id="æ—¶é—´è¯„ä¼°"><a href="#æ—¶é—´è¯„ä¼°" class="headerlink" title="æ—¶é—´è¯„ä¼°"></a>æ—¶é—´è¯„ä¼°</h3><p>ç»†èŠ‚ä¸ä¾èµ–éƒ½éœ€è¦è‡ªå·±ä¸æ–­å»æŒ–æ˜æ‰èƒ½è€ƒè™‘å¾—è¯¦ç»†ï¼Œå¦‚æœåªæ˜¯æƒ³å½“ç„¶çš„è¯„ä¼°ï¼Œé‚£ä¹ˆäº‹æƒ…çš„ç»“æœå¾€å¾€ä¼šå˜å¾—å¾ˆç³Ÿç³•ã€‚</p><h3 id="ä¸‰ä¸ªè‡­çš®åŒ æŠµè¿‡ä¸€ä¸ªè¯¸è‘›äº®"><a href="#ä¸‰ä¸ªè‡­çš®åŒ æŠµè¿‡ä¸€ä¸ªè¯¸è‘›äº®" class="headerlink" title="ä¸‰ä¸ªè‡­çš®åŒ æŠµè¿‡ä¸€ä¸ªè¯¸è‘›äº®"></a>ä¸‰ä¸ªè‡­çš®åŒ æŠµè¿‡ä¸€ä¸ªè¯¸è‘›äº®</h3><p>åœ¨ä½¿ç”¨æ–°æŠ€æœ¯çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸é—­é—¨é€ è½¦ï¼Œå¯¼è‡´è‡ªå·±èµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚ä»¥åé‡åˆ°ç±»ä¼¼é—®é¢˜ä¸€å®šè¦å¤šä¸åˆ«äººè®¨è®ºã€‚</p><h3 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><p>è¿™ä¸€å¹´åšäº†å¤ªå¤šçš„ä¸œè¥¿ï¼Œå´æ€è€ƒå¾—å¤ªå°‘ï¼Œæ²¡æœ‰ç†è§£åˆ°æŠ€æœ¯çš„åŸç†ï¼Œæ·±æ·±åœ°é™·å…¥äº†ç å†œæ·±æ¸Šï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Œä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ã€‚æ¯æ¬¡ä»éœ€æ±‚åˆ°ç ”å‘ï¼Œéƒ½æ˜¯æ‹¿ç€è®¾è®¡å›¾ï¼Œæ€è€ƒå®ç°è¿™ä¸ªä¸œè¥¿è¦æ€ä¹ˆåšï¼Œæ—¶é—´å¯æ§ä¸ï¼Œè¦èŠ±å¤šå°‘æ—¶é—´ï¼Œæœ‰ä»€ä¹ˆé£é™©ï¼Œéœ€è¦ä»€ä¹ˆä¾èµ–ï¼Œå“ªäº›ä¸œè¥¿å¯ä»¥å¤ç”¨ç­‰ç­‰ã€‚ä½†æ˜¯ï¼Œäº§å“åˆè¡·æ˜¯ä»€ä¹ˆï¼Ÿè§£å†³äº†ç”¨æˆ·ä»€ä¹ˆåˆšéœ€ï¼Ÿä¸ºä»€ä¹ˆè®¾è®¡å¸ˆè¦è¿™æ ·å­è®¾è®¡ï¼Ÿåç«¯æ•°æ®åº“æ€ä¹ˆè®¾è®¡çš„ï¼Ÿä¸ºä»€ä¹ˆè¦ç»™è¿™æ ·çš„æ•°æ®ç»“æ„ï¼Ÿè¿™äº›å¾€å¾€éš¾ä»¥æ¥è§¦ï¼Œå³ä½¿æœ‰æœºä¼šäº†è§£ï¼Œä¹Ÿä¸å¤ªæ„¿æ„èŠ±æ—¶é—´å»åšã€‚å¾ˆå¤šæ—¶å€™éƒ½ä¸æ¸…é™¤æºå¤´ï¼Œå°±å¼€å§‹è‰è‰åŠ¨å·¥ï¼Œåªç€çœ¼äºè‡ªå·±é¢†åŸŸçš„å®ç°ï¼Œç»“æœå¾€å¾€å°±æ˜¯å„ç§è¿”å·¥ã€‚åœ¨ä»¥åçš„ç ”å‘ä¸­ï¼Œä¸€å®šä¸èƒ½æŠŠè‡ªå·±ä»…ä»…å®šä½ä¸ºâ€œå‰ç«¯â€å·¥ç¨‹å¸ˆï¼Œåº”å½“ä»æ›´ä¸ºå®è§‚ï¼Œæ›´ä¸ºæ ¹æœ¬çš„è§’åº¦å»è€ƒè™‘äº‹æƒ…ã€‚</p><h2 id="æœªæ¥"><a href="#æœªæ¥" class="headerlink" title="æœªæ¥"></a>æœªæ¥</h2><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>ç›®å‰å•å…ƒæµ‹è¯•å·²ç»æœ‰äº†çœ‰ç›®ï¼Œä½¿ç”¨angularå®˜æ–¹æä¾›çš„ <code>karma</code> å’Œ <code>jasmine</code>ã€‚</p><h3 id="è‡ªåŠ¨åŒ–"><a href="#è‡ªåŠ¨åŒ–" class="headerlink" title="è‡ªåŠ¨åŒ–"></a>è‡ªåŠ¨åŒ–</h3><p>è¿™ä¸€éƒ¨åˆ†æ˜¯ç›®å‰æœ€ä¸ºè–„å¼±çš„ä¸€ç¯ï¼Œå½“ä¸šåŠ¡è¾¾åˆ°ä¸€å®šå¤æ‚åº¦æ—¶ï¼Œä¼šå‘ç°è¶Šæ¥è¶Šå¤šçš„ä»»åŠ¡éƒ½æ˜¯æ°´å¢¨åŠŸå¤«ï¼Œæµç¨‹éƒ½æ˜¯ä¸€æ‘¸ä¸€æ ·ï¼Œæ— éç›¸å…³æ•°æ®æœ‰æ‰€åŒºåˆ«ï¼Œè‡ªåŠ¨åŒ–å·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æ–‡ä»¶å’Œä»£ç ï¼Œæé«˜ç”Ÿäº§æ•ˆç‡ã€‚</p><h3 id="å¼‚å¸¸ä¸ŠæŠ¥ä¸ç›‘æ§"><a href="#å¼‚å¸¸ä¸ŠæŠ¥ä¸ç›‘æ§" class="headerlink" title="å¼‚å¸¸ä¸ŠæŠ¥ä¸ç›‘æ§"></a>å¼‚å¸¸ä¸ŠæŠ¥ä¸ç›‘æ§</h3><p>å¼‚å¸¸ç±»å‹</p><ul><li>ç½‘ç»œ</li><li>æ¥å£</li><li>ä»£ç </li><li>æ•°æ®</li></ul><p>é€šè¿‡çº¿ä¸Šçš„å¼‚å¸¸ç›‘æ§å¯ä»¥åŠæ—¶æ‹¿åˆ°ç”¨æˆ·çš„å¼‚å¸¸ä¿¡æ¯ï¼Œå³æ—¶ä¿®å¤ã€‚</p><h3 id="å…¨æ ˆ"><a href="#å…¨æ ˆ" class="headerlink" title="å…¨æ ˆ"></a>å…¨æ ˆ</h3><p>å¹´åˆä¹‹æ—¶å°±æƒ³æœç€å…¨æ ˆå‘å±•ï¼Œè¿™åŠå¹´ä»ç»“æœä¸Šçœ‹ï¼Œç¦»è‡ªå·±çš„ç›®æ ‡è¿˜æ˜¯æœ‰ä¸€æ®µè·ç¦»ï¼Œç°åœ¨åç«¯çš„åŒäº‹ä»¬éƒ½åœ¨æœç€å…¨æ ˆå‘å±•ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½è½åã€‚å¦‚æœæœ‰ç›¸å…³åç«¯ä¸šåŠ¡çš„è¯ï¼Œå¸Œæœ›è‡ªå·±è¿˜æ˜¯èƒ½å¤Ÿä¸»åŠ¨å»äº‰å–</p><!--stackedit_data:eyJoaXN0b3J5IjpbLTE5NDU0NTQ0MjRdfQ==-->]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;è½¬çœ¼18å¹´å·²ç»è¿‡åŠï¼Œåˆ°å…¬å¸å·²ç»å¿«ä¸€å¹´äº†ã€‚ä»å¹´åˆåˆ°ç°åœ¨çš„è¿™åŠå¹´é—´åˆ‡å®ä½“ä¼šåˆ°äº†ä»€ä¹ˆå«åšç—›å¹¶å¿«ä¹ç€ã€‚ä»åšå¯„å…»å¼€å§‹ï¼Œå‹åŠ›å°±ä¸€ç›´ä¼´éšåœ¨èº«è¾¹ã€‚ç”¨æ–°æŠ€æœ¯å¤„
      
    
    </summary>
    
    
    
      <category term="summary" scheme="blog.lovesora.pro/tags/summary/"/>
    
  </entry>
  
  <entry>
    <title>æµ…è°ˆangularjsæ¶æ„æ¼”è¿›</title>
    <link href="blog.lovesora.pro/2018/06/25/fe/%E6%9E%B6%E6%9E%84/angularjs/"/>
    <id>blog.lovesora.pro/2018/06/25/fe/%E6%9E%B6%E6%9E%84/angularjs/</id>
    <published>2018-06-25T21:48:06.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ç¬”è€…å¤§è¨€ä¸æƒ­å°†å…¶ç§°ä¸ºå‰ç«¯æ¶æ„ï¼Œå„ä½å¤§ä½¬å¯ç›´æ¥ç•¥è¿‡</p></blockquote><h2 id="å‰è¨€ï¼ˆçº¯å±ä¹±åŠˆæŸ´ï¼Œå¯ç›´æ¥ç•¥è¿‡ï¼‰"><a href="#å‰è¨€ï¼ˆçº¯å±ä¹±åŠˆæŸ´ï¼Œå¯ç›´æ¥ç•¥è¿‡ï¼‰" class="headerlink" title="å‰è¨€ï¼ˆçº¯å±ä¹±åŠˆæŸ´ï¼Œå¯ç›´æ¥ç•¥è¿‡ï¼‰"></a>å‰è¨€ï¼ˆçº¯å±ä¹±åŠˆæŸ´ï¼Œå¯ç›´æ¥ç•¥è¿‡ï¼‰</h2><p>åœ¨å…¬å¸å·¥ä½œå¿«ä¸€å¹´äº†ï¼Œæ”¶è·äº†å¾ˆå¤šä¸œè¥¿ï¼Œ<code>å­¦è€Œä¸æ€åˆ™ç½”ï¼Œæ€è€Œä¸å­¦åˆ™æ®†</code>ã€‚éƒ½æ˜ç™½ï¼Œæ™ºè€…æ€»æ˜¯ä¸€è¯­é“å¤©æœºï¼Œå¤§é“è‡³ç®€ï¼Œå¾ˆå¤šæ ¸å¿ƒçš„è®¾è®¡æ€æƒ³å¾€å¾€éƒ½æ˜¯éå¸¸ç®€æ´ï¼Œæ˜äº†çš„ã€‚è¿™ä¸€å¹´åšäº†å¤ªå¤šçš„ä¸œè¥¿ï¼Œå´æ€è€ƒå¾—å¤ªå°‘ï¼Œæ²¡æœ‰ç†è§£åˆ°æŠ€æœ¯çš„åŸç†ï¼Œæ·±æ·±åœ°é™·å…¥äº†ç å†œæ·±æ¸Šï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Œä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼ˆç°åœ¨è€æ˜¯åæ‚”ä»¥å‰ä¸Šå¤§å­¦çš„æ—¶å€™æ²¡æœ‰å¥½å¥½å­¦ä¹ ç†è®ºçŸ¥è¯†ï¼Œä¹¦åˆ°ç”¨æ—¶æ–¹æ¨å°‘ï¼‰ã€‚æ¯æ¬¡ä»éœ€æ±‚åˆ°ç ”å‘ï¼Œéƒ½æ˜¯æ‹¿ç€è®¾è®¡å›¾ï¼Œæ€è€ƒå®ç°è¿™ä¸ªä¸œè¥¿è¦æ€ä¹ˆåšï¼Œæ—¶é—´å¯æ§ä¸ï¼Œè¦èŠ±å¤šå°‘æ—¶é—´ï¼Œæœ‰ä»€ä¹ˆé£é™©ï¼Œéœ€è¦ä»€ä¹ˆä¾èµ–ï¼Œå“ªäº›ä¸œè¥¿å¯ä»¥å¤ç”¨ç­‰ç­‰ã€‚ä½†æ˜¯ï¼Œäº§å“åˆè¡·æ˜¯ä»€ä¹ˆï¼Ÿè§£å†³äº†ç”¨æˆ·ä»€ä¹ˆåˆšéœ€ï¼Ÿä¸ºä»€ä¹ˆè®¾è®¡å¸ˆè¦è¿™æ ·å­è®¾è®¡ï¼Ÿåç«¯æ•°æ®åº“æ€ä¹ˆè®¾è®¡çš„ï¼Ÿä¸ºä»€ä¹ˆè¦ç»™è¿™æ ·çš„æ•°æ®ç»“æ„ï¼Ÿè¿™äº›å¾€å¾€éš¾ä»¥æ¥è§¦ï¼Œå³ä½¿æœ‰æœºä¼šäº†è§£ï¼Œä¹Ÿä¸å¤ªæ„¿æ„èŠ±æ—¶é—´å»åšã€‚å¾ˆå¤šæ—¶å€™éƒ½ä¸æ¸…é™¤æºå¤´ï¼Œå°±å¼€å§‹è‰è‰åŠ¨å·¥ï¼Œåªç€çœ¼äºè‡ªå·±é¢†åŸŸçš„å®ç°ï¼Œç»“æœå¾€å¾€å°±æ˜¯å„ç§è¿”å·¥ã€‚æ—¢ç„¶çœ‹ä¸åˆ°åŸç†ï¼Œé‚£å°±å…ˆä»ç°è±¡å…¥æ‰‹å§ï¼Œé€è¿‡ç°è±¡çœ‹æœ¬è´¨ã€‚ç°è±¡éƒ½ä¸çŸ¥é“ï¼Œè¿˜é¬¼çš„ä¸ªæœ¬è´¨ï¼Ÿ</p><h2 id="æœ€åŸå§‹æ¶æ„"><a href="#æœ€åŸå§‹æ¶æ„" class="headerlink" title="æœ€åŸå§‹æ¶æ„"></a>æœ€åŸå§‹æ¶æ„</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;ç¬”è€…å¤§è¨€ä¸æƒ­å°†å…¶ç§°ä¸ºå‰ç«¯æ¶æ„ï¼Œå„ä½å¤§ä½¬å¯ç›´æ¥ç•¥è¿‡&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å‰è¨€ï¼ˆçº¯å±ä¹±åŠˆæŸ´ï¼Œå¯ç›´æ¥ç•¥è¿‡ï¼‰&quot;&gt;&lt;a href=&quot;#å‰è¨€ï¼ˆçº¯å±ä¹±åŠˆæŸ´ï¼Œå¯ç›´æ¥ç•¥è¿‡ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€ï¼ˆ
      
    
    </summary>
    
    
    
      <category term="angularjs" scheme="blog.lovesora.pro/tags/angularjs/"/>
    
      <category term="architecture" scheme="blog.lovesora.pro/tags/architecture/"/>
    
  </entry>
  
  <entry>
    <title>Git Stash ä¿å­˜å’Œæ¢å¤è¿›åº¦</title>
    <link href="blog.lovesora.pro/2018/06/14/vcs/git/git-stash/"/>
    <id>blog.lovesora.pro/2018/06/14/vcs/git/git-stash/</id>
    <published>2018-06-14T10:48:09.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><code>stash</code> ä½¿ç”¨çš„<code>stack</code>æ•°æ®ç»“æ„ï¼Œå…ˆè¿›å…ˆå‡º</p></blockquote><h2 id="ä¿å­˜è¿›åº¦"><a href="#ä¿å­˜è¿›åº¦" class="headerlink" title="ä¿å­˜è¿›åº¦"></a>ä¿å­˜è¿›åº¦</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸åŒ…æ‹¬untrackedçš„æ–‡ä»¶ï¼ˆæ¯”å¦‚æ–°å¢çš„æ–‡ä»¶ï¼Œä¸ä¼šè¢«æ·»åŠ è‡³å‚¨è—ï¼‰</span></span><br><span class="line"><span class="comment"># untrack çš„æ–‡ä»¶åœ¨stashåä¾ç„¶å¯è§â€”â€”å³ä¾ç„¶åœ¨å·¥ä½œç©ºé—´ä¸­ï¼Œä¸ä¼šè¢«ä¿å­˜åˆ°stashé•œåƒä¸­ï¼Œå› æ­¤å¯¹ untrack æ–‡ä»¶çš„ä¿®æ”¹ä¸èƒ½é€šè¿‡ stash pop æ¢å¤â€”â€”å› ä¸ºè¯¥å‘½ä»¤ä¸æš‚å­˜æœªtrackçš„æ–‡ä»¶</span></span><br><span class="line">git stash</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ  message</span></span><br><span class="line">git stash save <span class="string">'message...'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ (untracked)æš‚å­˜åŒºçš„æ–‡ä»¶ï¼ˆæ–°å¢çš„æ–‡ä»¶ä¼šè¢«ç§»åŠ¨è‡³å‚¨è—ï¼‰</span></span><br><span class="line">git stash save -u <span class="string">'message...'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æ‰€æœ‰(--all)æ–‡ä»¶ï¼ˆåŒ…æ‹¬.gitignoreä¸­å¿½ç•¥çš„æ–‡ä»¶)ï¼ˆæ¯”å¦‚node_modulesï¼Œæ‰§è¡Œè¯¥å‘½ä»¤åå°±ä¹Ÿä¼šè¢«ç§»é™¤äº†ï¼Œå¯ä»¥çœ‹ä½œåˆšcloneä¸‹æ¥æ—¶çš„çŠ¶æ€ï¼‰</span></span><br><span class="line">git stash save -a <span class="string">'message...'</span></span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹è¿›åº¦åˆ—è¡¨"><a href="#æŸ¥çœ‹è¿›åº¦åˆ—è¡¨" class="headerlink" title="æŸ¥çœ‹è¿›åº¦åˆ—è¡¨"></a>æŸ¥çœ‹è¿›åº¦åˆ—è¡¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git stash list</span><br><span class="line"><span class="comment"># stash@&#123;0&#125;: WIP on master: ef0f1dc message...</span></span><br></pre></td></tr></table></figure><h2 id="æ¢å¤è¿›åº¦"><a href="#æ¢å¤è¿›åº¦" class="headerlink" title="æ¢å¤è¿›åº¦"></a>æ¢å¤è¿›åº¦</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¢å¤è‡³æœ€æ–°è¿›åº¦å¹¶ä¸”åˆ é™¤</span></span><br><span class="line">git stash pop</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šè¿›åº¦index</span></span><br><span class="line"><span class="comment"># è¿™é‡Œçš„ 3 æŒ‡çš„ git stash list æ˜¾ç¤ºçš„åˆ—è¡¨é‡Œ stash@&#123;3&#125; ä¸­æ‹¬å·é‡Œé¢çš„æ•°å­—</span></span><br><span class="line">git stash pop 3</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¢å¤ä½†ä¸åˆ é™¤</span></span><br><span class="line">git stash apply</span><br><span class="line">git stash apply 3</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤è¿›åº¦"><a href="#åˆ é™¤è¿›åº¦" class="headerlink" title="åˆ é™¤è¿›åº¦"></a>åˆ é™¤è¿›åº¦</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤æœ€æ–°è¿›åº¦</span></span><br><span class="line">git stash drop</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šè¿›åº¦index</span></span><br><span class="line">git stash drop 3</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤æ‰€æœ‰è¿›åº¦</span></span><br><span class="line">git stash clear</span><br></pre></td></tr></table></figure><h2 id="ä»å‚¨è—ä¸­åˆ›å»ºåˆ†æ”¯"><a href="#ä»å‚¨è—ä¸­åˆ›å»ºåˆ†æ”¯" class="headerlink" title="ä»å‚¨è—ä¸­åˆ›å»ºåˆ†æ”¯"></a>ä»å‚¨è—ä¸­åˆ›å»ºåˆ†æ”¯</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼Œæ£€å‡ºä½ å‚¨è—å·¥ä½œæ—¶çš„æ‰€å¤„çš„æäº¤ï¼Œé‡æ–°åº”ç”¨ä½ çš„å·¥ä½œï¼Œå¦‚æœæˆåŠŸï¼Œå°†ä¼šä¸¢å¼ƒå‚¨è—</span></span><br><span class="line">git stash branch stash/branchName 3</span><br></pre></td></tr></table></figure><h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h2><ul><li><a href="https://git-scm.com/book/zh/v1/Git-%E5%B7%A5%E5%85%B7-%E5%82%A8%E8%97%8F%EF%BC%88Stashing%EF%BC%89" target="_blank" rel="noopener">Git-å·¥å…·-å‚¨è—</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;stash&lt;/code&gt; ä½¿ç”¨çš„&lt;code&gt;stack&lt;/code&gt;æ•°æ®ç»“æ„ï¼Œå…ˆè¿›å…ˆå‡º&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ä¿å­˜è¿›åº¦&quot;&gt;&lt;a href=&quot;#ä¿å­˜è¿›åº¦&quot; class=&quot;headerlink&quot; title=&quot;
      
    
    </summary>
    
    
    
      <category term="git" scheme="blog.lovesora.pro/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>docker flow</title>
    <link href="blog.lovesora.pro/2018/06/05/devops/docker/flow/"/>
    <id>blog.lovesora.pro/2018/06/05/devops/docker/flow/</id>
    <published>2018-06-05T18:23:26.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Flow"><a href="#Flow" class="headerlink" title="Flow"></a>Flow</h2><ul><li>å¯¼å…¥é•œåƒ</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker import centos-ng-0.0.2.tar centos:ng-0.0.2</span><br></pre></td></tr></table></figure><ul><li>è¿è¡Œå®¹å™¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -d --name centos-ng-v0.0.2 \</span><br><span class="line">  -p 127.0.0.1:7203:7203 -p 127.0.0.1:7204:7204 \</span><br><span class="line">  --volume /Users/liuxin/docker/centos-ng:/opt/petkit \</span><br><span class="line">  centos:ng-0.0.2 bash</span><br></pre></td></tr></table></figure><ul><li>è¿›å…¥å®¹å™¨ç»ˆç«¯</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it centos-ng-v0.0.2 bash</span><br></pre></td></tr></table></figure><ul><li>é€€å‡ºç»ˆç«¯</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">exit</span></span><br></pre></td></tr></table></figure><ul><li>å¯åŠ¨ï¼åœæ­¢å®¹å™¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker start centos-ng-v0.0.2</span><br><span class="line">docker stop centos-ng-v0.0.2</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹æ‰€æœ‰å®¹å™¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤å®¹å™¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm centos-ng-v0.0.2</span><br></pre></td></tr></table></figure><ul><li>ä»å®¹å™¨å¯¼å‡ºé•œåƒ</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">export</span> -o centos-ng-0.0.2.tar a843ae730779</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Flow&quot;&gt;&lt;a href=&quot;#Flow&quot; class=&quot;headerlink&quot; title=&quot;Flow&quot;&gt;&lt;/a&gt;Flow&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;å¯¼å…¥é•œåƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;t
      
    
    </summary>
    
    
    
      <category term="docker" scheme="blog.lovesora.pro/tags/docker/"/>
    
      <category term="flow" scheme="blog.lovesora.pro/tags/flow/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨fishä¸­ä½¿ç”¨sdkman</title>
    <link href="blog.lovesora.pro/2018/06/05/fe/ionic/install/sdk/"/>
    <id>blog.lovesora.pro/2018/06/05/fe/ionic/install/sdk/</id>
    <published>2018-06-05T00:47:52.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…-sdkman"><a href="#å®‰è£…-sdkman" class="headerlink" title="å®‰è£… sdkman"></a>å®‰è£… <code>sdkman</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s <span class="string">"https://get.sdkman.io"</span> | bash</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæ–‡ä»¶-HOME-config-fish-conf-d-sdkman-fish"><a href="#åˆ›å»ºæ–‡ä»¶-HOME-config-fish-conf-d-sdkman-fish" class="headerlink" title="åˆ›å»ºæ–‡ä»¶ $HOME/.config/fish/conf.d/sdkman.fish"></a>åˆ›å»ºæ–‡ä»¶ <code>$HOME/.config/fish/conf.d/sdkman.fish</code></h2><p>å†™å…¥ä»¥ä¸‹ä»£ç </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/fish</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sdk command</span></span><br><span class="line"><span class="keyword">function</span> sdk</span><br><span class="line">        bash -c <span class="string">"source <span class="variable">$HOME</span>/.sdkman/bin/sdkman-init.sh &amp;&amp; sdk <span class="variable">$argv</span>"</span></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"><span class="comment"># add paths</span></span><br><span class="line"><span class="keyword">for</span> ITEM <span class="keyword">in</span> <span class="variable">$HOME</span>/.sdkman/candidates/* ;</span><br><span class="line">        <span class="built_in">set</span> -gx PATH <span class="variable">$PATH</span> <span class="variable">$ITEM</span>/current/bin</span><br><span class="line">end</span><br></pre></td></tr></table></figure><h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h2><ul><li><a href="https://github.com/sdkman/sdkman-cli/issues/294" target="_blank" rel="noopener">sdkman doesnâ€™t work with Fish shell</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å®‰è£…-sdkman&quot;&gt;&lt;a href=&quot;#å®‰è£…-sdkman&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£… sdkman&quot;&gt;&lt;/a&gt;å®‰è£… &lt;code&gt;sdkman&lt;/code&gt;&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;
      
    
    </summary>
    
    
    
      <category term="fish" scheme="blog.lovesora.pro/tags/fish/"/>
    
      <category term="sdkman" scheme="blog.lovesora.pro/tags/sdkman/"/>
    
  </entry>
  
  <entry>
    <title>centos 7 è®¾ç½® yum æ¢æº</title>
    <link href="blog.lovesora.pro/2018/06/02/linux/centos/yum-epel/"/>
    <id>blog.lovesora.pro/2018/06/02/linux/centos/yum-epel/</id>
    <published>2018-06-02T01:17:45.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-å¤‡ä»½-CentOS-Base-repo"><a href="#1-å¤‡ä»½-CentOS-Base-repo" class="headerlink" title="1. å¤‡ä»½ CentOS-Base.repo"></a>1. å¤‡ä»½ <code>CentOS-Base.repo</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak</span><br></pre></td></tr></table></figure><h2 id="2-æ›¿æ¢-etc-yum-repos-d-CentOS-Base-repo-å†…å®¹"><a href="#2-æ›¿æ¢-etc-yum-repos-d-CentOS-Base-repo-å†…å®¹" class="headerlink" title="2. æ›¿æ¢ /etc/yum.repos.d/CentOS-Base.repo å†…å®¹"></a>2. æ›¿æ¢ <code>/etc/yum.repos.d/CentOS-Base.repo</code> å†…å®¹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CentOS-Base.repo</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The mirror system uses the connecting IP address of the client and the</span></span><br><span class="line"><span class="comment"># update status of each mirror to pick mirrors that are updated to and</span></span><br><span class="line"><span class="comment"># geographically close to the client.  You should use this for CentOS updates</span></span><br><span class="line"><span class="comment"># unless you are manually picking other mirrors.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># If the mirrorlist= does not work for you, as a fall back you can try the </span></span><br><span class="line"><span class="comment"># remarked out baseurl= line instead.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"> </span><br><span class="line">[base]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Base - mirrors.aliyun.com</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://mirrors.aliyun.com/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line">        http://mirrors.aliyuncs.com/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="comment">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os</span></span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class="line"> </span><br><span class="line"><span class="comment">#released updates </span></span><br><span class="line">[updates]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Updates - mirrors.aliyun.com</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://mirrors.aliyun.com/centos/<span class="variable">$releasever</span>/updates/<span class="variable">$basearch</span>/</span><br><span class="line">        http://mirrors.aliyuncs.com/centos/<span class="variable">$releasever</span>/updates/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="comment">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates</span></span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class="line"> </span><br><span class="line"><span class="comment">#additional packages that may be useful</span></span><br><span class="line">[extras]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Extras - mirrors.aliyun.com</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://mirrors.aliyun.com/centos/<span class="variable">$releasever</span>/extras/<span class="variable">$basearch</span>/</span><br><span class="line">        http://mirrors.aliyuncs.com/centos/<span class="variable">$releasever</span>/extras/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="comment">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras</span></span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class="line"> </span><br><span class="line"><span class="comment">#additional packages that extend functionality of existing packages</span></span><br><span class="line">[centosplus]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Plus - mirrors.aliyun.com</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://mirrors.aliyun.com/centos/<span class="variable">$releasever</span>/centosplus/<span class="variable">$basearch</span>/</span><br><span class="line">        http://mirrors.aliyuncs.com/centos/<span class="variable">$releasever</span>/centosplus/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="comment">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=centosplus</span></span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class="line"> </span><br><span class="line"><span class="comment">#contrib - packages by Centos Users</span></span><br><span class="line">[contrib]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Contrib - mirrors.aliyun.com</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://mirrors.aliyun.com/centos/<span class="variable">$releasever</span>/contrib/<span class="variable">$basearch</span>/</span><br><span class="line">        http://mirrors.aliyuncs.com/centos/<span class="variable">$releasever</span>/contrib/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="comment">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=contrib</span></span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br></pre></td></tr></table></figure><h2 id="3-Install-epel"><a href="#3-Install-epel" class="headerlink" title="3. Install epel"></a>3. Install epel</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release</span><br></pre></td></tr></table></figure><h2 id="4-æ›¿æ¢-etc-yum-repos-d-epel-repo-å†…å®¹"><a href="#4-æ›¿æ¢-etc-yum-repos-d-epel-repo-å†…å®¹" class="headerlink" title="4. æ›¿æ¢ /etc/yum.repos.d/epel.repo å†…å®¹"></a>4. æ›¿æ¢ <code>/etc/yum.repos.d/epel.repo</code> å†…å®¹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[epel]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 7 - <span class="variable">$basearch</span></span><br><span class="line">baseurl=https://mirrors.tuna.tsinghua.edu.cn/epel/7/<span class="variable">$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7</span><br><span class="line"></span><br><span class="line">[epel-debuginfo]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 7 - <span class="variable">$basearch</span> - Debug</span><br><span class="line">baseurl=https://mirrors.tuna.tsinghua.edu.cn/epel/7/<span class="variable">$basearch</span>/debug</span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7</span><br><span class="line">gpgcheck=1</span><br><span class="line"></span><br><span class="line">[epel-source]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 7 - <span class="variable">$basearch</span> - Source</span><br><span class="line">baseurl=https://mirrors.tuna.tsinghua.edu.cn/epel/7/SRPMS</span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7</span><br><span class="line">gpgcheck=1</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;1-å¤‡ä»½-CentOS-Base-repo&quot;&gt;&lt;a href=&quot;#1-å¤‡ä»½-CentOS-Base-repo&quot; class=&quot;headerlink&quot; title=&quot;1. å¤‡ä»½ CentOS-Base.repo&quot;&gt;&lt;/a&gt;1. å¤‡ä»½ &lt;code&gt;CentOS-Bas
      
    
    </summary>
    
    
    
      <category term="centos7" scheme="blog.lovesora.pro/tags/centos7/"/>
    
      <category term="epel" scheme="blog.lovesora.pro/tags/epel/"/>
    
  </entry>
  
  <entry>
    <title>Docker FAQ</title>
    <link href="blog.lovesora.pro/2018/06/02/devops/docker/faq/"/>
    <id>blog.lovesora.pro/2018/06/02/devops/docker/faq/</id>
    <published>2018-06-02T01:03:49.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Mac-ç«¯å£æ˜ å°„æ— æ•ˆ"><a href="#Mac-ç«¯å£æ˜ å°„æ— æ•ˆ" class="headerlink" title="Mac ç«¯å£æ˜ å°„æ— æ•ˆ"></a>Mac ç«¯å£æ˜ å°„æ— æ•ˆ</h2><p>ç«¯å£æ˜ å°„è¯­æ³•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-p [host IP:]&lt;host port&gt;:&lt;container port&gt;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># before</span></span><br><span class="line">-p 80:80</span><br><span class="line"></span><br><span class="line"><span class="comment"># now</span></span><br><span class="line">-p 127.0.0.1:80:80</span><br></pre></td></tr></table></figure><h2 id="é‡è®¾ç«¯å£æ˜ å°„"><a href="#é‡è®¾ç«¯å£æ˜ å°„" class="headerlink" title="é‡è®¾ç«¯å£æ˜ å°„"></a>é‡è®¾ç«¯å£æ˜ å°„</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker stop nginx</span><br><span class="line">docker commit nginx nginx:v1.0.1</span><br><span class="line">docker run -p 80:80 nginx:v1.0.1</span><br></pre></td></tr></table></figure><h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h2><ul><li><a href="https://github.com/docker/for-mac/issues/1675" target="_blank" rel="noopener">Port forwarding doesnâ€™t work at all</a></li><li><a href="https://stackoverflow.com/questions/19335444/how-do-i-assign-a-port-mapping-to-an-existing-docker-container" target="_blank" rel="noopener">Assign a port mapping to an existing Docker container</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Mac-ç«¯å£æ˜ å°„æ— æ•ˆ&quot;&gt;&lt;a href=&quot;#Mac-ç«¯å£æ˜ å°„æ— æ•ˆ&quot; class=&quot;headerlink&quot; title=&quot;Mac ç«¯å£æ˜ å°„æ— æ•ˆ&quot;&gt;&lt;/a&gt;Mac ç«¯å£æ˜ å°„æ— æ•ˆ&lt;/h2&gt;&lt;p&gt;ç«¯å£æ˜ å°„è¯­æ³•&lt;/p&gt;
&lt;figure class=&quot;highlight ba
      
    
    </summary>
    
    
    
      <category term="docker" scheme="blog.lovesora.pro/tags/docker/"/>
    
      <category term="faq" scheme="blog.lovesora.pro/tags/faq/"/>
    
  </entry>
  
  <entry>
    <title>ä¼ä¸šéœ€æ±‚ç®¡ç†å·¥å…·</title>
    <link href="blog.lovesora.pro/2018/06/02/enterprise/tools/requirements/"/>
    <id>blog.lovesora.pro/2018/06/02/enterprise/tools/requirements/</id>
    <published>2018-06-02T00:58:50.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="TAPD"><a href="#TAPD" class="headerlink" title="TAPD"></a>TAPD</h2><blockquote><p><a href="https://www.tapd.cn/" target="_blank" rel="noopener">tapd official site</a></p></blockquote><h3 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h3><ul><li>ä¸€ç«™å¼ç ”å‘åä½œå¹³å°ï¼Œè…¾è®¯æ•æ·æœ€ä½³å®è·µ</li><li>å›¢é˜Ÿåä½œä¸äº§å“ç ”å‘å…¨ç”Ÿå‘½å‘¨æœŸæ”¯æŒ</li><li>ä¸€ä¸ªå¹³å°ï¼Œè®©å›¢é˜Ÿèšç„¦ç›®æ ‡ï¼Œä¸“æ³¨åä½œ</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;TAPD&quot;&gt;&lt;a href=&quot;#TAPD&quot; class=&quot;headerlink&quot; title=&quot;TAPD&quot;&gt;&lt;/a&gt;TAPD&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.tapd.cn/&quot; target=&quot;_blank&quot; re
      
    
    </summary>
    
    
    
      <category term="enterprise" scheme="blog.lovesora.pro/tags/enterprise/"/>
    
      <category term="requirement" scheme="blog.lovesora.pro/tags/requirement/"/>
    
      <category term="tool" scheme="blog.lovesora.pro/tags/tool/"/>
    
  </entry>
  
  <entry>
    <title>docker åŸºç¡€</title>
    <link href="blog.lovesora.pro/2018/05/31/devops/docker/basis/"/>
    <id>blog.lovesora.pro/2018/05/31/devops/docker/basis/</id>
    <published>2018-05-31T14:30:54.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ‰€æœ‰å‘½ä»¤å‡åœ¨ centOS 7 ä¸Šæ‰§è¡Œ</p></blockquote><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><ul><li>é•œåƒ(<code>Image</code>)<ul><li>ç›¸å½“äºæ˜¯ä¸€ä¸ª root æ–‡ä»¶ç³»ç»Ÿ</li><li>æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶</li><li>è¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰</li><li>é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜</li><li>é•œåƒæ˜¯åˆ†å±‚å­˜å‚¨çš„ï¼Œç”±å¤šå±‚æ–‡ä»¶ç³»ç»Ÿè”åˆç»„æˆ</li><li>é•œåƒæ„å»ºæ—¶ï¼Œä¼šä¸€å±‚å±‚æ„å»ºï¼Œå‰ä¸€å±‚æ˜¯åä¸€å±‚çš„åŸºç¡€ã€‚</li><li>æ¯ä¸€å±‚æ„å»ºå®Œå°±ä¸ä¼šå†å‘ç”Ÿæ”¹å˜ï¼Œåä¸€å±‚ä¸Šçš„ä»»ä½•æ”¹å˜åªå‘ç”Ÿåœ¨è‡ªå·±è¿™ä¸€å±‚ã€‚</li></ul></li><li>å®¹å™¨(<code>Container</code>)<ul><li>é•œåƒå’Œå®¹å™¨çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ <code>ç±»</code> å’Œ <code>å®ä¾‹</code> ä¸€æ ·</li><li>å®¹å™¨çš„å®è´¨æ˜¯è¿›ç¨‹</li><li>å®¹å™¨è¿›ç¨‹è¿è¡Œäºå±äºè‡ªå·±çš„ç‹¬ç«‹çš„å‘½åç©ºé—´</li><li>å®¹å™¨ä¹Ÿæ˜¯ä½¿ç”¨çš„æ˜¯åˆ†å±‚å­˜å‚¨(<code>å®¹å™¨å­˜å‚¨å±‚</code>)</li><li>å®¹å™¨æ¶ˆäº¡æ—¶ï¼Œå®¹å™¨å­˜å‚¨å±‚ä¹Ÿéšä¹‹æ¶ˆäº¡ã€‚å› æ­¤ï¼Œä»»ä½•ä¿å­˜äºå®¹å™¨å­˜å‚¨å±‚çš„ä¿¡æ¯éƒ½ä¼šéšå®¹å™¨åˆ é™¤è€Œä¸¢å¤±ã€‚</li><li>å®¹å™¨ä¸åº”è¯¥å‘å…¶å­˜å‚¨å±‚å†…å†™å…¥ä»»ä½•æ•°æ®ï¼Œå®¹å™¨å­˜å‚¨å±‚è¦ä¿æŒæ— çŠ¶æ€åŒ–</li><li>æ‰€æœ‰çš„æ–‡ä»¶å†™å…¥æ“ä½œï¼Œéƒ½åº”è¯¥ä½¿ç”¨ <code>æ•°æ®å·ï¼ˆVolumeï¼‰</code>ã€æˆ–è€…ç»‘å®šå®¿ä¸»ç›®å½•</li><li>æ•°æ®å·çš„ç”Ÿå­˜å‘¨æœŸç‹¬ç«‹äºå®¹å™¨ï¼Œå®¹å™¨æ¶ˆäº¡ï¼Œæ•°æ®å·ä¸ä¼šæ¶ˆäº¡</li></ul></li><li>ä»“åº“(Registry)<ul><li>registry/repository:tag</li><li>é»˜è®¤registryåœ°å€ <a href="https://hub.docker.com/explore/" target="_blank" rel="noopener">docker hub</a></li><li>é»˜è®¤registryå <code>library</code></li></ul></li><li>æ„å»º(build)<ul><li>Docker åœ¨è¿è¡Œæ—¶åˆ†ä¸º Docker å¼•æ“ï¼ˆä¹Ÿå°±æ˜¯æœåŠ¡ç«¯å®ˆæŠ¤è¿›ç¨‹ï¼‰å’Œå®¢æˆ·ç«¯å·¥å…·</li><li>Docker çš„å¼•æ“æä¾›äº†ä¸€ç»„ REST APIï¼Œè¢«ç§°ä¸º Docker Remote API</li><li>è€Œå¦‚ docker å‘½ä»¤è¿™æ ·çš„å®¢æˆ·ç«¯å·¥å…·ï¼Œåˆ™æ˜¯é€šè¿‡è¿™ç»„ API ä¸ Docker å¼•æ“äº¤äº’</li><li>è™½ç„¶è¡¨é¢ä¸Šæˆ‘ä»¬å¥½åƒæ˜¯åœ¨æœ¬æœºæ‰§è¡Œå„ç§ docker åŠŸèƒ½ï¼Œä½†å®é™…ä¸Šï¼Œä¸€åˆ‡éƒ½æ˜¯ä½¿ç”¨çš„è¿œç¨‹è°ƒç”¨å½¢å¼åœ¨æœåŠ¡ç«¯ï¼ˆDocker å¼•æ“ï¼‰å®Œæˆ</li><li>ä¹Ÿå› ä¸ºè¿™ç§ C/S è®¾è®¡ï¼Œè®©æˆ‘ä»¬æ“ä½œè¿œç¨‹æœåŠ¡å™¨çš„ Docker å¼•æ“å˜å¾—è½»è€Œæ˜“ä¸¾</li><li><code>docker build -t nginx:v3 .</code> ä¸­çš„è¿™ä¸ª <code>.</code>ï¼Œå®é™…ä¸Šæ˜¯åœ¨æŒ‡å®šä¸Šä¸‹æ–‡çš„ç›®å½•</li><li>docker build å‘½ä»¤ä¼šå°†è¯¥ç›®å½•ä¸‹çš„å†…å®¹æ‰“åŒ…äº¤ç»™ Docker å¼•æ“ä»¥å¸®åŠ©æ„å»ºé•œåƒ</li><li>ä¸€èˆ¬æ¥è¯´ï¼Œåº”è¯¥ä¼šå°† Dockerfile ç½®äºä¸€ä¸ªç©ºç›®å½•ä¸‹ï¼Œæˆ–è€…é¡¹ç›®æ ¹ç›®å½•ä¸‹</li><li>å¦‚æœè¯¥ç›®å½•ä¸‹æ²¡æœ‰æ‰€éœ€æ–‡ä»¶ï¼Œé‚£ä¹ˆåº”è¯¥æŠŠæ‰€éœ€æ–‡ä»¶å¤åˆ¶ä¸€ä»½è¿‡æ¥</li><li>å¦‚æœç›®å½•ä¸‹æœ‰äº›ä¸œè¥¿ç¡®å®ä¸å¸Œæœ›æ„å»ºæ—¶ä¼ ç»™ Docker å¼•æ“ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ .gitignore ä¸€æ ·çš„è¯­æ³•å†™ä¸€ä¸ª .dockerignoreï¼Œè¯¥æ–‡ä»¶æ˜¯ç”¨äºå‰”é™¤ä¸éœ€è¦ä½œä¸ºä¸Šä¸‹æ–‡ä¼ é€’ç»™ Docker å¼•æ“çš„ã€‚</li></ul></li></ul><h2 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h2><h3 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pull</span></span><br><span class="line">docker pull [é€‰é¡¹] [Docker Registry åœ°å€[:ç«¯å£å·]/]ä»“åº“å[:æ ‡ç­¾]</span><br><span class="line"></span><br><span class="line">docker pull ubuntu:16.04</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># image</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºé•œåƒ</span></span><br><span class="line">docker image ls</span><br><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰é•œåƒ(åŒ…æ‹¬ä¸­é—´å±‚é•œåƒ)</span></span><br><span class="line">docker image ls -a</span><br><span class="line"><span class="comment"># åˆ—å‡ºæŒ‡å®šä»“åº“é•œåƒ</span></span><br><span class="line">docker image ls ubuntu</span><br><span class="line"></span><br><span class="line"><span class="comment"># è™šæ‚¬é•œåƒ(dangling image)</span></span><br><span class="line">docker image ls -f dangling=<span class="literal">true</span></span><br><span class="line"><span class="comment"># åˆ é™¤è™šæ‚¬é•œåƒ(dangling image)</span></span><br><span class="line">docker image prune</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤é•œåƒ</span></span><br><span class="line">docker image rm [é€‰é¡¹] &lt;é•œåƒ1&gt; [&lt;é•œåƒ2&gt; ...]</span><br><span class="line">docker image rm [Image ID]</span><br><span class="line">docker image rm centos</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># system</span></span><br><span class="line"><span class="comment"># æŸ¥çœ‹dockeræ‰€å ç©ºé—´</span></span><br><span class="line">docker system df</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">history</span> imageName:imageTag</span><br></pre></td></tr></table></figure><h3 id="commit"><a href="#commit" class="headerlink" title="commit"></a><code>commit</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker commit(æ…ç”¨)(è‡ƒè‚¿) ç”Ÿæˆçš„é•œåƒä¹Ÿè¢«ç§°ä¸ºé»‘ç®±é•œåƒ</span></span><br><span class="line">docker commit \</span><br><span class="line">  --author <span class="string">'liuxin'</span> \</span><br><span class="line">  --message <span class="string">'commit msg'</span> \</span><br><span class="line">  containerName \</span><br><span class="line">  imageName:imageTag</span><br></pre></td></tr></table></figure><h3 id="exec"><a href="#exec" class="headerlink" title="exec"></a><code>exec</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it containerName bash</span><br></pre></td></tr></table></figure><h3 id="build"><a href="#build" class="headerlink" title="build"></a><code>build</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker build [é€‰é¡¹] &lt;ä¸Šä¸‹æ–‡è·¯å¾„/URL/-&gt;</span><br><span class="line"></span><br><span class="line">docker build -t imageName:imageTag .</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;æ‰€æœ‰å‘½ä»¤å‡åœ¨ centOS 7 ä¸Šæ‰§è¡Œ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚å¿µ&quot;&gt;&lt;/a&gt;æ¦‚å¿µ&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;é•œåƒ(&lt;code&gt;I
      
    
    </summary>
    
    
    
      <category term="docker" scheme="blog.lovesora.pro/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>shell åŸºç¡€</title>
    <link href="blog.lovesora.pro/2018/05/31/devops/shell/basis/"/>
    <id>blog.lovesora.pro/2018/05/31/devops/shell/basis/</id>
    <published>2018-05-31T00:48:30.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><ul><li>è¯­æ³•<ul><li>æ¯å¥æœ«å°¾çš„ <code>;</code> æ˜¯å¯é€‰çš„</li><li>èµ‹å€¼<ul><li>èµ‹å€¼è¯­å¥ <code>=</code> ä¸¤è¾¹ä¸èƒ½æœ‰ç©ºæ ¼</li></ul></li><li>å–å€¼<ul><li><code>&#39;&#39;</code> å†…ä¸ä¼šå–åˆ°å˜é‡å…·ä½“å†…å®¹</li><li><code>&quot;&quot;</code> å†…çš„å˜é‡ä¼šè¢«æ›¿æ¢æˆå€¼</li></ul></li><li>åˆ¤æ–­<ul><li>åˆ¤æ–­è¯­å¥ <code>[</code> <code>]</code> ä¸¤è¾¹éƒ½éœ€è¦æœ‰ç©ºæ ¼</li><li><code>-d</code> ä¸¤è¾¹éƒ½éœ€è¦ç©ºæ ¼</li><li>å¤šé‡åˆ¤æ–­ <code>[[]]</code> é—´ä½¿ç”¨ <code>||</code> æˆ–è€… <code>&amp;&amp;</code> è¿æ¥ï¼Œ<code>||</code> å’Œ <code>&amp;&amp;</code> ä¸¤è¾¹ç©ºæ ¼æ˜¯å¯é€‰çš„</li></ul></li><li>å¾ªç¯ <code>for var in 1 2 3; do</code> <code>done</code><ul><li>å¾ªç¯åˆ—è¡¨ä¸­ä½¿ç”¨ç©ºæ ¼ <code></code> åŒºåˆ†é¡¹</li><li><code>do</code> ä¸ºå¼€å§‹ <code>done</code> ä¸ºç»“æŸ</li><li>ä½¿ç”¨å˜é‡ <code>$var</code></li></ul></li></ul></li><li>å˜é‡<ul><li>ä½¿ç”¨å˜é‡æ—¶æ·»åŠ  <code>$</code> å‰ç¼€</li></ul></li><li>å‡½æ•°<ul><li>å‡½æ•°å£°æ˜å†…å¯ä»¥å¼•ç”¨å‡½æ•°å¤–éƒ¨å˜é‡</li><li>å‡½æ•°å†…éƒ¨å¯ä»¥ä½¿ç”¨ä½œç”¨åŸŸé“¾ä¸Šçš„å˜é‡ï¼Œä½†å–ä¸åˆ°æœªæ‰§è¡Œçš„å˜é‡</li></ul></li><li>è·å–ç”¨æˆ·è¾“å…¥ <code>read</code><ul><li><code>-p</code> å…è®¸è¾“å…¥æç¤º</li></ul></li><li>å…¨å±€å˜é‡<ul><li><code>$0</code> è„šæœ¬æ‰§è¡Œè·¯å¾„</li></ul></li><li>å‘½ä»¤<ul><li><code>dirname $path</code> è·å– <code>$path</code> ä¸Šå±‚ç›®å½•<ul><li><code>path=/path/to/filename</code></li><li><code>$(dirname $path) # /path/to</code></li></ul></li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">ROOT=<span class="variable">$PWD</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'$PWD'</span>; <span class="comment"># $PWD</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$PWD</span>"</span>; <span class="comment"># /path/to</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">createDir</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$before</span>; <span class="comment"># before ...</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$after</span>;  <span class="comment"># empty line</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> arg <span class="keyword">in</span> <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">    DIR=<span class="variable">$ROOT</span>/<span class="variable">$arg</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ -d <span class="variable">$DIR</span> ]; <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">"<span class="variable">$DIR</span> is already a directory"</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">read</span> -p <span class="string">"create <span class="variable">$DIR</span> ? (Y/n)"</span> isYes;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> [[ <span class="string">"<span class="variable">$isYes</span>"</span> = <span class="string">"Y"</span> ]] || [[ ! <span class="variable">$isYes</span> ]]; <span class="keyword">then</span></span><br><span class="line">        mkdir <span class="variable">$DIR</span>;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"cancel create <span class="variable">$DIR</span>"</span>;</span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">before=<span class="string">"before..."</span>;</span><br><span class="line"></span><br><span class="line">createDir <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">after=<span class="string">"after..."</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> <span class="string">"a a"</span> b c; <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$var</span>; <span class="comment"># a a, b, c</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$0</span>; <span class="comment"># æ‰§è¡Œè·¯å¾„</span></span><br><span class="line"><span class="built_in">echo</span> $(dirname <span class="variable">$0</span>); <span class="comment"># è·å–ä¸Šå±‚ç›®å½•</span></span><br></pre></td></tr></table></figure><h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h2><ul><li><a href="http://blog.51cto.com/lynnteng0/798365" target="_blank" rel="noopener">shell if å¤šæ¡ä»¶ æˆ– æ³›åŒ¹é…</a></li><li><a href="https://stackoverflow.com/questions/255898/how-to-iterate-over-arguments-in-a-bash-script" target="_blank" rel="noopener">How to iterate over arguments in a Bash script</a></li><li><a href="https://stackoverflow.com/questions/59838/check-if-a-directory-exists-in-a-shell-script" target="_blank" rel="noopener">Check if a directory exists in a shell script</a></li><li><a href="https://stackoverflow.com/questions/42453262/how-to-prompt-user-for-input-in-shell-script" target="_blank" rel="noopener">How to prompt user for input in shell script?</a></li><li><a href="https://stackoverflow.com/questions/10849297/compare-a-string-in-unix" target="_blank" rel="noopener">Compare a string in Unix</a></li><li><a href="https://blog.csdn.net/x1269778817/article/details/46535729" target="_blank" rel="noopener">Linux shell ä¸­$() <code></code> ä½œç”¨ä¸åŒºåˆ«</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å˜é‡&quot;&gt;&lt;a href=&quot;#å˜é‡&quot; class=&quot;headerlink&quot; title=&quot;å˜é‡&quot;&gt;&lt;/a&gt;å˜é‡&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;è¯­æ³•&lt;ul&gt;
&lt;li&gt;æ¯å¥æœ«å°¾çš„ &lt;code&gt;;&lt;/code&gt; æ˜¯å¯é€‰çš„&lt;/li&gt;
&lt;li&gt;èµ‹å€¼&lt;ul&gt;
&lt;li&gt;èµ‹å€¼è¯­å¥ &lt;c
      
    
    </summary>
    
    
    
      <category term="shell" scheme="blog.lovesora.pro/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>XLSX å¯¼å‡ºexcelæ–‡ä»¶ (TS)</title>
    <link href="blog.lovesora.pro/2018/05/29/javascript/exports/xlsx/"/>
    <id>blog.lovesora.pro/2018/05/29/javascript/exports/xlsx/</id>
    <published>2018-05-29T11:45:30.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Step-1-å®‰è£…ä¾èµ–-xlsx"><a href="#Step-1-å®‰è£…ä¾èµ–-xlsx" class="headerlink" title="Step 1. å®‰è£…ä¾èµ– xlsx"></a>Step 1. å®‰è£…ä¾èµ– <code>xlsx</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add xlsx</span><br></pre></td></tr></table></figure><h2 id="Step-2-Import"><a href="#Step-2-Import" class="headerlink" title="Step 2. Import"></a>Step 2. Import</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> XLSX <span class="keyword">from</span> <span class="string">'xlsx'</span>;</span><br></pre></td></tr></table></figure><h2 id="Step-3-Usage"><a href="#Step-3-Usage" class="headerlink" title="Step 3. Usage"></a>Step 3. Usage</h2><p>xlsxæ”¯æŒå¤šç§æ ¼å¼å¯¼å‡ºï¼Œå…·ä½“å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£<a href="https://github.com/SheetJS/js-xlsx" target="_blank" rel="noopener">github</a></p><blockquote><p><a href="https://stackblitz.com/edit/angular-pzkjbz" target="_blank" rel="noopener">demo</a></p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Export &#123;</span><br><span class="line">  <span class="keyword">private</span> _wb: XLSX.WorkBook = XLSX.utils.book_new();</span><br><span class="line"></span><br><span class="line">  appendSheet(aoaData, &#123;</span><br><span class="line">    sheetName = <span class="string">'sheet'</span>,</span><br><span class="line">  &#125; = &#123;&#125;) &#123;</span><br><span class="line">    <span class="comment">// ä¸å·¦ä¸Šè§’å’Œå³ä¸‹è§’ç¡®è®¤ä¸€ä¸ªçŸ©å½¢ç›¸ä¼¼</span></span><br><span class="line">    <span class="keyword">const</span> merge = &#123;</span><br><span class="line">      <span class="comment">// start</span></span><br><span class="line">      s: &#123;</span><br><span class="line">        <span class="comment">// row</span></span><br><span class="line">        r: <span class="number">0</span>,</span><br><span class="line">        <span class="comment">// column</span></span><br><span class="line">        c: <span class="number">0</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// end</span></span><br><span class="line">      e: &#123;</span><br><span class="line">        r: <span class="number">0</span>,</span><br><span class="line">        c: <span class="number">1</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// ä¸ä»¥ä¸‹å†™æ³•ç»“æœç›¸åŒ</span></span><br><span class="line">    <span class="comment">// const merge = XLSX.utils.decode_range("A1:A2");</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> ws: XLSX.WorkSheet = XLSX.utils.aoa_to_sheet(aoaData);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!ws[<span class="string">'!merges'</span>]) &#123;</span><br><span class="line">       ws[<span class="string">'!merges'</span>] = [];</span><br><span class="line">    &#125;</span><br><span class="line">    ws[<span class="string">'!merges'</span>].push(merge);</span><br><span class="line"></span><br><span class="line">    XLSX.utils.book_append_sheet(<span class="keyword">this</span>._wb, ws, sheetName);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  exportExcelFile(filename = <span class="string">'export.xlsx'</span>) &#123;</span><br><span class="line">    XLSX.writeFile(<span class="keyword">this</span>._wb, filename);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> exports = <span class="keyword">new</span> Export();</span><br><span class="line"></span><br><span class="line">exports.appendSheet([[<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="string">'c'</span>], [<span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>]]);</span><br><span class="line"></span><br><span class="line">exports.exportExcelFile();</span><br></pre></td></tr></table></figure><p><img src="/assets/images/output/export.png" alt="output"></p><h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h2><blockquote><p><a href="https://github.com/SheetJS/js-xlsx" target="_blank" rel="noopener">js-xlsx</a><br><a href="https://github.com/SheetJS/js-xlsx/issues/964" target="_blank" rel="noopener">merge cells from Array of Arrays</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Step-1-å®‰è£…ä¾èµ–-xlsx&quot;&gt;&lt;a href=&quot;#Step-1-å®‰è£…ä¾èµ–-xlsx&quot; class=&quot;headerlink&quot; title=&quot;Step 1. å®‰è£…ä¾èµ– xlsx&quot;&gt;&lt;/a&gt;Step 1. å®‰è£…ä¾èµ– &lt;code&gt;xlsx&lt;/code&gt;&lt;/h2&gt;&lt;f
      
    
    </summary>
    
    
    
      <category term="xlsx" scheme="blog.lovesora.pro/tags/xlsx/"/>
    
  </entry>
  
  <entry>
    <title>Angular Library åˆ†ç¦»å®è·µ</title>
    <link href="blog.lovesora.pro/2018/05/28/fe/angular/%E6%9D%82%E6%96%87/library/"/>
    <id>blog.lovesora.pro/2018/05/28/fe/angular/%E6%9D%82%E6%96%87/library/</id>
    <published>2018-05-28T16:22:22.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åŸç†å°±æ˜¯åˆ©ç”¨ç»å¯¹è·¯å¾„åŠ è½½Libraryé¡¹ç›®ï¼Œå…¶æœ¬èº«æ˜¯å¯ä»¥æŠ½ç¦»å‡ºå»å•ç‹¬ä½œä¸ºä¸€ä¸ªé¡¹ç›®ç»´æŠ¤çš„ã€‚</p></blockquote><blockquote><p>åœ¨<code>angular 6</code>å‘å¸ƒä¹‹å‰ä¸€ç›´å®ç”¨çš„<code>ng-packagr</code>æ‰‹åŠ¨æ„å»ºangular libraryã€‚</p></blockquote><blockquote><p><code>angular 6</code>å‘å¸ƒåå¯ä»¥é€šè¿‡<code>ng g library xxx</code> è‡ªåŠ¨ç”Ÿæˆlibé¡¹ç›®ï¼Œä½†æ˜¯ç›®å‰è¿˜ä¸å¤Ÿå®Œå–„ï¼Œä¸æ”¯æŒå®æ—¶ç¼–è¯‘ï¼Œè¿˜æœ‰å¾…å®Œå–„ã€‚</p></blockquote><blockquote><p>æœ¬æ–‡ä¸»è¦æ˜¯ä¼˜åŒ–libraryé¡¹ç›®åœ¨å¼€å‘é˜¶æ®µå’Œprojecté¡¹ç›®ä¹‹é—´çš„è°ƒè¯•é—®é¢˜ã€‚</p></blockquote><h2 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root</span><br><span class="line">  |-projects</span><br><span class="line">    |-material</span><br><span class="line">    |-common</span><br><span class="line">    |-flux</span><br><span class="line">  |-src</span><br><span class="line">    |-tsconfig.app.json</span><br><span class="line">    |-tsconfig.spec.json</span><br><span class="line">  tsconfig.json</span><br></pre></td></tr></table></figure><h2 id="å»é™¤-tsconfig-app-json-å’Œ-tsconfig-spec-json-ä¸­çš„-baseUrl"><a href="#å»é™¤-tsconfig-app-json-å’Œ-tsconfig-spec-json-ä¸­çš„-baseUrl" class="headerlink" title="å»é™¤ tsconfig.app.json å’Œ tsconfig.spec.json ä¸­çš„ baseUrl"></a>å»é™¤ <code>tsconfig.app.json</code> å’Œ <code>tsconfig.spec.json</code> ä¸­çš„ <code>baseUrl</code></h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// before</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"extends"</span>: <span class="string">"../tsconfig.json"</span>,</span><br><span class="line">  <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"baseUrl"</span>: <span class="string">"./"</span>,</span><br><span class="line">    <span class="attr">"outDir"</span>: <span class="string">"../out-tsc/app"</span>,</span><br><span class="line">    <span class="attr">"module"</span>: <span class="string">"es2015"</span>,</span><br><span class="line">    <span class="attr">"types"</span>: []</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"exclude"</span>: [</span><br><span class="line">    <span class="string">"test.ts"</span>,</span><br><span class="line">    <span class="string">"**/*.spec.ts"</span>,</span><br><span class="line">    <span class="string">"../node_modules/@petkit/**/*"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// now</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"extends"</span>: <span class="string">"../tsconfig.json"</span>,</span><br><span class="line">  <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"outDir"</span>: <span class="string">"../out-tsc/app"</span>,</span><br><span class="line">    <span class="attr">"module"</span>: <span class="string">"es2015"</span>,</span><br><span class="line">    <span class="attr">"types"</span>: []</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"exclude"</span>: [</span><br><span class="line">    <span class="string">"test.ts"</span>,</span><br><span class="line">    <span class="string">"**/*.spec.ts"</span>,</span><br><span class="line">    <span class="string">"../node_modules/@petkit/**/*"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åœ¨-tsconfig-json-ä¸­æ·»åŠ -baseUrl-é…ç½®-paths"><a href="#åœ¨-tsconfig-json-ä¸­æ·»åŠ -baseUrl-é…ç½®-paths" class="headerlink" title="åœ¨ tsconfig.json ä¸­æ·»åŠ  baseUrl, é…ç½® paths"></a>åœ¨ <code>tsconfig.json</code> ä¸­æ·»åŠ  <code>baseUrl</code>, é…ç½® <code>paths</code></h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"baseUrl"</span>: <span class="string">"./"</span>,</span><br><span class="line">    <span class="attr">"paths"</span>: &#123;</span><br><span class="line">      <span class="attr">"@libs/*"</span>: [</span><br><span class="line">        <span class="string">"projects/*"</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>** æ³¨æ„ **</p><ol><li>libraryé¡¹ç›®ä¸­éœ€è¦åœ¨æ ¹è·¯å¾„åŠ ä¸Š<code>index.ts</code>ï¼Œä»¥ä¾¿ä¸å®é™…ç”Ÿäº§ç¯å¢ƒä¸‹çš„å¼•ç”¨æ–¹å¼ä¿æŒä¸€è‡´</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.ts</span></span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">'./public_api'</span>;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;åŸç†å°±æ˜¯åˆ©ç”¨ç»å¯¹è·¯å¾„åŠ è½½Libraryé¡¹ç›®ï¼Œå…¶æœ¬èº«æ˜¯å¯ä»¥æŠ½ç¦»å‡ºå»å•ç‹¬ä½œä¸ºä¸€ä¸ªé¡¹ç›®ç»´æŠ¤çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨&lt;code&gt;angular 6&lt;/code&gt;å‘å¸ƒä¹‹å‰ä¸€ç›´å®ç”¨çš„&lt;code&gt;ng-pack
      
    
    </summary>
    
    
    
      <category term="angular" scheme="blog.lovesora.pro/tags/angular/"/>
    
      <category term="library" scheme="blog.lovesora.pro/tags/library/"/>
    
  </entry>
  
  <entry>
    <title>tsconfig json schema</title>
    <link href="blog.lovesora.pro/2018/05/28/fe/typescript/schema/"/>
    <id>blog.lovesora.pro/2018/05/28/fe/typescript/schema/</id>
    <published>2018-05-28T11:28:36.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="json-schemastore"><a href="#json-schemastore" class="headerlink" title="json schemastore"></a>json schemastore</h2><blockquote><p><a href="http://json.schemastore.org/tsconfig" target="_blank" rel="noopener">json schemastore</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;json-schemastore&quot;&gt;&lt;a href=&quot;#json-schemastore&quot; class=&quot;headerlink&quot; title=&quot;json schemastore&quot;&gt;&lt;/a&gt;json schemastore&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;
      
    
    </summary>
    
    
    
      <category term="ts" scheme="blog.lovesora.pro/tags/ts/"/>
    
      <category term="schema" scheme="blog.lovesora.pro/tags/schema/"/>
    
  </entry>
  
  <entry>
    <title>git flow</title>
    <link href="blog.lovesora.pro/2018/05/28/vcs/git/git-flow/"/>
    <id>blog.lovesora.pro/2018/05/28/vcs/git/git-flow/</id>
    <published>2018-05-28T11:21:03.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Generate-the-Commit-Message"><a href="#Generate-the-Commit-Message" class="headerlink" title="Generate the Commit Message"></a>Generate the Commit Message</h1><h2 id="Install-commitizen"><a href="#Install-commitizen" class="headerlink" title="Install commitizen"></a>Install <code>commitizen</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install</span></span><br><span class="line">yarn global add commitizen</span><br><span class="line"></span><br><span class="line"><span class="comment"># exec in project root</span></span><br><span class="line">commitizen init cz-conventional-changelog --save --save-exact</span><br></pre></td></tr></table></figure><h1 id="Validate-the-Commit-Message"><a href="#Validate-the-Commit-Message" class="headerlink" title="Validate the Commit Message"></a>Validate the Commit Message</h1><h2 id="Install-husky-to-help-us-use-git-and-npm-hooks"><a href="#Install-husky-to-help-us-use-git-and-npm-hooks" class="headerlink" title="Install husky to help us use git and npm hooks"></a>Install <code>husky</code> to help us use git and npm hooks</h2><blockquote><p><a href="https://github.com/typicode/husky/blob/master/HOOKS.md" target="_blank" rel="noopener">husky hooks</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add husky --dev</span><br></pre></td></tr></table></figure><h2 id="Install-commitlint"><a href="#Install-commitlint" class="headerlink" title="Install commitlint"></a>Install <code>commitlint</code></h2><blockquote><p><a href="https://github.com/marionebl/commitlint#getting-started" target="_blank" rel="noopener">commitlint</a></p></blockquote><h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># For Windows:</span></span><br><span class="line">yarn add --dev @commitlint/config-conventional @commitlint/cli</span><br><span class="line"></span><br><span class="line"><span class="comment"># Configure commitlint to use angular config</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"module.exports = &#123;extends: ['@commitlint/config-conventional']&#125;"</span> &gt; commitlint.config.js</span><br></pre></td></tr></table></figure><h3 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"commitmsg"</span>: <span class="string">"commitlint -e $GIT_PARAMS"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Generate-ChangeLog"><a href="#Generate-ChangeLog" class="headerlink" title="Generate ChangeLog"></a>Generate ChangeLog</h1><h2 id="Install-conventional-changelog-cli"><a href="#Install-conventional-changelog-cli" class="headerlink" title="Install conventional-changelog-cli"></a>Install <code>conventional-changelog-cli</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add --dev conventional-changelog-cli</span><br></pre></td></tr></table></figure><h2 id="Configuration-1"><a href="#Configuration-1" class="headerlink" title="Configuration"></a>Configuration</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"conventional-changelog -p angular -i CHANGELOG.md -s -r 0 &amp;&amp; git add CHANGELOG.md"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Branch-Management"><a href="#Branch-Management" class="headerlink" title="Branch Management"></a>Branch Management</h1><p>è¯¥åˆ†æ”¯æ¨¡å‹å€¼å¾—å€Ÿé‰´çš„åœ°æ–¹åŒ…æ‹¬</p><ul><li>è§„èŒƒçš„åˆ†æ”¯å‘½å</li><li>å°†åˆ†æ”¯å’Œä»£ç è¿è¡Œç¯å¢ƒå…³è”èµ·æ¥</li></ul><p>åˆ†æ”¯å’Œä»£ç è¿è¡Œç¯å¢ƒçš„å…³ç³»æ˜¯è¿™æ ·çš„ï¼Œ</p><ul><li>master =&gt; ç”Ÿäº§ç¯å¢ƒ</li><li>release/<em>ï¼Œhotfix/</em> =&gt; é¢„ä¸Šçº¿ç¯å¢ƒ</li><li>feature/*ï¼Œdevelop =&gt; å¼€å‘ç¯å¢ƒ</li></ul><h1 id="git-flow-Installation"><a href="#git-flow-Installation" class="headerlink" title="git flow Installation"></a><code>git flow</code> Installation</h1><h2 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install git-flow</span><br></pre></td></tr></table></figure><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -OL https://raw.github.com/nvie/gitflow/develop/contrib/gitflow-installer.sh</span><br><span class="line">chmod +x gitflow-installer.sh</span><br><span class="line">sudo ./gitflow-installer.sh</span><br></pre></td></tr></table></figure><h1 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h1><ul><li><a href="http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html" target="_blank" rel="noopener">Commit message å’Œ Change log ç¼–å†™æŒ‡å—</a></li><li><a href="https://yuhongjun.github.io/tech/2017/04/28/git%E4%BB%93%E5%BA%93%E5%88%A0%E9%99%A4%E6%89%80%E6%9C%89%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95-%E6%88%90%E4%B8%BA%E4%B8%80%E4%B8%AA%E5%B9%B2%E5%87%80%E7%9A%84%E6%96%B0%E4%BB%93%E5%BA%93.html" target="_blank" rel="noopener">gitä»“åº“åˆ é™¤æ‰€æœ‰æäº¤å†å²è®°å½•ï¼Œæˆä¸ºä¸€ä¸ªå¹²å‡€çš„æ–°ä»“åº“</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Generate-the-Commit-Message&quot;&gt;&lt;a href=&quot;#Generate-the-Commit-Message&quot; class=&quot;headerlink&quot; title=&quot;Generate the Commit Message&quot;&gt;&lt;/a&gt;Gener
      
    
    </summary>
    
    
    
      <category term="flow" scheme="blog.lovesora.pro/tags/flow/"/>
    
      <category term="git" scheme="blog.lovesora.pro/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>angular v5å‡çº§è‡³v6</title>
    <link href="blog.lovesora.pro/2018/05/28/fe/angular/%E6%9D%82%E6%96%87/v5-to-v6/"/>
    <id>blog.lovesora.pro/2018/05/28/fe/angular/%E6%9D%82%E6%96%87/v5-to-v6/</id>
    <published>2018-05-28T11:15:31.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…v8ç‰ˆnode-lts"><a href="#å®‰è£…v8ç‰ˆnode-lts" class="headerlink" title="å®‰è£…v8ç‰ˆnode lts"></a>å®‰è£…v8ç‰ˆnode lts</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># now is 8.11.2</span></span><br><span class="line">sudo n lts</span><br></pre></td></tr></table></figure><h2 id="å‡çº§-angular-cli"><a href="#å‡çº§-angular-cli" class="headerlink" title="å‡çº§ @angular/cli"></a>å‡çº§ <code>@angular/cli</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall -g @angular/cli</span><br><span class="line">npm cache verify</span><br><span class="line">npm i -g @angular/cli@6.0.0</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹æ‰€æœ‰angularä¾èµ–è‡³v6"><a href="#ä¿®æ”¹æ‰€æœ‰angularä¾èµ–è‡³v6" class="headerlink" title="ä¿®æ”¹æ‰€æœ‰angularä¾èµ–è‡³v6"></a>ä¿®æ”¹æ‰€æœ‰angularä¾èµ–è‡³v6</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"@angular-devkit/build-angular"</span>: <span class="string">"~0.6.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/animations"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/cdk"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/cli"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/common"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/compiler"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/compiler-cli"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/core"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/forms"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/http"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/material"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/platform-browser"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/platform-browser-dynamic"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/router"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"rxjs"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"rxjs-compat"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"tsickle"</span>: <span class="string">"0.27.5"</span>,</span><br><span class="line">    <span class="attr">"tslib"</span>: <span class="string">"1.9.0"</span>,</span><br><span class="line">    <span class="attr">"typescript"</span>: <span class="string">"2.7.2"</span>,</span><br><span class="line">    <span class="attr">"zone.js"</span>: <span class="string">"~0.8.26"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é‡è£…-node-modules"><a href="#é‡è£…-node-modules" class="headerlink" title="é‡è£… node_modules"></a>é‡è£… <code>node_modules</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -rf node_modules</span><br><span class="line">yarn install</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤-angular-cli-jsonï¼Œæ·»åŠ -angular-json"><a href="#åˆ é™¤-angular-cli-jsonï¼Œæ·»åŠ -angular-json" class="headerlink" title="åˆ é™¤.angular-cli.jsonï¼Œæ·»åŠ .angular.json"></a>åˆ é™¤<code>.angular-cli.json</code>ï¼Œæ·»åŠ <code>.angular.json</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng update @angular/cli --migrate-only --from=1.7.4</span><br></pre></td></tr></table></figure><h2 id="Finished"><a href="#Finished" class="headerlink" title="Finished"></a>Finished</h2><p>å¤§åŠŸå‘Šæˆ</p><h2 id="æ–°ç‰¹æ€§"><a href="#æ–°ç‰¹æ€§" class="headerlink" title="æ–°ç‰¹æ€§"></a>æ–°ç‰¹æ€§</h2><ol><li><a href="https://juejin.im/post/5aeebbce6fb9a07aa213406e" target="_blank" rel="noopener">angular</a></li></ol><h2 id="break-change"><a href="#break-change" class="headerlink" title="break change"></a>break change</h2><ul><li><a href="https://github.com/ReactiveX/rxjs/blob/master/MIGRATION.md" target="_blank" rel="noopener">rxjs v6</a><ul><li>é“¾å¼æ“ä½œæ”¹ä¸º<code>pipe</code></li></ul></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// before</span></span><br><span class="line">source</span><br><span class="line"> .map(<span class="function"><span class="params">x</span> =&gt;</span> x + x)</span><br><span class="line"> .mergeMap(<span class="function"><span class="params">n</span> =&gt;</span> of(n + <span class="number">1</span>, n + <span class="number">2</span>)</span><br><span class="line">   .filter(<span class="function"><span class="params">x</span> =&gt;</span> x % <span class="number">1</span> == <span class="number">0</span>)</span><br><span class="line">   .scan(<span class="function">(<span class="params">acc, x</span>) =&gt;</span> acc + x, <span class="number">0</span>)</span><br><span class="line"> )</span><br><span class="line"> .catch(<span class="function"><span class="params">err</span> =&gt;</span> of(<span class="string">'error found'</span>))</span><br><span class="line"> .subscribe(printResult);</span><br><span class="line"></span><br><span class="line"><span class="comment">// now</span></span><br><span class="line">source.pipe(</span><br><span class="line"> map(<span class="function"><span class="params">x</span> =&gt;</span> x + x),</span><br><span class="line"> mergeMap(<span class="function"><span class="params">n</span> =&gt;</span> of(n + <span class="number">1</span>, n + <span class="number">2</span>).pipe(</span><br><span class="line">   filter(<span class="function"><span class="params">x</span> =&gt;</span> x % <span class="number">1</span> == <span class="number">0</span>),</span><br><span class="line">   scan(<span class="function">(<span class="params">acc, x</span>) =&gt;</span> acc + x, <span class="number">0</span>),</span><br><span class="line"> )),</span><br><span class="line"> catchError(<span class="function"><span class="params">err</span> =&gt;</span> of(<span class="string">'error found'</span>)),</span><br><span class="line">).subscribe(printResult);</span><br></pre></td></tr></table></figure><ul><li>æ“ä½œç¬¦å¯¼å…¥è·¯å¾„</li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Observable, Subject, asapScheduler, pipe, of, <span class="keyword">from</span>, interval, merge, fromEvent &#125; <span class="keyword">from</span> <span class="string">'rxjs'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; map, filter, scan &#125; <span class="keyword">from</span> <span class="string">'rxjs/operators'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; webSocket &#125; <span class="keyword">from</span> <span class="string">'rxjs/webSocket'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ajax &#125; <span class="keyword">from</span> <span class="string">'rxjs/ajax'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; TestScheduler &#125; <span class="keyword">from</span> <span class="string">'rxjs/testing'</span>;</span><br></pre></td></tr></table></figure><ul><li>éƒ¨åˆ†æ“ä½œç¬¦é‡å‘½å</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">do -&gt; tap</span><br><span class="line">catch -&gt; catchError</span><br><span class="line">switch -&gt; switchAll</span><br><span class="line">finally -&gt; finalize</span><br></pre></td></tr></table></figure><ul><li>éƒ¨åˆ†æ“ä½œç¬¦åœ¨v7ç‰ˆå°†åºŸå¼ƒ</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mergeMap()</span><br><span class="line">mergeMapTo()</span><br><span class="line">concatMap()</span><br><span class="line">concatMapTo()</span><br><span class="line">switchMap</span><br><span class="line">switchMapTo()</span><br><span class="line">exhaustMap()</span><br><span class="line">forkJoin()</span><br><span class="line">zip()</span><br><span class="line">combineLatest()</span><br><span class="line">fromEvent()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å®‰è£…v8ç‰ˆnode-lts&quot;&gt;&lt;a href=&quot;#å®‰è£…v8ç‰ˆnode-lts&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…v8ç‰ˆnode lts&quot;&gt;&lt;/a&gt;å®‰è£…v8ç‰ˆnode lts&lt;/h2&gt;&lt;figure class=&quot;highlight bash
      
    
    </summary>
    
    
    
      <category term="angular" scheme="blog.lovesora.pro/tags/angular/"/>
    
      <category term="upgrade" scheme="blog.lovesora.pro/tags/upgrade/"/>
    
  </entry>
  
  <entry>
    <title>github pages tips</title>
    <link href="blog.lovesora.pro/2018/05/28/open-source/github/git-page/"/>
    <id>blog.lovesora.pro/2018/05/28/open-source/github/git-page/</id>
    <published>2018-05-28T02:08:11.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è‡ªå®šä¹‰åŸŸå"><a href="#è‡ªå®šä¹‰åŸŸå" class="headerlink" title="è‡ªå®šä¹‰åŸŸå"></a>è‡ªå®šä¹‰åŸŸå</h2><ul><li><p>settings -&gt; github pages<br><img src="/assets/images/github/pages.png" alt="github pages"></p></li><li><p>è®¾ç½®ä¸€æ¡CNAMEçš„åŸŸåè§£æè®°å½•å€¼ä¸º <code>xxx.github.io</code><br><img src="/assets/images/github/dns.png" alt="dns"></p></li><li><p>åœ¨é¡¹ç›®æ ¹è·¯å¾„ä¸­æ·»åŠ æ–‡ä»¶ <code>CNAME</code>, æ·»åŠ ä¸€è¡Œè®°å½•ï¼Œä¸ç„¶æ¯æ¬¡gitæäº¤éƒ½ä¼šé‡ç½®GitHub pagesåŸŸåé…ç½®</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blog.lovesora.pro</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;è‡ªå®šä¹‰åŸŸå&quot;&gt;&lt;a href=&quot;#è‡ªå®šä¹‰åŸŸå&quot; class=&quot;headerlink&quot; title=&quot;è‡ªå®šä¹‰åŸŸå&quot;&gt;&lt;/a&gt;è‡ªå®šä¹‰åŸŸå&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;settings -&amp;gt; github pages&lt;br&gt;&lt;img src=&quot;/assets/
      
    
    </summary>
    
    
    
      <category term="github" scheme="blog.lovesora.pro/tags/github/"/>
    
      <category term="pageg" scheme="blog.lovesora.pro/tags/pageg/"/>
    
  </entry>
  
  <entry>
    <title>angularç–‘éš¾æ‚ç—‡</title>
    <link href="blog.lovesora.pro/2018/05/28/fe/angular/%E6%9D%82%E6%96%87/%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/"/>
    <id>blog.lovesora.pro/2018/05/28/fe/angular/%E6%9D%82%E6%96%87/%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/</id>
    <published>2018-05-28T00:07:03.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ‰§è¡Œ-ng-config-xxx-å-ng-xxx-å‘½ä»¤æŠ¥é”™-é‡è£…-angular-cliä»ç„¶æŠ¥é”™"><a href="#æ‰§è¡Œ-ng-config-xxx-å-ng-xxx-å‘½ä»¤æŠ¥é”™-é‡è£…-angular-cliä»ç„¶æŠ¥é”™" class="headerlink" title="æ‰§è¡Œ ng config xxx å ng xxx å‘½ä»¤æŠ¥é”™ é‡è£…@angular/cliä»ç„¶æŠ¥é”™"></a>æ‰§è¡Œ <code>ng config xxx</code> å <code>ng xxx</code> å‘½ä»¤æŠ¥é”™ é‡è£…<code>@angular/cli</code>ä»ç„¶æŠ¥é”™</h2><p>æŠ¥é”™ä¿¡æ¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Workspace needs to be loaded before it is used.</span><br><span class="line">Error: Workspace needs to be loaded before it is used.</span><br><span class="line">    at Workspace._assertLoaded (/usr/<span class="built_in">local</span>/lib/node_modules/@angular/cli/node_modules/@angular-devkit/core/src/workspace/workspace.js:59:19)</span><br><span class="line">    at Workspace._getTool (/usr/<span class="built_in">local</span>/lib/node_modules/@angular/cli/node_modules/@angular-devkit/core/src/workspace/workspace.js:145:14)</span><br><span class="line">    at Workspace.getCli (/usr/<span class="built_in">local</span>/lib/node_modules/@angular/cli/node_modules/@angular-devkit/core/src/workspace/workspace.js:127:21)</span><br><span class="line">    at Object.getDefaultSchematicCollection (/usr/<span class="built_in">local</span>/lib/node_modules/@angular/cli/utilities/config.js:209:32)</span><br><span class="line">    at NewCommand.parseCollectionName (/usr/<span class="built_in">local</span>/lib/node_modules/@angular/cli/commands/new.js:88:76)</span><br><span class="line">    at NewCommand.initialize (/usr/<span class="built_in">local</span>/lib/node_modules/@angular/cli/commands/new.js:46:37)</span><br><span class="line">    at Object.&lt;anonymous&gt; (/usr/<span class="built_in">local</span>/lib/node_modules/@angular/cli/models/<span class="built_in">command</span>-runner.js:87:23)</span><br><span class="line">    at Generator.next (&lt;anonymous&gt;)</span><br><span class="line">    at fulfilled (/usr/<span class="built_in">local</span>/lib/node_modules/@angular/cli/models/<span class="built_in">command</span>-runner.js:4:58)</span><br><span class="line">    at &lt;anonymous&gt;</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ¡ˆ</p><p>åˆ é™¤<code>angular-config.json</code>æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm ~/.angular-config.json</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æ‰§è¡Œ-ng-config-xxx-å-ng-xxx-å‘½ä»¤æŠ¥é”™-é‡è£…-angular-cliä»ç„¶æŠ¥é”™&quot;&gt;&lt;a href=&quot;#æ‰§è¡Œ-ng-config-xxx-å-ng-xxx-å‘½ä»¤æŠ¥é”™-é‡è£…-angular-cliä»ç„¶æŠ¥é”™&quot; class=&quot;headerlink&quot; t
      
    
    </summary>
    
    
    
      <category term="angular" scheme="blog.lovesora.pro/tags/angular/"/>
    
  </entry>
  
  <entry>
    <title>angular å…¥é—¨ç³»åˆ— - ç¯å¢ƒé…ç½®</title>
    <link href="blog.lovesora.pro/2018/05/27/fe/angular/%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    <id>blog.lovesora.pro/2018/05/27/fe/angular/%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</id>
    <published>2018-05-27T10:48:01.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Step-1-å®‰è£…node"><a href="#Step-1-å®‰è£…node" class="headerlink" title="Step 1. å®‰è£…node"></a>Step 1. å®‰è£…node</h2><blockquote><p>å»ºè®®ä½¿ç”¨<a href="https://github.com/creationix/nvm#installation" target="_blank" rel="noopener">nvm</a>å®‰è£…</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash</span><br></pre></td></tr></table></figure><h2 id="Step-2-ä½¿ç”¨nå®‰è£…ltsç‰ˆnodejs"><a href="#Step-2-ä½¿ç”¨nå®‰è£…ltsç‰ˆnodejs" class="headerlink" title="Step 2. ä½¿ç”¨nå®‰è£…ltsç‰ˆnodejs"></a>Step 2. ä½¿ç”¨nå®‰è£…ltsç‰ˆnodejs</h2><p>nodeç‰ˆæœ¬ç®¡ç†ç¥å™¨ <code>n</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éœ€è¦rooæƒé™</span></span><br><span class="line">sudo npm i -g n</span><br><span class="line">sudo n lts</span><br></pre></td></tr></table></figure><h2 id="Step-3-å®‰è£…-yarn"><a href="#Step-3-å®‰è£…-yarn" class="headerlink" title="Step 3. å®‰è£… yarn"></a>Step 3. å®‰è£… <code>yarn</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g yarn</span><br></pre></td></tr></table></figure><h2 id="Step-4-å®‰è£…-angular-cli"><a href="#Step-4-å®‰è£…-angular-cli" class="headerlink" title="Step 4. å®‰è£… @angular/cli"></a>Step 4. å®‰è£… <code>@angular/cli</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g @angular/cli@6.0.0</span><br></pre></td></tr></table></figure><h2 id="Step-5-åˆ›å»ºangularé¡¹ç›®"><a href="#Step-5-åˆ›å»ºangularé¡¹ç›®" class="headerlink" title="Step 5. åˆ›å»ºangularé¡¹ç›®"></a>Step 5. åˆ›å»ºangularé¡¹ç›®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ cssé¢„å¤„ç†å™¨scss [angular cli css preprocessor](https://github.com/angular/angular-cli/wiki/stories-css-preprocessors)</span></span><br><span class="line">ng new angular6-demo --style=scss</span><br></pre></td></tr></table></figure><h2 id="Step-6-è¿è¡Œangular"><a href="#Step-6-è¿è¡Œangular" class="headerlink" title="Step 6. è¿è¡Œangular"></a>Step 6. è¿è¡Œangular</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> angular6-demo</span><br><span class="line">yarn start</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Step-1-å®‰è£…node&quot;&gt;&lt;a href=&quot;#Step-1-å®‰è£…node&quot; class=&quot;headerlink&quot; title=&quot;Step 1. å®‰è£…node&quot;&gt;&lt;/a&gt;Step 1. å®‰è£…node&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å»ºè®®ä½¿ç”¨&lt;a href
      
    
    </summary>
    
    
    
      <category term="angular" scheme="blog.lovesora.pro/tags/angular/"/>
    
      <category term="beginner" scheme="blog.lovesora.pro/tags/beginner/"/>
    
  </entry>
  
  <entry>
    <title>Nginx é…ç½®</title>
    <link href="blog.lovesora.pro/2018/05/26/devops/nginx/config/"/>
    <id>blog.lovesora.pro/2018/05/26/devops/nginx/config/</id>
    <published>2018-05-26T23:23:13.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…nginx"><a href="#å®‰è£…nginx" class="headerlink" title="å®‰è£…nginx"></a>å®‰è£…nginx</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx</span><br></pre></td></tr></table></figure><h2 id="é…ç½®nginx"><a href="#é…ç½®nginx" class="headerlink" title="é…ç½®nginx"></a>é…ç½®nginx</h2><p>é…ç½®æ–‡ä»¶: <strong>/usr/local/etc/nginx/nginx.conf</strong></p><ul><li>å°† <strong>http</strong> éƒ¨åˆ†ä¿®æ”¹æˆä¸‹é¢çš„é…ç½®</li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">  <span class="attribute">include</span>       /etc/nginx/mime.types;</span><br><span class="line">  <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">log_format</span>    main  <span class="string">'<span class="variable">$remote_addr</span> - <span class="variable">$remote_user</span> [<span class="variable">$time_local</span>] "<span class="variable">$request</span>" '</span></span><br><span class="line">  <span class="string">'<span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> "<span class="variable">$http_referer</span>" '</span></span><br><span class="line">  <span class="string">'"<span class="variable">$http_user_agent</span>" "<span class="variable">$http_x_forwarded_for</span>"'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">access_log</span>    /var/log/nginx/access.log  main;    <span class="comment">#æ—¥å¿—æ–‡ä»¶å­˜æ”¾ä½ç½®</span></span><br><span class="line"></span><br><span class="line">  <span class="attribute">sendfile</span>      <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">keepalive_timeout</span>  <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">gzip</span> <span class="literal">on</span>;</span><br><span class="line">  <span class="attribute">gzip_http_version</span>  <span class="number">1</span>.<span class="number">0</span>;</span><br><span class="line">  <span class="attribute">gzip_disable</span>       <span class="string">"MSIE [1-6]."</span>;</span><br><span class="line">  <span class="attribute">gzip_min_length</span>    <span class="number">512</span>;</span><br><span class="line">  <span class="attribute">gzip_types</span>         text/plain application/x-javascript text/css text/javascript application/javascript application/xml application/json;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">include</span> servers/<span class="regexp">*.conf</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœæ—¥å¿—æ–‡ä»¶çš„è·¯å¾„ä¸å­˜åœ¨, åˆ™éœ€è¦å…ˆåˆ›å»º: sudo mkdir -p /var/log/nginx/</p></blockquote><blockquote><p>ä¿®æ”¹è®¿é—®æƒé™: sudo chmod -R a+rw /var/log/nginx/</p></blockquote><blockquote><p>å¦‚æœå‡ºç°æ²¡æœ‰æƒé™è®¿é—®access.logæ–‡ä»¶, å¯æ‰‹å·¥åˆ›å»º, å¹¶ä¿®æ”¹æƒé™:</p></blockquote><blockquote><p>touch /var/log/nginx/access.log &amp;&amp; sudo chmod a+rw /var/log/nginx/access.log</p></blockquote><h2 id="ä»£ç†é…ç½®"><a href="#ä»£ç†é…ç½®" class="headerlink" title="ä»£ç†é…ç½®"></a>ä»£ç†é…ç½®</h2><p>é…ç½®æ–‡ä»¶: <strong>/usr/local/etc/nginx/proxy.conf</strong></p><ul><li>proxy.confçš„å†…å®¹å¦‚ä¸‹:</li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">proxy_redirect</span>          <span class="literal">off</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span>        Host <span class="variable">$host</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span>        X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line"><span class="attribute">client_max_body_size</span>    <span class="number">10m</span>;</span><br><span class="line"><span class="attribute">client_body_buffer_size</span> <span class="number">128k</span>;</span><br><span class="line"><span class="attribute">proxy_connect_timeout</span>   <span class="number">300</span>;</span><br><span class="line"><span class="attribute">proxy_send_timeout</span>      <span class="number">300</span>;</span><br><span class="line"><span class="attribute">proxy_read_timeout</span>      <span class="number">300</span>;</span><br><span class="line"><span class="attribute">proxy_buffer_size</span>       <span class="number">4k</span>;</span><br><span class="line"><span class="attribute">proxy_buffers</span>           <span class="number">4</span> <span class="number">32k</span>;</span><br><span class="line"><span class="attribute">proxy_busy_buffers_size</span> <span class="number">64k</span>;</span><br><span class="line"><span class="attribute">proxy_temp_file_write_size</span> <span class="number">64k</span>;</span><br></pre></td></tr></table></figure><h2 id="é…ç½®è½¬å‘"><a href="#é…ç½®è½¬å‘" class="headerlink" title="é…ç½®è½¬å‘"></a>é…ç½®è½¬å‘</h2><p>é…ç½®æ–‡ä»¶: <strong>/usr/local/etc/nginx/servers/food.conf</strong></p><p><strong>æ³¨æ„</strong>: </p><p>è¯·å°†é…ç½®æ–‡ä»¶ä¸­çš„ <strong>/root/workspace/project/src</strong> ä¿®æ”¹ä¸ºæœ¬åœ°è·¯å¾„</p><p>#æµ‹è¯•æœåŠ¡å™¨</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">upstream</span> sandbox &#123;</span><br><span class="line">  <span class="attribute">server</span> sandbox.com:<span class="number">80</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>#æ­£å¼æœåŠ¡å™¨</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">upstream</span> deploy &#123;</span><br><span class="line">  <span class="attribute">server</span> deploy.com;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">server_name</span>  localhost <span class="number">127.0.0.1</span>; <span class="comment">#å¯é€šè¿‡è¿™äºŒä¸ªåœ°å€è®¿é—®</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ—¥å¿—æ–‡ä»¶çš„å­˜æ”¾ä½ç½®</span></span><br><span class="line">  <span class="attribute">access_log</span>    /var/log/nginx/food-access.log  main;</span><br><span class="line">  <span class="attribute">error_log</span>     /var/log/nginx/food-<span class="literal">error</span>.log;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">index</span> index.html;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">location</span> /api &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span>              http://sandbox.com/api;</span><br><span class="line">    <span class="comment"># Hosté™å®š</span></span><br><span class="line">    <span class="attribute">proxy_set_header</span>        Host sandbox.com;</span><br><span class="line">    <span class="attribute">include</span> proxy.conf;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">location</span> /admin &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span>              http://sandbox.com/admin;</span><br><span class="line">    <span class="comment"># Hosté™å®š</span></span><br><span class="line">    <span class="attribute">proxy_set_header</span>        Host sandbox.com;</span><br><span class="line">    <span class="attribute">include</span> proxy.conf;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">location</span> / &#123;</span><br><span class="line">    <span class="attribute">root</span>        /root/workspace/project/src;  <span class="comment">#å°†è¯¥åœ°å€æŒ‡å‘æ­£ç¡®çš„é¡¹ç›®è·¯å¾„</span></span><br><span class="line">    <span class="attribute">index</span>       index.html index.htm;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">location</span> <span class="variable">@badrequest</span> &#123;</span><br><span class="line">    <span class="attribute">default_type</span> <span class="string">"application/json; charset=utf-8"</span>;</span><br><span class="line">    <span class="attribute">if</span> (<span class="variable">$http_x_locale</span> <span class="regexp">~* "^zh")</span> &#123;</span><br><span class="line">      <span class="attribute">return</span> <span class="number">400</span> <span class="string">"&#123;\"error\":&#123;\"code\":96,\"message\":\"è¯·æ±‚ä¸æ­£ç¡®\"&#125;&#125;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">400</span> <span class="string">"&#123;\"error\":&#123;\"code\":96,\"msg\":\"Bad request\"&#125;&#125;"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attribute">location</span> <span class="variable">@versiontooold</span> &#123;</span><br><span class="line">    <span class="attribute">default_type</span> <span class="string">"application/json; charset=utf-8"</span>;</span><br><span class="line">    <span class="attribute">if</span> (<span class="variable">$http_x_locale</span> <span class="regexp">~* "^zh")</span> &#123;</span><br><span class="line">      <span class="attribute">return</span> <span class="number">404</span> <span class="string">"&#123;\"error\":&#123;\"code\":97,\"message\":\"Appç‰ˆæœ¬è¿‡ä½ï¼Œè¯·å‡çº§\"&#125;&#125;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">404</span> <span class="string">"&#123;\"error\":&#123;\"code\":97,\"message\":\"App is too old, please upgrade\"&#125;&#125;"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attribute">location</span> <span class="variable">@servererror</span> &#123;</span><br><span class="line">    <span class="attribute">default_type</span> <span class="string">"application/json; charset=utf-8"</span>;</span><br><span class="line">    <span class="attribute">if</span> (<span class="variable">$http_x_locale</span> <span class="regexp">~* "^zh")</span> &#123;</span><br><span class="line">      <span class="attribute">return</span> <span class="number">500</span> <span class="string">"&#123;\"error\":&#123;\"code\":98,\"message\":\"ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•\"&#125;&#125;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">500</span> <span class="string">"&#123;\"error\":&#123;\"code\":98,\"message\":\"Unknown error, please retry later\"&#125;&#125;"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attribute">location</span> <span class="variable">@maintenance</span>&#123;</span><br><span class="line">    <span class="attribute">default_type</span> <span class="string">"application/json; charset=utf-8"</span>;</span><br><span class="line">    <span class="attribute">if</span> (<span class="variable">$http_x_locale</span> <span class="regexp">~* "^zh")</span> &#123;</span><br><span class="line">      <span class="attribute">return</span> <span class="number">503</span> <span class="string">"&#123;\"error\":&#123;\"code\":99,\"message\":\"å¾ˆæŠ±æ­‰ï¼ŒæœåŠ¡å™¨ç»´æŠ¤ä¸­ï¼Œè¯·ç¨åé‡è¯•\"&#125;&#125;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">503</span> <span class="string">"&#123;\"error\":&#123;\"code\":99,\"message\":\"The server is under maintenance, please retry later\"&#125;&#125;"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attribute">error_page</span> <span class="number">400</span> = <span class="variable">@badrequest</span>;</span><br><span class="line">  <span class="attribute">error_page</span> <span class="number">404</span> = <span class="variable">@versiontooold</span>;</span><br><span class="line">  <span class="attribute">error_page</span> <span class="number">500</span> = <span class="variable">@servererror</span>;</span><br><span class="line">  <span class="attribute">error_page</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span> = <span class="variable">@maintenance</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="éªŒè¯é…ç½®æ–‡ä»¶"><a href="#éªŒè¯é…ç½®æ–‡ä»¶" class="headerlink" title="éªŒè¯é…ç½®æ–‡ä»¶"></a>éªŒè¯é…ç½®æ–‡ä»¶</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure><h1 id="å¯åŠ¨nginx"><a href="#å¯åŠ¨nginx" class="headerlink" title="å¯åŠ¨nginx"></a>å¯åŠ¨nginx</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx</span><br></pre></td></tr></table></figure><h1 id="é‡å¯æˆ–é‡åŠ è½½é…ç½®æ–‡ä»¶"><a href="#é‡å¯æˆ–é‡åŠ è½½é…ç½®æ–‡ä»¶" class="headerlink" title="é‡å¯æˆ–é‡åŠ è½½é…ç½®æ–‡ä»¶"></a>é‡å¯æˆ–é‡åŠ è½½é…ç½®æ–‡ä»¶</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å®‰è£…nginx&quot;&gt;&lt;a href=&quot;#å®‰è£…nginx&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…nginx&quot;&gt;&lt;/a&gt;å®‰è£…nginx&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;
      
    
    </summary>
    
    
    
      <category term="nginx" scheme="blog.lovesora.pro/tags/nginx/"/>
    
      <category term="config" scheme="blog.lovesora.pro/tags/config/"/>
    
  </entry>
  
  <entry>
    <title>hexo FAQ</title>
    <link href="blog.lovesora.pro/2018/05/26/blog/hexo/hexo-faq/"/>
    <id>blog.lovesora.pro/2018/05/26/blog/hexo/hexo-faq/</id>
    <published>2018-05-26T02:11:35.000Z</published>
    <updated>2020-03-23T23:07:27.939Z</updated>
    
    <content type="html"><![CDATA[<h2 id="hexo-spostä¸­çš„tagåˆ é™¤åè¿˜å­˜åœ¨"><a href="#hexo-spostä¸­çš„tagåˆ é™¤åè¿˜å­˜åœ¨" class="headerlink" title="hexo spostä¸­çš„tagåˆ é™¤åè¿˜å­˜åœ¨"></a><code>hexo s</code>postä¸­çš„tagåˆ é™¤åè¿˜å­˜åœ¨</h2><ol><li>åœæ­¢hexo server</li><li>æ‰§è¡Œ<code>hexo clean</code></li><li>é‡å¯server<code>hexo s</code></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;hexo-spostä¸­çš„tagåˆ é™¤åè¿˜å­˜åœ¨&quot;&gt;&lt;a href=&quot;#hexo-spostä¸­çš„tagåˆ é™¤åè¿˜å­˜åœ¨&quot; class=&quot;headerlink&quot; title=&quot;hexo spostä¸­çš„tagåˆ é™¤åè¿˜å­˜åœ¨&quot;&gt;&lt;/a&gt;&lt;code&gt;hexo s&lt;/code&gt;post
      
    
    </summary>
    
    
    
      <category term="hexo" scheme="blog.lovesora.pro/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>gitå¸¸ç”¨å‘½ä»¤</title>
    <link href="blog.lovesora.pro/2018/05/25/vcs/git/git-cammand/"/>
    <id>blog.lovesora.pro/2018/05/25/vcs/git/git-cammand/</id>
    <published>2018-05-25T22:08:09.000Z</published>
    <updated>2020-03-23T23:07:27.943Z</updated>
    
    <content type="html"><![CDATA[<h2 id="gitæ£€å‡ºè¿œç¨‹åˆ†æ”¯"><a href="#gitæ£€å‡ºè¿œç¨‹åˆ†æ”¯" class="headerlink" title="gitæ£€å‡ºè¿œç¨‹åˆ†æ”¯"></a>gitæ£€å‡ºè¿œç¨‹åˆ†æ”¯</h2><p><code>git checkout -b localBranch remote/branchName</code></p><h2 id="å›é€€åˆ°åˆ¶å®šç‰ˆæœ¬"><a href="#å›é€€åˆ°åˆ¶å®šç‰ˆæœ¬" class="headerlink" title="å›é€€åˆ°åˆ¶å®šç‰ˆæœ¬"></a>å›é€€åˆ°åˆ¶å®šç‰ˆæœ¬</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> <span class="comment">#æŸ¥çœ‹ç‰ˆæœ¬æäº¤æ—¥å¿—</span></span><br><span class="line">git reset --hard 61e0e8b94667afe99c8dcd4f954ad69d0d6f49e8</span><br></pre></td></tr></table></figure><h2 id="åˆ—å‡ºè¿œç¨‹tagåˆ—è¡¨"><a href="#åˆ—å‡ºè¿œç¨‹tagåˆ—è¡¨" class="headerlink" title="åˆ—å‡ºè¿œç¨‹tagåˆ—è¡¨"></a>åˆ—å‡ºè¿œç¨‹tagåˆ—è¡¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git ls-remote --tag</span><br></pre></td></tr></table></figure><h2 id="æ£€å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯"><a href="#æ£€å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯" class="headerlink" title="æ£€å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯"></a>æ£€å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> branch <span class="keyword">in</span> $(git branch --all | grep <span class="string">'^\s*remotes'</span> | egrep --invert-match <span class="string">'(:?HEAD|master)$'</span>); <span class="keyword">do</span></span><br><span class="line">    git branch --track <span class="string">"<span class="variable">$&#123;branch##*/&#125;</span>"</span> <span class="string">"<span class="variable">$branch</span>"</span> 2&gt;/dev/null</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤æ‰€æœ‰è¿œç¨‹tag"><a href="#åˆ é™¤æ‰€æœ‰è¿œç¨‹tag" class="headerlink" title="åˆ é™¤æ‰€æœ‰è¿œç¨‹tag"></a>åˆ é™¤æ‰€æœ‰è¿œç¨‹tag</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># xargs -p å¯æ‰“å°å‡ºå°†æ‰§è¡Œçš„å‘½ä»¤</span></span><br><span class="line">git tag | xargs -n1 git push origin --delete</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;gitæ£€å‡ºè¿œç¨‹åˆ†æ”¯&quot;&gt;&lt;a href=&quot;#gitæ£€å‡ºè¿œç¨‹åˆ†æ”¯&quot; class=&quot;headerlink&quot; title=&quot;gitæ£€å‡ºè¿œç¨‹åˆ†æ”¯&quot;&gt;&lt;/a&gt;gitæ£€å‡ºè¿œç¨‹åˆ†æ”¯&lt;/h2&gt;&lt;p&gt;&lt;code&gt;git checkout -b localBranch remote/b
      
    
    </summary>
    
    
    
      <category term="git" scheme="blog.lovesora.pro/tags/git/"/>
    
      <category term="cli" scheme="blog.lovesora.pro/tags/cli/"/>
    
  </entry>
  
</feed>
